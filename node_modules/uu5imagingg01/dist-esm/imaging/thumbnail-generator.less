@import "~uu5g04/dist-esm/tools.less";
@import "../config/config.less";

@grayColor: #e5e5e5;
@borderGrayColor: #979797;
@blackColor: #000000;

.aspect-ratio(@width, @ratio) {
  width: @width;
  height: @width / @ratio;
}

.@{css}-thumbnail-generator {
  padding: 8px;
  display: flex;
  justify-content: flex-start;
  flex-direction: column;

  @media @minM {
    .@{css}-thumbnail-generator-aside& {
      display: inline-flex;
      flex-direction: row;
      flex-wrap: wrap;
    }
  }

  .@{css}-thumbnail-generator-image-area {
    background-color: @grayColor;
    width: 100%;
    height: 240px;
    position: relative;
    display: flex;
    border: 2px dashed lighten(@borderGrayColor, 20%);
    overflow: hidden; // otherwise IE shows scrollbar on BODY on @maxS

    &.set {
      border: none;
    }

    @media @minM {
      .@{css}-thumbnail-generator-aside& {
        width: 520px;
        height: 344px;
      }
    }

    .@{css}-thumbnail-generator-upload-text {
      width: 100%;
      position: absolute;
      left: 50%;
      top: auto;
      bottom: 15%;
      transform: translateX(-50%);
      text-align: center;

      @media @minM {
        .@{css}-thumbnail-generator-aside& {
          bottom: 20%;
        }
      }

      @media @minS {
        .uu5-bricks-header {
          font-size: 30px;
          line-height: 40px;
        }
      }
      .uu5-bricks-header {
        color: fadeout(@blackColor, 64%);
      }

      .uu5-bricks-p {
        font-size: 16px;
        line-height: 21px;
        color: fadeout(@blackColor, 64%);
      }
    }

    .uu5-forms-input.uu5-forms-file {
      height: 100%;
      width: 100%;
      margin: 0;

      &:not([class^="color-schema-"]):not([class*=" color-schema-"]):not(.uu5-forms-file-selected):not(.uu5-common-disabled):not(.uu5-forms-input-read-only) {
        .uu5-forms-items-input:hover:not(:focus):not(:active) {
          background-color: transparent;
          border: none;
        }
      }

      .uu5-forms-input-wrapper {
        margin: 0;
      }

      .uu5-forms-file-input-row {
        height: 100%;
      }

      .uu5-forms-items-input {
        background-color: transparent;
        width: 100%;
        height: 100%;
        border: none;

        &:focus {
          background-color: transparent !important;
        }

        .uu5-bricks-icon.mdi.mdi-cloud-upload {
          padding: 0;
          height: auto;
          left: 50%;
          top: 10%;
          transform: translateX(-50%);

          &:before {
            font-size: 70px;
            color: fadeout(@blackColor, 64%);
          }

          @media @minM {
            .@{css}-thumbnail-generator-aside& {
              top: 25%;
            }
          }
        }
      }
    }

    .ReactCrop {
      vertical-align: top;

      img {
        max-width: 100%;
        max-height: 240px;
        @media @minM {
          .@{css}-thumbnail-generator-aside& {
            max-width: 520px;
            max-height: 344px;
          }
        }
      }
      .ReactCrop__crop-selection {
        border: none;

        &:after {
          width: 100%;
          content: " ";
          display: block;
          border: 2px dashed white;
          height: 100%;
          transform: scale(1.01);
        }

        .ReactCrop__drag-elements {
          .ReactCrop__drag-handle {
            margin: 0;
            background: none;
            outline: none;
            border: none;
          }

          .ord-nw,
          .ord-ne,
          .ord-sw {
            display: none;
          }

          .ord-se {
            width: 0;
            height: 0;
            border-bottom: 10px solid white;
            border-left: 10px solid transparent;
            z-index: 9;
          }
        }
      }

      &.avatar {
        .ReactCrop__crop-selection {
          border-radius: 50%;

          &:after {
            border-radius: 50%;
          }
        }
      }
    }
  }

  .@{css}-thumbnail-generator-img-align {
    margin: auto;
    align-self: center; // IE to center small images vertically
    max-width: 100%; // IE for xs, s with wide image (e.g. 5:1 aspect ratio)
    flex: none; // IE for xs, s with wide image (e.g. 5:1 aspect ratio)
  }

  .@{css}-thumbnail-generator-mask-items {
    width: 100%;
    padding-top: 8px;
    align-self: flex-start;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;

    @media @minM {
      .@{css}-thumbnail-generator-aside& {
        padding-top: 0;
        padding-left: 16px;
        width: 152px;
        justify-content: flex-start;
      }
    }

    .@{css}-thumbnail-generator-mask-item {
      width: 64px;
      height: 80px;
      position: relative;
      margin-right: 4px;
      margin-bottom: 8px;

      &:last-child {
        margin-right: 0;
      }

      &.selected {
        box-shadow: 0 0 0 2px #3991e1;
        border-radius: 4px;
      }

      .@{css}-thumbnail-generator-area-item {
        margin: 0;
        border: none;
        cursor: pointer;
        background-color: @grayColor;
        background-size: 100% 100%;
        background-repeat: no-repeat;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      p {
        position: absolute;
        left: 50%;
        top: auto;
        bottom: 0;
        transform: translateX(-50%);
        margin: 0;
        font-size: 10px;
        line-height: 14px;
        color: #303030;
      }
    }

    .@{css}-thumbnail-generator-button-control {
      display: flex;
      flex-wrap: nowrap;
      justify-content: center;
      width: 100%;

      @media @minM {
        .@{css}-thumbnail-generator-aside& {
          padding-top: 16px;
          flex-wrap: wrap;
        }
      }

      a {
        display: block;
        padding-right: 16px;
        color: #d0021b;
        font-size: 12px;
        line-height: 16px;

        @media @minM {
          .@{css}-thumbnail-generator-aside& {
            padding: 8px 0;
          }
        }

        &:last-child {
          padding-right: 0;
        }
      }
    }
  }
}
