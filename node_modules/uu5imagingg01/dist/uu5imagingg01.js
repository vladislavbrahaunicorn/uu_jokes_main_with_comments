/*!
 * UAF Licence for the uu5Imaging software.
 * 
 * Copyright (c) 2016-present, Unicorn a.s.
 * All rights reserved.
 * 
 * Definitions
 * -----------
 * This licence agreement is based on the original "BSD Licence" published by
 * the Regents of the University of California in 1990.
 * 
 * The term "Software" means the uu5 package, its modules, components,
 * all program files, source code, examples, media, and documentation which are part
 * of the Software package, as well as any portion of them. The term "Author" means
 * Unicorn a.s. and all its subsidiaries and/or affiliates.
 * 
 * Licence Agreement
 * -----------------
 * 
 * Redistribution and use of this Software in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 
 * 3. All derivative products containing user interface must display the following
 *    acknowledgement in the appropriate "About window" or website section accessible
 *    by all users of the product:
 * 
 *      This product includes following software developed by
 *      <a href="https://unicorn.com">Unicorn a.s.</a>:
 *      <a href="https://uuos9.plus4u.net/uu-bookkitg01-main/78462435-86b4d5a4a030400784764ebdb972bbda/book">UAF</a>,
 *      <a href="https://uuos9.plus4u.net/uu-bookkitg01-main/78462435-ed11ec379073476db0aa295ad6c00178/book">uu5</a>.
 * 
 * 4. All derivative products must not block the default uu5 browser console message containing
 *    Software version information and copyright notice of the Author.
 * 
 * 5. The use of any portion of this Software is not allowed in the products
 *    that fully or partially resemble the functionality of the Software
 *    or otherwise compete with the Software unless they are licenced under the same licence
 *    conditions and provided free of charge. Specific prior written permission is required otherwise.
 * 
 * 6. Neither the name of the Author nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 * 
 * Disclaimer
 * ----------
 * THIS SOFTWARE IS PROVIDED BY AUTHOR "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL AUTHOR BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("module"), require("uu5g04"), require("uu5g04-bricks"), require("uu5g04-forms"), require("react"), require("prop-types"));
	else if(typeof define === 'function' && define.amd)
		define("uu5imagingg01", ["module", "uu5g04", "uu5g04-bricks", "uu5g04-forms", "react", "prop-types"], factory);
	else if(typeof exports === 'object')
		exports["uu5imagingg01"] = factory(require("module"), require("uu5g04"), require("uu5g04-bricks"), require("uu5g04-forms"), require("react"), require("prop-types"));
	else
		root["UU5"] = root["UU5"] || {}, root["UU5"]["Imaging"] = factory(root["undefined"], root["UU5"], root["UU5"]["Bricks"], root["UU5"]["Forms"], root["React"], root["PropTypes"]);
})(window, function(__WEBPACK_EXTERNAL_MODULE__2__, __WEBPACK_EXTERNAL_MODULE__4__, __WEBPACK_EXTERNAL_MODULE__18__, __WEBPACK_EXTERNAL_MODULE__36__, __WEBPACK_EXTERNAL_MODULE__55__, __WEBPACK_EXTERNAL_MODULE__56__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(1);


/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

var mod = __webpack_require__(2);

var isDoc = typeof document !== "undefined";
var uri = ((mod ? mod.uri : isDoc && (document.currentScript || Array.prototype.slice.call(document.getElementsByTagName("script"), -1)[0] || {}).src) || "").toString();
uri = uri.split(/\//).slice(0, -1).join("/") + "/"; // runtime publicPath configuration required for proper linking of styles, background images, ...

var floatingVersion = "/1.0.0/";
if (uri.substr(-floatingVersion.length) === floatingVersion) uri = uri.substr(0, uri.length - floatingVersion.length) + "/1.7.0/";
__webpack_require__.p = uri;
module.exports = __webpack_require__(3);

/***/ }),
/* 2 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE__2__;

/***/ }),
/* 3 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _imaging_imaging_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5);
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "Imaging", function() { return _imaging_imaging_js__WEBPACK_IMPORTED_MODULE_1__; });



if (true) {
  console.log("uu5Imagingg01-".concat("1.7.0", " \xA9 Unicorn\nTerms of Use: http://unicorn.com/tou/uu5imagingg01"));
}

uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.addRuntimeLibrary({
  name: "uu5imagingg01",
  version: "1.7.0"
});

/* harmony default export */ __webpack_exports__["default"] = (_imaging_imaging_js__WEBPACK_IMPORTED_MODULE_1__); // merge into UU5
// NOTE "uu5g04" must ensure that the key already exists there, otherwise following usage wouldn't work:
//   import * as UU5 from "uu5g04";
//   import "uu5imagingg01";
//   console.log(UU5.Imaging.Image);

if (!uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Imaging) {
  uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Imaging = {};
}

for (var k in _imaging_imaging_js__WEBPACK_IMPORTED_MODULE_1__) {
  uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Imaging[k] = _imaging_imaging_js__WEBPACK_IMPORTED_MODULE_1__[k];
}

/***/ }),
/* 4 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE__4__;

/***/ }),
/* 5 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _lightbox_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Lightbox", function() { return _lightbox_js__WEBPACK_IMPORTED_MODULE_0__["Lightbox"]; });

/* harmony import */ var _image_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(17);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Image", function() { return _image_js__WEBPACK_IMPORTED_MODULE_1__["Image"]; });

/* harmony import */ var _thumbnail_list_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ThumbnailList", function() { return _thumbnail_list_js__WEBPACK_IMPORTED_MODULE_2__["ThumbnailList"]; });

/* harmony import */ var _image_row_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(26);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ImageRow", function() { return _image_row_js__WEBPACK_IMPORTED_MODULE_3__["ImageRow"]; });

/* harmony import */ var _image_column_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(28);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ImageColumn", function() { return _image_column_js__WEBPACK_IMPORTED_MODULE_4__["ImageColumn"]; });

/* harmony import */ var _carousel_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(30);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Carousel", function() { return _carousel_js__WEBPACK_IMPORTED_MODULE_5__["Carousel"]; });

/* harmony import */ var _input_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(35);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Input", function() { return _input_js__WEBPACK_IMPORTED_MODULE_6__["Input"]; });

/* harmony import */ var _upload_input_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(50);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "UploadInput", function() { return _upload_input_js__WEBPACK_IMPORTED_MODULE_7__["UploadInput"]; });

/* harmony import */ var _adjustment_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(37);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Adjustment", function() { return _adjustment_js__WEBPACK_IMPORTED_MODULE_8__["Adjustment"]; });

/* harmony import */ var _thumbnail_generator_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(53);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ThumbnailGenerator", function() { return _thumbnail_generator_js__WEBPACK_IMPORTED_MODULE_9__["ThumbnailGenerator"]; });












/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Lightbox", function() { return Lightbox; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);
/* harmony import */ var _lightbox_body_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8);
/* harmony import */ var _lightbox_less__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(15);
/* harmony import */ var _lightbox_less__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_lightbox_less__WEBPACK_IMPORTED_MODULE_3__);
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }





var modalRoot;

function getModalRoot() {
  if (!modalRoot) {
    modalRoot = document.createElement("div");
    modalRoot.id = "uu5-imaging-lightbox-modal-root";
    document.body.appendChild(modalRoot);
  }

  return modalRoot;
}

var Lightbox = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.VisualComponent.create({
  //@@viewOn:mixins
  mixins: [uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.BaseMixin],
  //@@viewOff:mixins
  //@@viewOn:statics
  statics: {
    tagName: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].TAG + "Lightbox",
    classNames: {
      main: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "lightbox"
    },
    defaults: {
      key: "general"
    }
  },
  //@@viewOff:statics
  //@@viewOn:propTypes
  propTypes: {
    data: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.array,
    blackBackground: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.bool,
    name: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string
  },
  //@@viewOff:propTypes
  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      data: [],
      blackBackground: true
    };
  },
  //@@viewOff:getDefaultProps
  //@@viewOn:reactLifeCycle
  componentWillMount: function componentWillMount() {
    var _this = this;

    var key = this.props.name || this.getDefault("key");
    uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.Lightboxes = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.Lightboxes || {};
    uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.Lightboxes[key] = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.Lightboxes[key] || [];
    uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.Lightboxes[key].push(this);

    this._createPortal();

    this._options = {};
    var data = this.props.data && this.props.data.map(function (dataItem) {
      return _objectSpread({}, dataItem, {
        sourceLightbox: _this
      });
    });
    var opt = {
      blackBackground: this.props.blackBackground,
      index: 0,
      data: data
    };

    this._setOptions(opt);

    if (!this._isTargetLightbox() && data) {
      var targetLightbox = this._getTargetLightbox();

      data.forEach(function (item) {
        targetLightbox._addImage(item.src, item.id, item.authenticate, item.sourceComponent, _this, null, item.alt);
      });
    }
  },
  componentWillUnmount: function componentWillUnmount() {
    this._unregisterLightbox();

    this._removePortal();
  },
  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {
    var _this2 = this;

    var options;

    if (this._isTargetLightbox()) {
      if (this.props.name !== nextProps.name) {
        var key = nextProps.name || this.getDefault("key");
        uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.Lightboxes = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.Lightboxes || {};

        this._unregisterLightbox();

        uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.Lightboxes[key] = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.Lightboxes[key] || [];
        uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.Lightboxes[key].push(this);
      }

      options = {
        blackBackground: nextProps.blackBackground
      };
    }

    if (this.props.data !== nextProps.data) {
      var targets = [this];
      if (!this._isTargetLightbox()) targets.push(this._getTargetLightbox());
      targets.forEach(function (target) {
        // remove old items
        _this2.props.data.forEach(function (dataItem) {
          target._options.data = target._options.data.filter(function (optionsItem) {
            return !(optionsItem === dataItem || optionsItem.id === (dataItem.id || dataItem.src));
          });
        }); // add new items


        var newData = nextProps.data && nextProps.data.map(function (dataItem) {
          return _objectSpread({}, dataItem, {
            sourceLightbox: _this2
          });
        });
        newData.forEach(function (item) {
          target._addImage(item.src, item.id, item.authenticate, item.sourceComponent, _this2, true, item.alt);
        });
      });
    }

    if (options) {
      this._setOptions(options);
    }
  },
  //@@viewOff:reactLifeCycle
  //@@viewOn:interface
  addImage: function addImage(src, id, authenticate, sourceComponent, alt) {
    if (id === undefined) {
      id = src;
    }

    if (this._isTargetLightbox()) {
      this._addImage(src, id, authenticate, sourceComponent, this, null, alt);
    } else {
      this._getTargetLightbox()._addImage(src, id, authenticate, sourceComponent, this, null, alt);
    }

    return this;
  },
  removeImage: function removeImage(id) {
    if (this._isTargetLightbox()) {
      var i = this._findIndex(id);

      this._options.data.splice(i, 1);
    } else {
      this._getTargetLightbox().removeImage(id);
    }

    return this;
  },
  replaceImage: function replaceImage(newSrc, id) {
    if (this._isTargetLightbox()) {
      if (id === undefined) {
        id = newSrc;
      }

      var i = this._findIndex(id);

      this._options.data[i].src = newSrc;
    } else {
      this._getTargetLightbox().replaceImage(newSrc, id);
    }

    return this;
  },
  getImages: function getImages() {
    if (this._isTargetLightbox()) {
      return this._options.data;
    } else {
      return this._getTargetLightbox().getImages();
    }
  },
  getImage: function getImage(id) {
    if (this._isTargetLightbox()) {
      var i = this._findIndex(id);

      return this._options.data[i];
    } else {
      this._getTargetLightbox().getImage(id);
    }
  },
  getImageBySrc: function getImageBySrc(src) {
    if (this._isTargetLightbox()) {
      var i = this._findIndexBySrc(src);

      return this._options.data[i];
    } else {
      this._getTargetLightbox().getImageBySrc(src);
    }
  },
  open: function open(id, setStateCallback) {
    var _this3 = this;

    if (this._isTargetLightbox()) {
      if (this._options.data.length) {
        this._options.data.sort(function (firstImage, secondImage) {
          var result;

          if (firstImage.sourceComponent === secondImage.sourceComponent) {
            result = 0;
          } else {
            var firstImageNode = firstImage.sourceComponent ? firstImage.sourceComponent.findDOMNode() : null; // eslint-disable-line react/no-find-dom-node

            var secondImageNode = secondImage.sourceComponent ? secondImage.sourceComponent.findDOMNode() : null; // eslint-disable-line react/no-find-dom-node

            if (firstImageNode && secondImageNode) {
              var compareResult = firstImageNode.compareDocumentPosition(secondImageNode);
              result = compareResult & document.DOCUMENT_POSITION_FOLLOWING ? -1 : 1;
            } else {
              result = firstImageNode ? -1 : 1;
            }
          }

          return result;
        });

        if (id !== undefined) {
          var i;

          if (typeof id === "number") {
            i = id;
          } else if (typeof id === "string") {
            i = this._findIndex(id);
          } else {
            i = 0;
          }

          if (i === -1) {
            uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Tools.warning("Target Lightbox can't find the image that you are trying to open.");
            return;
          }

          this._setOptions({
            index: i
          });
        }

        this._modal.open({
          content: this._getBody()
        }, function () {
          _this3._onOpen();

          typeof setStateCallback === "function" && setStateCallback();
        });
      }
    } else {
      this._getTargetLightbox().open(id, setStateCallback);
    }

    return this;
  },
  close: function close(setStateCallback) {
    if (this._isTargetLightbox()) {
      this._onClose({
        component: this._modal,
        callback: setStateCallback
      });
    } else {
      this._getTargetLightbox().close(setStateCallback);
    }

    return this;
  },
  //@@viewOff:interface
  //@@viewOn:overridingMethods
  //@@viewOff:overridingMethods
  //@@viewOn:private
  _addImage: function _addImage(src, id, authenticate, sourceComponent) {
    var sourceLightbox = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this;
    var ignoreTarget = arguments.length > 5 ? arguments[5] : undefined;
    var alt = arguments.length > 6 ? arguments[6] : undefined;

    if (id === undefined) {
      id = src;
    }

    if (ignoreTarget || this._isTargetLightbox()) {
      this._options.data.push({
        id: id,
        src: src,
        authenticate: authenticate,
        sourceComponent: sourceComponent,
        sourceLightbox: sourceLightbox,
        alt: alt
      });
    } else {
      this._getTargetLightbox()._addImage(src, id, authenticate, sourceComponent, sourceLightbox, alt);
    }

    return this;
  },
  _createPortal: function _createPortal() {
    this._portalElement = document.createElement("div");
    this._portalElement.id = this.getId() + "_portal";
    getModalRoot().appendChild(this._portalElement);
  },
  _removePortal: function _removePortal() {
    getModalRoot().removeChild(this._portalElement);
  },
  _getTargetLightbox: function _getTargetLightbox() {
    var key = this.props.name || this.getDefault("key");
    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.Lightboxes[key][0];
  },
  _unregisterLightbox: function _unregisterLightbox() {
    var _this4 = this;

    var oldKey = this.props.name || this.getDefault("key");
    var firstLightbox = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.Lightboxes[oldKey][0];
    uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.Lightboxes[oldKey].forEach(function (lightbox, index) {
      return lightbox === _this4 ? uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.Lightboxes[oldKey].splice(index, 1) : null;
    }); // "re-activate" next instance of Lightbox so that it renders its <Modal />

    var newFirstLightbox = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.Lightboxes[oldKey][0];

    if (firstLightbox !== newFirstLightbox && newFirstLightbox) {
      this._options.data = this._options.data.filter(function (item) {
        return item.sourceLightbox !== _this4;
      });

      newFirstLightbox._setOptions(this._options);

      newFirstLightbox.forceUpdate();
    }
  },
  _findIndexByType: function _findIndexByType(type, value) {
    if (typeof this._options.data.findIndex === "function") {
      return this._options.data.findIndex(function (img) {
        return img[type] === value;
      });
    } else {
      // IE
      for (var i = 0; i < this._options.data.length; i++) {
        if (this._options.data[i][type] === value) {
          return i;
        }
      }
    }
  },
  _findIndex: function _findIndex(id) {
    return this._findIndexByType("id", id);
  },
  _findIndexBySrc: function _findIndexBySrc(src) {
    return this._findIndexByType("src", src);
  },
  _isTargetLightbox: function _isTargetLightbox() {
    return this._getTargetLightbox().getId() === this.getId();
  },
  _setOptions: function _setOptions(opt) {
    opt && opt.data && opt.data.forEach(function (item) {
      if (item.id === undefined) {
        item.id = item.src;
      }
    });
    Object.assign(this._options, opt);
    return this;
  },
  _getOptions: function _getOptions() {
    return this._options;
  },
  _onOpen: function _onOpen() {
    if (this._lightboxBody) {
      this._lightboxBody.onOpenModal();
    }

    return this;
  },
  _onClose: function _onClose(opt) {
    if (this._lightboxBody) {
      this._lightboxBody.onCloseModal();
    }

    opt.component.close(false, opt.callback);
    return this;
  },
  _getBody: function _getBody() {
    var _this5 = this;

    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_lightbox_body_js__WEBPACK_IMPORTED_MODULE_2__["default"], {
      ref_: function ref_(component) {
        return _this5._lightboxBody = component;
      },
      setOptions: this._setOptions,
      getOptions: this._getOptions,
      closeModal: function closeModal() {
        return _this5._onClose({
          component: _this5._modal
        });
      }
    });
  },
  //@@viewOff:private
  //@@viewOn:render
  render: function render() {
    var _this6 = this;

    return this._isTargetLightbox() ? uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Portal.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Modal, _extends({}, this.getMainPropsToPass(), {
      ref_: function ref_(modal) {
        return _this6._modal = modal;
      },
      onClose: function onClose(opt) {
        return _this6._onClose(opt);
      },
      forceRender: true
    })), this._portalElement) : null;
  } //@@viewOff:render

});
/* harmony default export */ __webpack_exports__["default"] = (Lightbox);

/***/ }),
/* 7 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
// This file was auto-generated according to the "namespace" setting in package.json.
// Manual changes to this file are discouraged, if values are inconsistent with package.json setting.
/* harmony default export */ __webpack_exports__["default"] = ({
  TAG: "UU5.Imaging.",
  CSS: "uu5-imaging-"
});

/***/ }),
/* 8 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);
/* harmony import */ var _lightbox_body_less__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(9);
/* harmony import */ var _lightbox_body_less__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_lightbox_body_less__WEBPACK_IMPORTED_MODULE_2__);
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(n); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }




var LightboxBody = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.VisualComponent.create({
  //@@viewOn:mixins
  mixins: [uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.BaseMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.SwipeMixin],
  //@@viewOff:mixins
  //@@viewOn:statics
  statics: {
    tagName: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].TAG + "Lightbox.Body",
    classNames: {
      main: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "lightbox-body",
      verticalAlign: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "lightbox-body-vertical-align-helper",
      header: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "lightbox-body-header",
      bodyContent: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "lightbox-body-content",
      white: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "lightbox-body-white-color",
      gray: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "lightbox-body-gray-color",
      counterWhite: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "lightbox-body-counter-white",
      counterGray: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "lightbox-body-counter-gray",
      controlWhite: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "lightbox-body-control-white",
      controlGray: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "lightbox-body-control-gray",
      noDecoration: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "lightbox-body-nodecoration",
      navigationArrow: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "lightbox-body-navigation-arrow",
      navigationArrowLeft: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "lightbox-body-navigation-arrow-left",
      navigationArrowRight: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "lightbox-body-navigation-arrow-right",
      preloadImage: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "lightbox-body-preload-image"
    }
  },
  //@@viewOff:statics
  //@@viewOn:propTypes
  propTypes: {
    getOption: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.func,
    setOption: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.func
  },
  //@@viewOff:propTypes
  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      getOption: null,
      setOption: null
    };
  },
  //@@viewOff:getDefaultProps
  //@@viewOn:reactLifeCycle
  getInitialState: function getInitialState() {
    var newData = Object.assign({}, this.props);
    var options = this.props.getOptions();
    newData = Object.assign(newData, options);
    return {
      data: newData.data,
      index: newData.index,
      isLoaded: newData.isLoaded,
      zoom: newData.zoom,
      blackBackground: newData.blackBackground,
      open: false
    };
  },
  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {
    var newData = Object.assign({}, nextProps);
    var options = nextProps.getOptions();
    newData = Object.assign(newData, options);
    this.setData(newData);
    return this;
  },
  componentDidMount: function componentDidMount() {
    this._mounted = true;

    this._checkImageLoaded();
  },
  componentWillMount: function componentWillMount() {
    if (this._bodyContent) this._bodyContent.removeEventListener("wheel", this._mouseWheel, {
      passive: false
    });
  },
  componentDidUpdate: function componentDidUpdate() {
    this._checkImageLoaded();
  },
  //@@viewOff:reactLifeCycle
  //@@viewOn:interface
  onCloseModal: function onCloseModal() {
    // TODO remove after UU5.Bricks.Modal was fixed
    document.body.className = document.body.className.replace(new RegExp("modal-open", "g"), "").trim();
    window.removeEventListener("keydown", this._keyPress);
    this._isOpen = false;
    return this;
  },
  onOpenModal: function onOpenModal() {
    window.addEventListener("keydown", this._keyPress);
    this._isOpen = true;
    return this;
  },
  isOpen: function isOpen() {
    return this._isOpen;
  },
  setData: function setData(newData, setStateCallback) {
    this.setState({
      data: newData.data,
      index: newData.index,
      isLoaded: newData.isLoaded,
      zoom: newData.zoom,
      blackBackground: newData.blackBackground
    }, setStateCallback);
    return this;
  },
  //@@viewOff:interface
  //@@viewOn:private
  _checkImageLoaded: function _checkImageLoaded() {
    if (!this.state.isLoaded && this._mainImage) {
      var imageEl = this._mainImage.findDOMNode();

      if (imageEl.complete) this._setImageLoaded(this.state.index, imageEl);
    }
  },
  _allowZoom: function _allowZoom() {
    var _this$state = this.state,
        index = _this$state.index,
        data = _this$state.data;

    if (document.getElementById("lightbox-body")) {
      var boundaries = document.getElementById("lightbox-body").getBoundingClientRect();
      var current = data[index];
      return current.height > boundaries.height || current.width > boundaries.width;
    }

    return false;
  },
  _toggleZoom: function _toggleZoom() {
    var _this = this;

    var zoom = this.state.zoom;
    zoom = !zoom;
    this.setState({
      zoom: zoom
    }, function () {
      if (_this._bodyContent) {
        _this._bodyContent.scrollTop = 0;
        _this._bodyContent.scrollLeft = 0;
      }
    });
  },
  _toggleBackground: function _toggleBackground() {
    var blackBackground = this.state.blackBackground;
    blackBackground = !blackBackground;
    this.setState({
      blackBackground: blackBackground
    });
    this.props.setOptions({
      blackBackground: blackBackground
    });
  },
  _previousImage: function _previousImage() {
    var _this$state2 = this.state,
        index = _this$state2.index,
        isLoaded = _this$state2.isLoaded,
        data = _this$state2.data;
    isLoaded = false;
    index--;
    index = index < 0 ? data.length - 1 : index;
    this.setState({
      index: index,
      isLoaded: isLoaded,
      zoom: false
    });
    this.props.setOptions({
      index: index
    });
  },
  _nextImage: function _nextImage() {
    var _this$state3 = this.state,
        index = _this$state3.index,
        data = _this$state3.data,
        isLoaded = _this$state3.isLoaded;
    isLoaded = false;
    index++;
    index %= data.length;
    this.setState({
      index: index,
      isLoaded: isLoaded,
      zoom: false
    });
    this.props.setOptions({
      index: index
    });
  },
  _getNavigationClassName: function _getNavigationClassName(right) {
    var className = this.getClassName().navigationArrow;
    var direction = right ? this.getClassName().navigationArrowRight : this.getClassName().navigationArrowLeft;
    var color = this.state.blackBackground ? this.getClassName().white : this.getClassName().gray;
    return className.concat(" ", direction, " ", color);
  },
  _mouseWheel: function _mouseWheel(e) {
    e.preventDefault();

    if (this._allowZoom()) {
      var zoom = e.deltaY < 0;

      if (zoom !== this.state.zoom) {
        this._toggleZoom();
      }
    }
  },
  _mouseDown: function _mouseDown(e) {
    e.preventDefault();

    if (e.button === 0) {
      this._handleStart(e.clientX, e.clientY);
    }
  },
  _touchStart: function _touchStart(e) {
    this.swipeOnTouchStart(e);

    this._handleStart(e.touches[0].clientX, e.touches[0].clientY);
  },
  _handleStart: function _handleStart(x, y) {
    if (this.state.zoom) {
      this.setState({
        startX: x,
        startY: y,
        mouseDrag: true
      });
    }
  },
  _mouseMove: function _mouseMove(e) {
    e.preventDefault();

    this._handleMove(e, e.clientX, e.clientY);
  },
  _touchMove: function _touchMove(e) {
    this.swipeOnTouchMove(e);

    this._handleMove(e, e.touches[0].clientX, e.touches[0].clientY);
  },
  _handleMove: function _handleMove(event, currentX, currentY) {
    if (this.state.mouseDrag) {
      var _this$state4 = this.state,
          startX = _this$state4.startX,
          startY = _this$state4.startY;
      event.target.parentElement.scrollTop += startY - currentY;
      event.target.parentElement.scrollLeft += startX - currentX;
      this.setState({
        startX: currentX,
        startY: currentY
      });
    }
  },
  _mouseUp: function _mouseUp(e) {
    e.preventDefault();

    if (this.state.mouseDrag) {
      this.setState({
        mouseDrag: false
      });
    }
  },
  _touchEnd: function _touchEnd(e) {
    this.swipeOnTouchEnd(e);

    if (this.state.mouseDrag) {
      this.setState({
        mouseDrag: false
      });
    } else if (this.isSwipedRightLong() && this.getSwipeLength() > 69) {
      this._previousImage();
    } else if (this.isSwipedLeftLong() && this.getSwipeLength() > 69) {
      this._nextImage();
    }
  },
  _keyPress: function _keyPress(event) {
    if (event.code === "ArrowLeft") {
      this._previousImage();
    } else if (event.code === "ArrowRight") {
      this._nextImage();
    } else if (event.code === "Escape") {
      this.props.closeModal();
    }
  },
  _setImageLoaded: function _setImageLoaded(index, imgEl) {
    var width = imgEl.naturalWidth;
    var height = imgEl.naturalHeight;
    this.setState(function (_ref) {
      var data = _ref.data;
      data = [].concat(_toConsumableArray(data.slice(0, index)), [_objectSpread({}, data[index], {
        width: width,
        height: height
      })], _toConsumableArray(data.slice(index + 1)));
      return {
        isLoaded: true,
        data: data
      };
    });
  },
  _setImageError: function _setImageError(index, e) {
    this.setState({
      isLoaded: true
    });
  },
  _getHeader: function _getHeader() {
    var _this$state5 = this.state,
        index = _this$state5.index,
        data = _this$state5.data;

    var allowZoom = this._allowZoom();

    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Div, {
      className: this.getClassName().header
    }, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Text, {
      className: this.state.blackBackground ? this.getClassName().counterWhite : this.getClassName().counterGray
    }, data.length > 1 ? index + 1 + "/" + data.length : null), uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Span, {
      style: {
        marginLeft: "auto",
        marginRight: "10px"
      }
    }, allowZoom && uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Link, {
      onClick: this._toggleZoom,
      className: this.getClassName("noDecoration")
    }, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Icon, {
      icon: this.state.zoom ? "mdi-magnify-minus-outline" : "mdi-magnify-plus-outline",
      style: {
        marginRight: "6px"
      },
      className: this.state.blackBackground ? this.getClassName().controlWhite : this.getClassName().controlGray
    })), uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Link, {
      onClick: this._toggleBackground,
      className: this.getClassName("noDecoration")
    }, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Icon, {
      icon: "mdi-contrast-box",
      style: {
        marginRight: "12px"
      },
      className: this.state.blackBackground ? this.getClassName().controlWhite : this.getClassName().controlGray
    })), uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Link, {
      onClick: this.props.closeModal,
      className: this.getClassName("noDecoration")
    }, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Icon, {
      icon: "mdi-close",
      className: this.state.blackBackground ? this.getClassName().controlWhite : this.getClassName().controlGray
    }))));
  },
  _setMainImageRef: function _setMainImageRef(ref) {
    this._mainImage = ref;
    if (ref && this._mounted) this._checkImageLoaded();
  },
  _setBodyDivRef: function _setBodyDivRef(ref) {
    if (this._bodyContent) this._bodyContent.removeEventListener("wheel", this._mouseWheel, {
      passive: false
    });

    if (ref) {
      this._bodyContent = ref.findDOMNode();

      this._bodyContent.addEventListener("wheel", this._mouseWheel, {
        passive: false
      });
    } else {
      this._bodyContent = null;
    }
  },
  //@@viewOff:private
  //@@viewOn:render
  render: function render() {
    var _this2 = this;

    var _this$state6 = this.state,
        data = _this$state6.data,
        index = _this$state6.index;
    var current = data[index];
    var nextIndex = (index + 1) % data.length;
    var prevIndex = index === 0 ? data.length - 1 : index - 1;
    var props = this.getMainPropsToPass();
    props.style = props.style || {};
    props.style.background = this.state.blackBackground ? "black" : "white";
    var imageClassName = this.state.isLoaded ? undefined : this.getClassName("preloadImage");

    if (this.state.blackBackground) {
      imageClassName += " " + this.getClassName("white");
    } else {
      imageClassName += " " + this.getClassName("grey");
    }

    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Div, props, this._getHeader(false, false), uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Div, {
      id: "lightbox-body",
      className: this.getClassName().bodyContent,
      ref_: this._setBodyDivRef,
      mainAttrs: {
        onMouseMove: this._mouseMove,
        onMouseDown: this._mouseDown,
        onMouseUp: this._mouseUp,
        onTouchStart: this._touchStart,
        onTouchMove: this._touchMove,
        onTouchEnd: this._touchEnd
      }
    }, !this.state.zoom && this.state.data.length > 1 && uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Link, {
      onClick: this._previousImage,
      className: this.getClassName("noDecoration")
    }, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Icon, {
      className: this._getNavigationClassName(false),
      icon: "mdi-chevron-left"
    })), !this.state.zoom && uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Span, {
      className: this.getClassName().verticalAlign
    }), !this.state.isLoaded && uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Loading, {
      style: {
        display: "inline-block"
      }
    }), uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Image, {
      ref_: this._setMainImageRef,
      responsive: false,
      className: imageClassName,
      src: current.src,
      alt: current.alt,
      authenticate: current.authenticate,
      style: this.state.zoom ? {
        maxWidth: "none",
        cursor: "move"
      } : {
        maxWidth: "100%",
        maxHeight: "100%"
      },
      mainAttrs: {
        // TODO This is not entirely correct - "index" might be wrong if lightbox data changed during image load...
        onLoad: function onLoad(e) {
          return _this2._setImageLoaded(index, e.target);
        },
        onError: function onError(e) {
          return _this2._setImageError(index, e.target);
        }
      }
    }), !this.state.zoom && this.state.data.length > 1 && uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Link, {
      onClick: this._nextImage,
      className: this.getClassName("noDecoration")
    }, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Icon, {
      icon: "mdi-chevron-right",
      className: this._getNavigationClassName(true)
    })), nextIndex !== index && uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Image, {
      className: this.getClassName("preloadImage"),
      responsive: false,
      alt: data[nextIndex].alt,
      src: data[nextIndex].src,
      authenticate: data[nextIndex].authenticate
    }), prevIndex !== index && prevIndex !== nextIndex && uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Image, {
      className: this.getClassName("preloadImage"),
      responsive: false,
      src: data[prevIndex].src,
      alt: data[prevIndex].alt,
      authenticate: data[prevIndex].authenticate
    })));
  } //@@viewOff:render

});
/* harmony default export */ __webpack_exports__["default"] = (LightboxBody);

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(10);

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":false}

options.transform = transform
options.insertInto = function anonymous(
) {
return __webpack_require__(12)();
};

var update = __webpack_require__(13)(content, options);

if(content.locals) module.exports = content.locals;



/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(11)(false);
// Module
exports.push([module.i, ".uu5-imaging-lightbox-body {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.uu5-imaging-lightbox-body-preload-image {\n  width: 1px;\n  height: 1px;\n  position: absolute;\n  top: -10px;\n  left: -10px;\n  opacity: 0;\n  pointer-events: none;\n}\n.uu5-imaging-lightbox-body-content {\n  text-align: center;\n  overflow: hidden;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n}\n.uu5-imaging-lightbox-body-vertical-align-helper {\n  display: inline-block;\n  height: 100%;\n  vertical-align: middle;\n}\n.uu5-imaging-lightbox-body-header {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 40px;\n  z-index: 1;\n  text-align: right;\n  font-size: 24px;\n  padding: 8px;\n  display: flex;\n  align-items: center;\n  background-image: linear-gradient(0deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.54) 100%);\n}\n.uu5-imaging-lightbox .uu5-bricks-modal-body {\n  padding: 0;\n}\n.uu5-imaging-lightbox .uu5-bricks-modal-dialog {\n  margin: 0;\n  max-height: 100%;\n  height: 100%;\n  width: 100%;\n}\n.uu5-imaging-lightbox-body-navigation-arrow {\n  background: transparent;\n  width: 48px;\n  height: 48px;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  align-items: center;\n  font-size: 48px;\n  color: #ffffff;\n  text-shadow: 0 1px 4px rgba(0, 0, 0, 0.87);\n}\n.uu5-imaging-lightbox-body-navigation-arrow-right {\n  margin: auto 0 auto auto;\n}\n.uu5-imaging-lightbox-body-navigation-arrow-left {\n  margin: auto auto auto 0;\n}\n.uu5-imaging-lightbox-body-white-color {\n  color: #ffffff;\n}\n.uu5-imaging-lightbox-body-white-color:hover {\n  color: gray;\n}\n.uu5-imaging-lightbox-body-gray-color {\n  color: gray;\n}\n.uu5-imaging-lightbox-body-gray-color:hover {\n  color: #ffffff;\n}\n.uu5-imaging-lightbox-body-counter-white {\n  display: inline;\n  vertical-align: middle;\n  padding-left: 16px;\n  font-size: 14px;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.87);\n  color: #ffffff;\n}\n.uu5-imaging-lightbox-body-counter-gray {\n  display: inline;\n  vertical-align: middle;\n  padding-left: 16px;\n  font-size: 14px;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.87);\n  color: gray;\n}\n.uu5-imaging-lightbox-body-control-white {\n  font-size: 20px;\n  line-height: 20px;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.87);\n  color: #ffffff;\n}\n.uu5-imaging-lightbox-body-control-white:hover {\n  color: gray;\n}\n.uu5-imaging-lightbox-body-control-gray {\n  font-size: 20px;\n  line-height: 20px;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.87);\n  color: gray;\n}\n.uu5-imaging-lightbox-body-control-gray:hover {\n  color: #ffffff;\n}\na.uu5-imaging-lightbox-body-nodecoration:hover {\n  text-decoration: none;\n}\n", ""]);



/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
module.exports = function (useSourceMap) {
  var list = []; // return the list of modules as css string

  list.toString = function toString() {
    return this.map(function (item) {
      var content = cssWithMappingToString(item, useSourceMap);

      if (item[2]) {
        return '@media ' + item[2] + '{' + content + '}';
      } else {
        return content;
      }
    }).join('');
  }; // import a list of modules into the list


  list.i = function (modules, mediaQuery) {
    if (typeof modules === 'string') {
      modules = [[null, modules, '']];
    }

    var alreadyImportedModules = {};

    for (var i = 0; i < this.length; i++) {
      var id = this[i][0];

      if (id != null) {
        alreadyImportedModules[id] = true;
      }
    }

    for (i = 0; i < modules.length; i++) {
      var item = modules[i]; // skip already imported module
      // this implementation is not 100% perfect for weird media query combinations
      // when a module is imported multiple times with different media queries.
      // I hope this will never occur (Hey this way we have smaller bundles)

      if (item[0] == null || !alreadyImportedModules[item[0]]) {
        if (mediaQuery && !item[2]) {
          item[2] = mediaQuery;
        } else if (mediaQuery) {
          item[2] = '(' + item[2] + ') and (' + mediaQuery + ')';
        }

        list.push(item);
      }
    }
  };

  return list;
};

function cssWithMappingToString(item, useSourceMap) {
  var content = item[1] || '';
  var cssMapping = item[3];

  if (!cssMapping) {
    return content;
  }

  if (useSourceMap && typeof btoa === 'function') {
    var sourceMapping = toComment(cssMapping);
    var sourceURLs = cssMapping.sources.map(function (source) {
      return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */';
    });
    return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
  }

  return [content].join('\n');
} // Adapted from convert-source-map (MIT)


function toComment(sourceMap) {
  // eslint-disable-next-line no-undef
  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
  var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;
  return '/*# ' + data + ' */';
}

/***/ }),
/* 12 */
/***/ (function(module, exports) {

function insert(styleEl) {
  var insertionEl = document.head || document.body;
  styleEl.setAttribute("data-owner", "uu5imagingg01/uu5imagingg01@1.7.0");
  styleEl.setAttribute("data-emotion", "uu-imaging");
  styleEl.setAttribute("data-tech", "less"); // insert the style element
  // 1. after last matching data-emotion using technology "less"

  var els = insertionEl.querySelectorAll("style[data-emotion=\"uu-imaging\"]");

  for (var i = els.length - 1; i >= 0; i--) {
    var _el = els[i];

    if (_el.getAttribute("data-tech") === "less") {
      _el.parentNode.insertBefore(styleEl, _el.nextSibling);

      return;
    }
  } // 2. before first matching data-emotion using technology "emotion"


  for (var _i = 0; _i < els.length; _i++) {
    var _el2 = els[_i];

    if (_el2.getAttribute("data-tech") !== "less") {
      _el2.parentNode.insertBefore(styleEl, _el2);

      return;
    }
  } // 3. before element with data-uu-app-styles-insert-before attribute


  var el = document.querySelector("[data-uu-app-styles-insert-before]");

  if (el) {
    el.parentNode.insertBefore(styleEl, el);
    return;
  } // 4. at the end of <head> or <body>


  insertionEl.appendChild(styleEl);
}

var PSEUDO_ELEMENT = {
  appendChild: insert,
  insertBefore: insert,
  insertAfter: insert
};

module.exports = function insertInto() {
  return PSEUDO_ELEMENT;
};

/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/

var stylesInDom = {};

var	memoize = function (fn) {
	var memo;

	return function () {
		if (typeof memo === "undefined") memo = fn.apply(this, arguments);
		return memo;
	};
};

var isOldIE = memoize(function () {
	// Test for IE <= 9 as proposed by Browserhacks
	// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
	// Tests for existence of standard globals is to allow style-loader
	// to operate correctly into non-standard environments
	// @see https://github.com/webpack-contrib/style-loader/issues/177
	return window && document && document.all && !window.atob;
});

var getTarget = function (target, parent) {
  if (parent){
    return parent.querySelector(target);
  }
  return document.querySelector(target);
};

var getElement = (function (fn) {
	var memo = {};

	return function(target, parent) {
                // If passing function in options, then use it for resolve "head" element.
                // Useful for Shadow Root style i.e
                // {
                //   insertInto: function () { return document.querySelector("#foo").shadowRoot }
                // }
                if (typeof target === 'function') {
                        return target();
                }
                if (typeof memo[target] === "undefined") {
			var styleTarget = getTarget.call(this, target, parent);
			// Special case to return head of iframe instead of iframe itself
			if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
				try {
					// This will throw an exception if access to iframe is blocked
					// due to cross-origin restrictions
					styleTarget = styleTarget.contentDocument.head;
				} catch(e) {
					styleTarget = null;
				}
			}
			memo[target] = styleTarget;
		}
		return memo[target]
	};
})();

var singleton = null;
var	singletonCounter = 0;
var	stylesInsertedAtTop = [];

var	fixUrls = __webpack_require__(14);

module.exports = function(list, options) {
	if (typeof DEBUG !== "undefined" && DEBUG) {
		if (typeof document !== "object") throw new Error("The style-loader cannot be used in a non-browser environment");
	}

	options = options || {};

	options.attrs = typeof options.attrs === "object" ? options.attrs : {};

	// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
	// tags it will allow on a page
	if (!options.singleton && typeof options.singleton !== "boolean") options.singleton = isOldIE();

	// By default, add <style> tags to the <head> element
        if (!options.insertInto) options.insertInto = "head";

	// By default, add <style> tags to the bottom of the target
	if (!options.insertAt) options.insertAt = "bottom";

	var styles = listToStyles(list, options);

	addStylesToDom(styles, options);

	return function update (newList) {
		var mayRemove = [];

		for (var i = 0; i < styles.length; i++) {
			var item = styles[i];
			var domStyle = stylesInDom[item.id];

			domStyle.refs--;
			mayRemove.push(domStyle);
		}

		if(newList) {
			var newStyles = listToStyles(newList, options);
			addStylesToDom(newStyles, options);
		}

		for (var i = 0; i < mayRemove.length; i++) {
			var domStyle = mayRemove[i];

			if(domStyle.refs === 0) {
				for (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();

				delete stylesInDom[domStyle.id];
			}
		}
	};
};

function addStylesToDom (styles, options) {
	for (var i = 0; i < styles.length; i++) {
		var item = styles[i];
		var domStyle = stylesInDom[item.id];

		if(domStyle) {
			domStyle.refs++;

			for(var j = 0; j < domStyle.parts.length; j++) {
				domStyle.parts[j](item.parts[j]);
			}

			for(; j < item.parts.length; j++) {
				domStyle.parts.push(addStyle(item.parts[j], options));
			}
		} else {
			var parts = [];

			for(var j = 0; j < item.parts.length; j++) {
				parts.push(addStyle(item.parts[j], options));
			}

			stylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};
		}
	}
}

function listToStyles (list, options) {
	var styles = [];
	var newStyles = {};

	for (var i = 0; i < list.length; i++) {
		var item = list[i];
		var id = options.base ? item[0] + options.base : item[0];
		var css = item[1];
		var media = item[2];
		var sourceMap = item[3];
		var part = {css: css, media: media, sourceMap: sourceMap};

		if(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});
		else newStyles[id].parts.push(part);
	}

	return styles;
}

function insertStyleElement (options, style) {
	var target = getElement(options.insertInto)

	if (!target) {
		throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");
	}

	var lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];

	if (options.insertAt === "top") {
		if (!lastStyleElementInsertedAtTop) {
			target.insertBefore(style, target.firstChild);
		} else if (lastStyleElementInsertedAtTop.nextSibling) {
			target.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);
		} else {
			target.appendChild(style);
		}
		stylesInsertedAtTop.push(style);
	} else if (options.insertAt === "bottom") {
		target.appendChild(style);
	} else if (typeof options.insertAt === "object" && options.insertAt.before) {
		var nextSibling = getElement(options.insertAt.before, target);
		target.insertBefore(style, nextSibling);
	} else {
		throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");
	}
}

function removeStyleElement (style) {
	if (style.parentNode === null) return false;
	style.parentNode.removeChild(style);

	var idx = stylesInsertedAtTop.indexOf(style);
	if(idx >= 0) {
		stylesInsertedAtTop.splice(idx, 1);
	}
}

function createStyleElement (options) {
	var style = document.createElement("style");

	if(options.attrs.type === undefined) {
		options.attrs.type = "text/css";
	}

	if(options.attrs.nonce === undefined) {
		var nonce = getNonce();
		if (nonce) {
			options.attrs.nonce = nonce;
		}
	}

	addAttrs(style, options.attrs);
	insertStyleElement(options, style);

	return style;
}

function createLinkElement (options) {
	var link = document.createElement("link");

	if(options.attrs.type === undefined) {
		options.attrs.type = "text/css";
	}
	options.attrs.rel = "stylesheet";

	addAttrs(link, options.attrs);
	insertStyleElement(options, link);

	return link;
}

function addAttrs (el, attrs) {
	Object.keys(attrs).forEach(function (key) {
		el.setAttribute(key, attrs[key]);
	});
}

function getNonce() {
	if (false) {}

	return __webpack_require__.nc;
}

function addStyle (obj, options) {
	var style, update, remove, result;

	// If a transform function was defined, run it on the css
	if (options.transform && obj.css) {
	    result = typeof options.transform === 'function'
		 ? options.transform(obj.css) 
		 : options.transform.default(obj.css);

	    if (result) {
	    	// If transform returns a value, use that instead of the original css.
	    	// This allows running runtime transformations on the css.
	    	obj.css = result;
	    } else {
	    	// If the transform function returns a falsy value, don't add this css.
	    	// This allows conditional loading of css
	    	return function() {
	    		// noop
	    	};
	    }
	}

	if (options.singleton) {
		var styleIndex = singletonCounter++;

		style = singleton || (singleton = createStyleElement(options));

		update = applyToSingletonTag.bind(null, style, styleIndex, false);
		remove = applyToSingletonTag.bind(null, style, styleIndex, true);

	} else if (
		obj.sourceMap &&
		typeof URL === "function" &&
		typeof URL.createObjectURL === "function" &&
		typeof URL.revokeObjectURL === "function" &&
		typeof Blob === "function" &&
		typeof btoa === "function"
	) {
		style = createLinkElement(options);
		update = updateLink.bind(null, style, options);
		remove = function () {
			removeStyleElement(style);

			if(style.href) URL.revokeObjectURL(style.href);
		};
	} else {
		style = createStyleElement(options);
		update = applyToTag.bind(null, style);
		remove = function () {
			removeStyleElement(style);
		};
	}

	update(obj);

	return function updateStyle (newObj) {
		if (newObj) {
			if (
				newObj.css === obj.css &&
				newObj.media === obj.media &&
				newObj.sourceMap === obj.sourceMap
			) {
				return;
			}

			update(obj = newObj);
		} else {
			remove();
		}
	};
}

var replaceText = (function () {
	var textStore = [];

	return function (index, replacement) {
		textStore[index] = replacement;

		return textStore.filter(Boolean).join('\n');
	};
})();

function applyToSingletonTag (style, index, remove, obj) {
	var css = remove ? "" : obj.css;

	if (style.styleSheet) {
		style.styleSheet.cssText = replaceText(index, css);
	} else {
		var cssNode = document.createTextNode(css);
		var childNodes = style.childNodes;

		if (childNodes[index]) style.removeChild(childNodes[index]);

		if (childNodes.length) {
			style.insertBefore(cssNode, childNodes[index]);
		} else {
			style.appendChild(cssNode);
		}
	}
}

function applyToTag (style, obj) {
	var css = obj.css;
	var media = obj.media;

	if(media) {
		style.setAttribute("media", media)
	}

	if(style.styleSheet) {
		style.styleSheet.cssText = css;
	} else {
		while(style.firstChild) {
			style.removeChild(style.firstChild);
		}

		style.appendChild(document.createTextNode(css));
	}
}

function updateLink (link, options, obj) {
	var css = obj.css;
	var sourceMap = obj.sourceMap;

	/*
		If convertToAbsoluteUrls isn't defined, but sourcemaps are enabled
		and there is no publicPath defined then lets turn convertToAbsoluteUrls
		on by default.  Otherwise default to the convertToAbsoluteUrls option
		directly
	*/
	var autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;

	if (options.convertToAbsoluteUrls || autoFixUrls) {
		css = fixUrls(css);
	}

	if (sourceMap) {
		// http://stackoverflow.com/a/26603875
		css += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + " */";
	}

	var blob = new Blob([css], { type: "text/css" });

	var oldSrc = link.href;

	link.href = URL.createObjectURL(blob);

	if(oldSrc) URL.revokeObjectURL(oldSrc);
}


/***/ }),
/* 14 */
/***/ (function(module, exports) {


/**
 * When source maps are enabled, `style-loader` uses a link element with a data-uri to
 * embed the css on the page. This breaks all relative urls because now they are relative to a
 * bundle instead of the current page.
 *
 * One solution is to only use full urls, but that may be impossible.
 *
 * Instead, this function "fixes" the relative urls to be absolute according to the current page location.
 *
 * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.
 *
 */

module.exports = function (css) {
  // get current location
  var location = typeof window !== "undefined" && window.location;

  if (!location) {
    throw new Error("fixUrls requires window.location");
  }

	// blank or null?
	if (!css || typeof css !== "string") {
	  return css;
  }

  var baseUrl = location.protocol + "//" + location.host;
  var currentDir = baseUrl + location.pathname.replace(/\/[^\/]*$/, "/");

	// convert each url(...)
	/*
	This regular expression is just a way to recursively match brackets within
	a string.

	 /url\s*\(  = Match on the word "url" with any whitespace after it and then a parens
	   (  = Start a capturing group
	     (?:  = Start a non-capturing group
	         [^)(]  = Match anything that isn't a parentheses
	         |  = OR
	         \(  = Match a start parentheses
	             (?:  = Start another non-capturing groups
	                 [^)(]+  = Match anything that isn't a parentheses
	                 |  = OR
	                 \(  = Match a start parentheses
	                     [^)(]*  = Match anything that isn't a parentheses
	                 \)  = Match a end parentheses
	             )  = End Group
              *\) = Match anything and then a close parens
          )  = Close non-capturing group
          *  = Match anything
       )  = Close capturing group
	 \)  = Match a close parens

	 /gi  = Get all matches, not the first.  Be case insensitive.
	 */
	var fixedCss = css.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi, function(fullMatch, origUrl) {
		// strip quotes (if they exist)
		var unquotedOrigUrl = origUrl
			.trim()
			.replace(/^"(.*)"$/, function(o, $1){ return $1; })
			.replace(/^'(.*)'$/, function(o, $1){ return $1; });

		// already a full url? no change
		if (/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(unquotedOrigUrl)) {
		  return fullMatch;
		}

		// convert the url to a full url
		var newUrl;

		if (unquotedOrigUrl.indexOf("//") === 0) {
		  	//TODO: should we add protocol?
			newUrl = unquotedOrigUrl;
		} else if (unquotedOrigUrl.indexOf("/") === 0) {
			// path should be relative to the base url
			newUrl = baseUrl + unquotedOrigUrl; // already starts with '/'
		} else {
			// path should be relative to current directory
			newUrl = currentDir + unquotedOrigUrl.replace(/^\.\//, ""); // Strip leading './'
		}

		// send back the fixed url(...)
		return "url(" + JSON.stringify(newUrl) + ")";
	});

	// send back the fixed css
	return fixedCss;
};


/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(16);

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":false}

options.transform = transform
options.insertInto = function anonymous(
) {
return __webpack_require__(12)();
};

var update = __webpack_require__(13)(content, options);

if(content.locals) module.exports = content.locals;



/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(11)(false);
// Module
exports.push([module.i, "", ""]);



/***/ }),
/* 17 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Image", function() { return Image; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(18);
/* harmony import */ var uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _image_less__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(19);
/* harmony import */ var _image_less__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_image_less__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lightbox_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(6);
/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(7);
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _templateObject() {
  var data = _taggedTemplateLiteral(["\n      && {\n        border-radius: ", ";\n      }\n  "]);

  _templateObject = function _templateObject() {
    return data;
  };

  return data;
}

function _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }






var Image = uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].VisualComponent.create({
  //@@viewOn:mixins
  mixins: [uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].BaseMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].ElementaryMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].PureRenderMixin],
  //@@viewOff:mixins
  //@@viewOn:statics
  statics: {
    tagName: _config_config_js__WEBPACK_IMPORTED_MODULE_4__["default"].TAG + "Image",
    classNames: {
      main: _config_config_js__WEBPACK_IMPORTED_MODULE_4__["default"].CSS + "image",
      effectCaption: _config_config_js__WEBPACK_IMPORTED_MODULE_4__["default"].CSS + "image-effect-caption",
      img: _config_config_js__WEBPACK_IMPORTED_MODULE_4__["default"].CSS + "image-img",
      landscape: _config_config_js__WEBPACK_IMPORTED_MODULE_4__["default"].CSS + "image-landscape",
      portrait: _config_config_js__WEBPACK_IMPORTED_MODULE_4__["default"].CSS + "image-portrait",
      effect: _config_config_js__WEBPACK_IMPORTED_MODULE_4__["default"].CSS + "image-effect-",
      shape: _config_config_js__WEBPACK_IMPORTED_MODULE_4__["default"].CSS + "image-shape-",
      fit: _config_config_js__WEBPACK_IMPORTED_MODULE_4__["default"].CSS + "image-fit-",
      originalDimensionsWidth: _config_config_js__WEBPACK_IMPORTED_MODULE_4__["default"].CSS + "image-original-dimensions-width",
      fitCoverNoScaleUpCenter: _config_config_js__WEBPACK_IMPORTED_MODULE_4__["default"].CSS + "image-fit-covernoscaleup-center",
      crop: _config_config_js__WEBPACK_IMPORTED_MODULE_4__["default"].CSS + "image-crop",
      loading: _config_config_js__WEBPACK_IMPORTED_MODULE_4__["default"].CSS + "image-loading",
      loadingAnimation: _config_config_js__WEBPACK_IMPORTED_MODULE_4__["default"].CSS + "image-loading-animation",
      fitWidth: _config_config_js__WEBPACK_IMPORTED_MODULE_4__["default"].CSS + "image-fit-width",
      autoWidth: _config_config_js__WEBPACK_IMPORTED_MODULE_4__["default"].CSS + "image-auto-width",
      autoHeight: _config_config_js__WEBPACK_IMPORTED_MODULE_4__["default"].CSS + "image-auto-height",
      focusWrapper: function focusWrapper(props) {
        return _config_config_js__WEBPACK_IMPORTED_MODULE_4__["default"].CSS + "image-focus-wrapper " + uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Css.css(_templateObject(), props.borderRadius);
      }
    },
    opt: {
      pureRender: true
    }
  },
  //@@viewOff:statics
  //@@viewOn:propTypes
  propTypes: {
    src: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string,
    loadingSrc: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string,
    thumb: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string,
    caption: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string,
    fit: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOf(["default", "coverNoScaleUp"]),
    effect: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOf(["none", "zoom", "grayscale", "blur", "sepia", "invert", "tilt", "morph"]),
    shape: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOf(["default", "rounded", "square", "roundedSquare", "circle", "rect", "rect4x3", "rect3x2", "rect5x4", "rect2x1", "rect3x1", "rect4x1", "rect45x10", "rect16x9", "rect16x10", "rect3x4", "rect4x5", "rect2x3", "rect1x2", "roundedRect", "roundedRect4x3", "roundedRect3x2", "roundedRect5x4", "roundedRect2x1", "roundedRect3x1", "roundedRect4x1", "roundedRect45x10", "roundedRect16x9", "roundedRect16x10", "roundedRect3x4", "roundedRect4x5", "roundedRect2x3", "roundedRect1x2"]),
    width: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number, uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string]),
    height: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number, uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string]),
    onClick: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].func,
    lightbox: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].bool, uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string]),
    authenticate: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].bool,
    alt: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string,
    originalDimensions: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].bool,
    aspectRatio: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string
  },
  //@@viewOff:propTypes
  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      src: "",
      loadingSrc: "",
      thumb: "",
      caption: "",
      fit: "default",
      effect: "none",
      shape: "default",
      width: null,
      height: null,
      onClick: null,
      lightbox: null,
      authenticate: false,
      alt: undefined,
      originalDimensions: false,
      aspectRatio: null
    };
  },
  //@@viewOff:getDefaultProps
  //@@viewOn:reactLifeCycle
  getInitialState: function getInitialState() {
    return {
      orientation: "default",
      loading: !!this.props.loadingSrc,
      imageWidth: 0,
      imageHeight: 0,
      originalWidth: 0,
      originalHeight: 0,
      aspectRatioWidth: 0,
      aspectRatioHeight: 0
    };
  },
  componentWillMount: function componentWillMount() {
    this._setOrientation(this.props);
  },
  componentWillUnmount: function componentWillUnmount() {
    uu5g04__WEBPACK_IMPORTED_MODULE_0__["Environment"].EventListener.removeWindowEvent("keyup", this.getId());
    this._lb && this._lb.removeImage(this.getId());
  },
  componentDidMount: function componentDidMount() {
    this._lb && this._lb.addImage(this.props.src, this.getId(), this.props.authenticate, this, this.props.alt, this.props.borderRadius);
  },
  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {
    if (nextProps.loadingSrc && this._getSrc(nextProps) !== this._getSrc(this.props)) {
      this.setState({
        loading: true
      });
    }

    if (nextProps.controlled) {
      this._setOrientation(nextProps);
    }

    if ((nextProps.id !== this.props.id || nextProps.src !== this.props.src) && this._lb) {
      this._lb.replaceImage(nextProps.src, this.getId());
    }
  },
  componentDidUpdate: function componentDidUpdate(prevProps, prevState) {
    if ((this.props.width !== prevProps.width || this.props.height !== prevProps.height || this.props.aspectRatio !== prevProps.aspectRatio) && this.props.aspectRatio || this.props.shape !== prevProps.shape || this.props.fit !== prevProps.fit || this.props.fit === "coverNoScaleUp" && (this.props.width !== prevProps.width || this.props.height !== prevProps.height)) {
      this._onLoad();
    }
  },
  //@@viewOff:reactLifeCycle
  //@@viewOn:interface
  //@@viewOff:interface
  //@@viewOn:overridingMethods
  //@@viewOff:overridingMethods
  //@@viewOn:componentSpecificHelpers
  _getDimension: function _getDimension() {
    var shape = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "default";
    var x = 1;
    var y = 1;
    var matcher = shape.match(/[Rr]ect(?:(\d+)x(\d+))?$/);

    if (matcher) {
      x = matcher[1] ? +matcher[1] : 4;
      y = matcher[2] ? +matcher[2] : 3;
    }

    return {
      x: x,
      y: y
    };
  },
  _getOrientation: function _getOrientation() {
    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;
    var orientation;
    var shape = props.shape || "default";

    if (/[Rr]ect/.test(shape)) {
      shape = "rect";
    }

    switch (shape) {
      case "square":
      case "roundedSquare":
      case "circle":
        {
          orientation = "landscape";
          break;
        }

      case "rect":
        {
          var s = this._getDimension(props.shape);

          if (this._img) {
            var image = this._img.findDOMNode();

            var img = {
              height: image.naturalHeight,
              width: image.naturalWidth
            };
            if (img.width === undefined || img.height === undefined) img = image.getBoundingClientRect();

            if (img.height / img.width >= s.y / s.x) {
              orientation = "portrait";
            } else {
              orientation = "landscape";
            }
          } else {
            orientation = s.x > s.y ? "landscape" : "portrait";
          }

          break;
        }

      default:
        {
          orientation = "default";
        }
    }

    return orientation;
  },
  _setOrientation: function _setOrientation(props) {
    this.setState({
      orientation: this._getOrientation(props)
    });
  },
  _getShape: function _getShape() {
    var shape = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "default";
    var className = this.getClassName("shape") + shape.toLowerCase();

    if (["default", "rounded"].indexOf(shape) === -1) {
      className += " " + this.getClassName("crop");

      if (/^rounded/.test(shape)) {
        className += " " + this.getClassName("shape") + "rounded";
      }

      var matcher = shape.match(/Rect(\d+x\d+)?$/);

      if (matcher) {
        className += " " + this.getClassName("shape") + "rect" + (matcher[1] ? matcher[1] : "");
      }
    }

    return className;
  },
  _getEffect: function _getEffect() {
    var effect = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "default";
    return this.getClassName("effect") + effect;
  },
  _getFit: function _getFit() {
    var fit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "default";
    var className = ""; // fitting is available only when both sizes are known (or 1 size and shape)

    if (this.state.orientation !== "default" || this.props.width && this.props.height) {
      className = this.getClassName("fit") + fit.toLowerCase();
      if (fit === "coverNoScaleUp" && this.state.fitCoverNoScaleUpCenter !== false) className += " " + this.getClassName("fitCoverNoScaleUpCenter");
    }

    return className;
  },
  _getAspectRatioDimension: function _getAspectRatioDimension() {
    var aspectRatioValuesString = this.props.aspectRatio.split(/:|x|\//);
    var aspectRatioWidth = aspectRatioValuesString[0];
    var aspectRatioHeight = aspectRatioValuesString[1];
    var imageWidth = null;
    var imageHeight = null;

    if (this.props.width && !this.props.height) {
      imageWidth = parseInt(this.props.width);
      imageHeight = aspectRatioHeight / aspectRatioWidth * imageWidth;
    }

    if (this.props.height && !this.props.width) {
      imageHeight = parseInt(this.props.height);
      imageWidth = aspectRatioWidth / aspectRatioHeight * imageHeight;
    }

    this.setState({
      aspectRatioWidth: imageWidth,
      aspectRatioHeight: imageHeight
    });
  },
  _getFrameDiv: function _getFrameDiv(children) {
    var mainProps = this.getMainPropsToPass();

    if (this.props.width || this.props.height) {
      mainProps.style = mainProps.style || {};

      if (this.props.width) {
        mainProps.style.width = /\d+$/.test(this.props.width) ? this.props.width + "px" : this.props.width;
      }

      if (this.props.height) {
        mainProps.style.height = /\d+$/.test(this.props.height) ? this.props.height + "px" : this.props.height;
      }
    }

    mainProps.className += " " + this._getShape(this.props.shape) + " " + this._getEffect(this.props.effect);

    if (this.props.originalDimensions) {
      mainProps.className += " " + this.getClassName("originalDimensionsWidth");
    }

    if (this.props.height && !this.props.width) {
      mainProps.className += " " + this.getClassName("fitWidth");

      if (this.props.shape !== "default" && this.props.shape !== "rounded") {
        var ratio = this._getDimension(this.props.shape);

        var height = parseFloat(this.props.height);
        mainProps.style.width = height * (ratio.x / ratio.y) + "px";
      } else if (!this.state.loading && this.state.imageWidth && this.state.imageHeight) {
        var _height = parseFloat(this.props.height);

        mainProps.style.width = _height * (this.state.imageWidth / this.state.imageHeight) + "px";
      }
    }

    var loading = this.props.loadingSrc && this.state.loading && uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create("div", {
      className: this.getClassName("loadingAnimation")
    });

    if (!this.state.loading) {
      var mainAttrs = _objectSpread({}, mainProps.mainAttrs);

      mainAttrs.tabIndex = "0";
      mainAttrs.onFocus = this._onFocus;
      mainAttrs.onBlur = this._onBlur;
      mainProps.mainAttrs = mainAttrs;
    }

    return uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0__["Bricks"].Div, mainProps, loading, this.state.loading && this.props.loadingSrc && uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0__["Bricks"].Image, {
      authenticate: this.props.authenticate,
      key: "loading",
      src: this.props.loadingSrc,
      className: this._getImageClassName(),
      alt: this.props.alt,
      borderRadius: this.props.borderRadius
    }), children, this.props.effect === "blur" && uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0__["Bricks"].Div, {
      className: this.getClassName("effectCaption"),
      content: this.props.caption
    }), uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create("div", {
      className: this.getClassName("focusWrapper")
    }));
  },
  _getSrc: function _getSrc() {
    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;
    return props.thumb || props.src;
  },
  _getImageClassName: function _getImageClassName() {
    var className = this.getClassName("img");

    switch (this.state.orientation) {
      case "portrait":
        className += " " + this.getClassName("portrait");
        break;

      case "landscape":
        className += " " + this.getClassName("landscape");
        break;
    }

    className += " " + this._getFit(this.props.fit);

    if (this.props.height && !this.props.width) {
      className += " " + this.getClassName("autoWidth");
    } else {
      className += " " + this.getClassName("autoHeight");
    }

    return className;
  },
  _getImage: function _getImage() {
    var _this = this;

    var src = this._getSrc();

    var className = this.state.loading && this.props.loadingSrc ? this.getClassName("loading") : this._getImageClassName();
    var width = null;
    var height = null;

    if (this.props.aspectRatio) {
      width = this.state.aspectRatioWidth;
      height = this.state.aspectRatioHeight;
    }

    if (this.props.originalDimensions) {
      width = this.state.originalWidth;
      height = this.state.originalHeight;
    }

    return uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0__["Bricks"].Image, {
      name: this.getName(),
      src: src,
      alt: this.props.alt,
      borderRadius: this.props.borderRadius,
      ref_: function ref_(img) {
        return _this._img = img;
      },
      width: width,
      height: height,
      className: className,
      responsive: false,
      mainAttrs: {
        onLoad: this._onLoad,
        onError: this._onError
      },
      authenticate: this.props.authenticate
    });
  },
  _getThumbnail: function _getThumbnail() {
    var _this2 = this;

    return [uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0__["Bricks"].Link, {
      key: "1",
      onClick: this.props.onClick || this._showLightbox
    }, this._getImage()), uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create(_lightbox_js__WEBPACK_IMPORTED_MODULE_3__["default"], {
      key: "2",
      ref_: function ref_(lb) {
        return _this2._lb = lb;
      },
      name: this.props.lightbox === true ? "" : this.props.lightbox
    })];
  },
  _showLightbox: function _showLightbox() {
    this._lb.open(this.getId());
  },
  _onFocus: function _onFocus() {
    var _this3 = this;

    uu5g04__WEBPACK_IMPORTED_MODULE_0__["Environment"].EventListener.addWindowEvent("keyup", this.getId(), function (e) {
      var isEnter = e.which === 13;
      isEnter && !_this3.isDisabled() && _this3._showLightbox();
    });
  },
  _onBlur: function _onBlur() {
    uu5g04__WEBPACK_IMPORTED_MODULE_0__["Environment"].EventListener.removeWindowEvent("keyup", this.getId());
  },
  _onLoad: function _onLoad(e) {
    var newState = {
      loading: false
    };

    if (e) {
      newState.imageWidth = e.target.naturalWidth;
      newState.imageHeight = e.target.naturalHeight;
      this.setState({
        originalWidth: e.target.naturalWidth
      });
      this.setState({
        originalHeight: e.target.naturalHeight
      });
    }

    var imageWidth = newState.imageWidth || this.state.imageWidth;
    var imageHeight = newState.imageHeight || this.state.imageHeight;

    if (this.props.aspectRatio) {
      this._getAspectRatioDimension();
    }

    if (this.state.orientation !== "default") {
      newState.orientation = this._getOrientation();
    }

    if (this.props.fit === "coverNoScaleUp") {
      var compEl = uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].DOM.findNode();
      var compWidth = compEl ? compEl.getBoundingClientRect().width : parseFloat(this.props.width);
      var compHeight = compEl ? compEl.getBoundingClientRect().height : parseFloat(this.props.height);
      newState.fitCoverNoScaleUpCenter = imageWidth < compWidth || imageHeight < compHeight;
    }

    this.setState(newState);
  },
  _onError: function _onError(e) {
    this.setState({
      loading: false
    });
  },
  //@@viewOff:private
  //@@viewOn:render
  render: function render() {
    return this._getFrameDiv(this.props.lightbox !== false ? this._getThumbnail() : uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0__["Bricks"].Span, null, this._getImage()));
  } //@@viewOff:render

});
/* harmony default export */ __webpack_exports__["default"] = (Image);

/***/ }),
/* 18 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE__18__;

/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(20);

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":false}

options.transform = transform
options.insertInto = function anonymous(
) {
return __webpack_require__(12)();
};

var update = __webpack_require__(13)(content, options);

if(content.locals) module.exports = content.locals;



/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(11)(false);
// Module
exports.push([module.i, ".uu5-imaging-image {\n  overflow: hidden;\n  position: relative;\n  width: 100%;\n  display: inline-block;\n  transform: translate3d(0, 0, 0);\n  outline: none;\n}\n.uu5-imaging-image.uu5-imaging-image-fit-width {\n  width: auto;\n}\n.uu5-imaging-image:focus .uu5-imaging-image-focus-wrapper {\n  outline: none;\n  box-shadow: inset 0 0 0 2px #a6c8ff;\n  padding: 2px;\n}\n.uu5-imaging-image-original-dimensions-width {\n  width: auto;\n}\n.uu5-imaging-image-focus-wrapper {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  pointer-events: none;\n}\n.uu5-imaging-image-crop:before {\n  content: \"\";\n  display: block;\n  float: left;\n  padding-top: 100%;\n}\n.uu5-imaging-image-shape-rect:before,\n.uu5-imaging-image-shape-rect4x3:before {\n  content: \"\";\n  display: block;\n  float: left;\n  padding-top: 75%;\n}\n.uu5-imaging-image-shape-rect3x2:before {\n  content: \"\";\n  display: block;\n  float: left;\n  padding-top: 66.66%;\n}\n.uu5-imaging-image-shape-rect5x4:before {\n  content: \"\";\n  display: block;\n  float: left;\n  padding-top: 80%;\n}\n.uu5-imaging-image-shape-rect2x1:before {\n  content: \"\";\n  display: block;\n  float: left;\n  padding-top: 50%;\n}\n.uu5-imaging-image-shape-rect3x1:before {\n  content: \"\";\n  display: block;\n  float: left;\n  padding-top: 33.33%;\n}\n.uu5-imaging-image-shape-rect4x1:before {\n  content: \"\";\n  display: block;\n  float: left;\n  padding-top: 25%;\n}\n.uu5-imaging-image-shape-rect45x10:before {\n  content: \"\";\n  display: block;\n  float: left;\n  padding-top: 22.22%;\n}\n.uu5-imaging-image-shape-rect16x9:before {\n  content: \"\";\n  display: block;\n  float: left;\n  padding-top: 56.25%;\n}\n.uu5-imaging-image-shape-rect16x10:before {\n  content: \"\";\n  display: block;\n  float: left;\n  padding-top: 62.5%;\n}\n.uu5-imaging-image-shape-rect3x4:before {\n  content: \"\";\n  display: block;\n  float: left;\n  padding-top: 133.33%;\n}\n.uu5-imaging-image-shape-rect4x5:before {\n  content: \"\";\n  display: block;\n  float: left;\n  padding-top: 125%;\n}\n.uu5-imaging-image-shape-rect2x3:before {\n  content: \"\";\n  display: block;\n  float: left;\n  padding-top: 150%;\n}\n.uu5-imaging-image-shape-rect1x2:before {\n  content: \"\";\n  display: block;\n  float: left;\n  padding-top: 200%;\n}\n.uu5-imaging-image-img {\n  position: relative;\n  display: block;\n}\n.uu5-imaging-image-auto-width {\n  height: 100%;\n  width: auto;\n}\n.uu5-imaging-image-auto-height {\n  width: 100%;\n  height: auto;\n}\n.uu5-imaging-image-landscape,\n.uu5-imaging-image-portrait {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n}\n.uu5-imaging-image-landscape {\n  height: 100%;\n  width: auto;\n}\n.uu5-imaging-image-portrait {\n  width: 100%;\n  height: auto;\n}\n.uu5-imaging-image-fit-covernoscaleup {\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  object-fit: cover;\n  transform: none;\n}\n.uu5-imaging-image-fit-covernoscaleup-center {\n  object-fit: none;\n}\n.uu5-imaging-image-shape-rounded {\n  border-radius: 1em;\n}\n.uu5-imaging-image-shape-circle {\n  border-radius: 50%;\n}\n.uu5-imaging-image-effect-zoom .uu5-imaging-image-img {\n  transition: all 0.2s ease;\n}\n.uu5-imaging-image-effect-grayscale .uu5-imaging-image-img:hover {\n  transition: all 0.5s ease;\n  filter: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id='grayscale'><feColorMatrix type='matrix' values='0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0'/></filter></svg>#grayscale\");\n  /* Firefox 10+, Firefox on Android */\n  -webkit-filter: grayscale(100%);\n          filter: grayscale(100%);\n  -webkit-filter: gray;\n          filter: gray;\n  /* IE 6-9 */\n}\n.uu5-imaging-image-effect-grayscale .uu5-imaging-image-img {\n  -webkit-filter: none;\n          filter: none;\n}\n.uu5-imaging-image-effect-sepia .uu5-imaging-image-img:hover {\n  transition: all 0.5s ease;\n  -webkit-filter: sepia(100%);\n          filter: sepia(100%);\n}\n.uu5-imaging-image-effect-invert .uu5-imaging-image-img:hover {\n  transition: all 0.5s ease;\n}\n.uu5-imaging-image-effect-invert .uu5-imaging-image-img:hover {\n  -webkit-filter: invert(100%);\n          filter: invert(100%);\n}\n.uu5-imaging-image-effect-sepia .uu5-imaging-image-img {\n  -webkit-filter: none;\n          filter: none;\n}\n.uu5-imaging-image-effect-blur .uu5-imaging-image-img {\n  transition: all 0.3s ease;\n}\n.uu5-imaging-image-effect-blur:hover .uu5-imaging-image-img {\n  -webkit-filter: blur(5px) brightness(120%);\n          filter: blur(5px) brightness(120%);\n}\n.uu5-imaging-image-effect-tilt {\n  transition: all 0.3s ease;\n}\n.uu5-imaging-image-effect-tilt:hover {\n  z-index: 100;\n  transform: rotate(-10deg);\n}\n.uu5-imaging-image-effect-morph {\n  transition: all 0.5s ease;\n  transform: rotate(0);\n}\n.uu5-imaging-image-effect-morph:hover {\n  border-radius: 50%;\n  transform: rotate(1turn);\n}\n.uu5-imaging-image-effect-morph:hover img {\n  border-radius: 50%;\n  transition: border-radius 0.5s ease;\n}\n.uu5-imaging-image-effect-blur .uu5-imaging-image-effect-caption {\n  transition: 0.5s ease;\n  opacity: 0;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n.uu5-imaging-image-effect-blur:hover .uu5-imaging-image-effect-caption {\n  opacity: 1;\n}\n.uu5-imaging-image-effect-zoom:hover .uu5-imaging-image-img {\n  transform: scale(1.15);\n}\n.uu5-imaging-image-effect-zoom:hover .uu5-imaging-image-img.uu5-imaging-image-landscape,\n.uu5-imaging-image-effect-zoom:hover .uu5-imaging-image-img.uu5-imaging-image-portrait {\n  transform: translate(-50%, -50%) scale(1.15);\n}\n.uu5-imaging-image-effect-zoom:hover .uu5-imaging-image-img.uu5-imaging-image-landscape.uu5-imaging-image-fit-covernoscaleup,\n.uu5-imaging-image-effect-zoom:hover .uu5-imaging-image-img.uu5-imaging-image-portrait.uu5-imaging-image-fit-covernoscaleup {\n  transform: scale(1.15);\n}\n.uu5-imaging-image-effect-zoom:hover.uu5-imaging-image-crop > .uu5-imaging-image-img {\n  position: absolute;\n}\n.uu5-imaging-image-effect-zoom:hover.uu5-imaging-image-crop > .uu5-imaging-image-landscape {\n  left: 0;\n  top: 0;\n}\n.uu5-imaging-image-effect-zoom:hover.uu5-imaging-image-crop > .uu5-imaging-image-portrait {\n  top: 0;\n  left: 0;\n}\n/* make target image invisible while it's being loaded and there's a loading animation */\n.uu5-imaging-image-loading {\n  width: 1px;\n  height: 1px;\n  position: absolute;\n  top: -1px;\n  left: -1px;\n  opacity: 0;\n}\n.uu5-imaging-image-loading-animation {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 1;\n  background: linear-gradient(100deg, rgba(255, 255, 255, 0) 30%, rgba(255, 255, 255, 0.7) 50%, rgba(255, 255, 255, 0) 70%, rgba(255, 255, 255, 0) 100%) no-repeat 0 0;\n  background-size: 80px 100%;\n  -webkit-animation: loading-image-animation 1.2s linear infinite;\n          animation: loading-image-animation 1.2s linear infinite;\n}\n@-webkit-keyframes loading-image-animation {\n  0% {\n    transform: translateX(-80px);\n  }\n  40% {\n    /* 0-40% is animation, rest (70%) is a delay before next animation iteration */\n    transform: translateX(100%);\n  }\n  100% {\n    transform: translateX(100%);\n  }\n}\n@keyframes loading-image-animation {\n  0% {\n    transform: translateX(-80px);\n  }\n  40% {\n    /* 0-40% is animation, rest (70%) is a delay before next animation iteration */\n    transform: translateX(100%);\n  }\n  100% {\n    transform: translateX(100%);\n  }\n}\n", ""]);



/***/ }),
/* 21 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ThumbnailList", function() { return ThumbnailList; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);
/* harmony import */ var _internal_thumbnail_list_body_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(22);
/* harmony import */ var _thumbnail_list_less__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(24);
/* harmony import */ var _thumbnail_list_less__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_thumbnail_list_less__WEBPACK_IMPORTED_MODULE_3__);
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }





var bodyProps = {
  data: true,
  effect: true,
  shape: true,
  thumbSuffix: true,
  lightbox: true,
  rowMaxHeight: true,
  rowMinHeight: true,
  lastRowMaxHeight: true,
  colWidth: true,
  alignment: true,
  rowWidth: true,
  session: true,
  authenticate: true,
  mode: true,
  path: true
};
var ThumbnailList = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.VisualComponent.create({
  //@@viewOn:mixins
  mixins: [uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.BaseMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.ElementaryMixin],
  //@@viewOff:mixins
  //@@viewOn:statics
  statics: {
    tagName: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].TAG + "ThumbnailList",
    classNames: {
      main: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "thumbnail-list",
      mode: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "thumbnail-list-mode-"
    }
  },
  //@@viewOff:statics
  //@@viewOn:propTypes
  propTypes: {
    data: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.any,
    authenticate: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.bool,
    mode: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string
  },
  //@@viewOff:propTypes
  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      data: [],
      authenticate: false,
      mode: "default"
    };
  },
  //@@viewOff:getDefaultProps
  //@@viewOn:reactLifeCycle
  //@@viewOff:reactLifeCycle
  //@@viewOn:interface
  //@@viewOff:interface
  //@@viewOn:overridingMethods
  //@@viewOff:overridingMethods
  //@@viewOn:private
  _renderResizeBody: function _renderResizeBody(_ref) {
    var width = _ref.width,
        height = _ref.height;

    if (width === 0 && height === 0) {
      // fix for Resize rendering without dimensions first
      return null;
    } else {
      return this._renderBody(width);
    }
  },
  _renderBody: function _renderBody() {
    var width = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;
    var data = this.props.data || [];
    var props = {};

    for (var propKey in bodyProps) {
      props[propKey] = this.props[propKey];
    }

    if (props.authenticate) {
      return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.SessionContext.Consumer, null, function (session) {
        return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_internal_thumbnail_list_body_js__WEBPACK_IMPORTED_MODULE_2__["default"], _extends({}, props, {
          rowWidth: width,
          data: data,
          session: session ? session.session : undefined
        }));
      });
    } else {
      return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_internal_thumbnail_list_body_js__WEBPACK_IMPORTED_MODULE_2__["default"], _extends({}, props, {
        data: data,
        rowWidth: width
      }));
    }
  },
  //@@viewOff:private
  //@@viewOn:render
  render: function render() {
    if (this.props.mode === "track") {
      return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Resize, this.getMainPropsToPass(), this._renderResizeBody);
    } else {
      return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Div, this.getMainPropsToPass(), this._renderBody());
    }
  } //@@viewOff:render

});
/* harmony default export */ __webpack_exports__["default"] = (ThumbnailList);

/***/ }),
/* 22 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ThumbnailListBody", function() { return ThumbnailListBody; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);
/* harmony import */ var _image_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(17);
/* harmony import */ var _tools_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(23);
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(n); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }





var ThumbnailListBody = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.VisualComponent.create({
  //@@viewOn:mixins
  mixins: [uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.BaseMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.ElementaryMixin],
  //@@viewOff:mixins
  //@@viewOn:statics
  statics: {
    tagName: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].TAG + "ThumbnailListBody",
    classNames: {
      main: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "thumbnail-list-body",
      mode: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "thumbnail-list-mode-" // not called thumbnail-list-body... for backward compatibility

    },
    defaults: {
      padding: 2
    },
    imageCache: {}
  },
  //@@viewOff:statics
  //@@viewOn:propTypes
  propTypes: {
    path: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string,
    data: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.arrayOf(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.shape({
      src: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string.isRequired,
      thumb: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string,
      alt: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string
    })])).isRequired,
    mode: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.oneOf(["default", "track"]),
    colWidth: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string,
    shape: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string,
    effect: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string,
    thumbSuffix: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string,
    lightbox: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.oneOf(["local", "global", "none"]),
    rowMaxHeight: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.number,
    rowMinHeight: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.number,
    lastRowMaxHeight: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.number,
    rowWidth: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.number,
    session: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.object
  },
  //@@viewOff:propTypes
  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      path: "",
      data: [],
      mode: "default",
      colWidth: "xs-6 s-3 m-2 l-1 xl-1",
      shape: undefined,
      effect: undefined,
      thumbSuffix: "_th",
      lightbox: "local",
      rowMaxHeight: 160,
      rowMinHeight: 100,
      lastRowMaxHeight: undefined,
      rowWidth: undefined,
      session: undefined
    };
  },
  //@@viewOff:getDefaultProps
  //@@viewOn:reactLifeCycle
  getInitialState: function getInitialState() {
    if (this.props.globalLightbox !== undefined) {
      uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Tools.warning('Property "globalLightbox" is deprecated! Use "globalLightbox" property instead.');
    }

    return {
      index: 0,
      imgList: [],
      boundingRect: null
    };
  },
  componentDidMount: function componentDidMount() {
    this.props.data.length > 0 && this._loadImages();
  },
  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {
    if (nextProps.controlled && !uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Tools.deepEqual(this.props.data, nextProps.data)) {
      if (nextProps.data.length) {
        this._loadImages(nextProps);
      } else {
        this.setState({
          imgList: []
        });
      }
    }
  },
  //@@viewOff:reactLifeCycle
  //@@viewOn:interface
  //@@viewOff:interface
  //@@viewOn:overridingMethods
  //@@viewOff:overridingMethods
  //@@viewOn:private
  _loadImages: function () {
    var _loadImages2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
      var props,
          imgList,
          dataChangeId,
          i,
          image,
          _args = arguments;
      return regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              props = _args.length > 0 && _args[0] !== undefined ? _args[0] : this.props;
              this._dataChangeId = Math.random();
              imgList = [];
              dataChangeId = this._dataChangeId;
              i = 0;

            case 5:
              if (!(i < props.data.length)) {
                _context.next = 15;
                break;
              }

              _context.next = 8;
              return this._loadImage(props.data[i], props.authenticate, props.session);

            case 8:
              image = _context.sent;

              if (!(dataChangeId !== this._dataChangeId)) {
                _context.next = 11;
                break;
              }

              return _context.abrupt("return");

            case 11:
              if (image) {
                imgList.push(image);
                this.setAsyncState({
                  imgList: imgList
                });
              }

            case 12:
              i++;
              _context.next = 5;
              break;

            case 15:
              this.setAsyncState({
                imgList: imgList
              });

            case 16:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, this);
    }));

    function _loadImages() {
      return _loadImages2.apply(this, arguments);
    }

    return _loadImages;
  }(),
  _loadImage: function _loadImage(imageData, authenticate, session) {
    var _this = this;

    if (typeof imageData === "string") {
      imageData = {
        src: imageData
      };
    }

    if (this.props.path) {
      imageData.src = this.props.path + imageData.src;

      if (imageData.thumb) {
        imageData.thumb = this.props.path + imageData.thumb;
      }
    }

    var thumbUrl = imageData.thumb || this._getThumbnail(imageData.src);

    var cacheMatch = this.constructor.imageCache[thumbUrl];
    var result;

    if (cacheMatch) {
      result = cacheMatch;
    } else {
      if (authenticate) {
        session = session || uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.getSession();

        if (session && session.isAuthenticated() && uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.isTrustedDomain(thumbUrl)) {
          var token = session.getCallToken().token;
          result = new Promise(function (resolve) {
            var result = _objectSpread({}, imageData);

            _tools_js__WEBPACK_IMPORTED_MODULE_3__["default"].fetchAuthenticatedImage(thumbUrl, token).then(function (data) {
              result.thumb = URL.createObjectURL(data.data);
              resolve(_this._getImageData(result, thumbUrl));
            }, function (err) {
              _tools_js__WEBPACK_IMPORTED_MODULE_3__["default"].fetchAuthenticatedImage(imageData.src, token).then(function (data) {
                result.thumb = URL.createObjectURL(data.data);
                resolve(_this._getImageData(result, imageData.src));
              }, function (err) {
                result.thumb = "data:image/gif;base64,ZZZZZZZZ"; // invalid image

                resolve(_this._getImageData(result, thumbUrl));
              });
            });
          });
        }
      }
    }

    if (!result) {
      result = this._getImageData(imageData, thumbUrl);
    }

    return result;
  },
  _getImageData: function _getImageData(imageData, cacheKey) {
    var _this2 = this;

    return new Promise(function (resolve) {
      var lightboxSrc;
      var thumb;

      if (imageData && _typeof(imageData) === "object") {
        lightboxSrc = imageData.src;
        thumb = imageData.thumb || imageData.lightboxSrc;
      } else {
        lightboxSrc = imageData;
      }

      thumb = thumb || _this2._getThumbnail(lightboxSrc);
      var img = new window.Image();
      var loadingThumbnail = true;

      img.onload = function () {
        var imgObj = {
          lightboxSrc: lightboxSrc,
          thumb: loadingThumbnail ? thumb : lightboxSrc,
          width: img.width,
          height: img.height,
          alt: imageData.alt || ""
        };
        _this2.constructor.imageCache[cacheKey] = imgObj;
        resolve(imgObj);
      };

      img.onerror = function () {
        if (loadingThumbnail) {
          loadingThumbnail = false;
          img.src = lightboxSrc;
          img.alt = imageData.alt || "";
          return;
        }

        resolve(null);
      };

      img.src = thumb;
    });
  },
  _getThumbnail: function _getThumbnail(name) {
    var thumbnail;
    var dotIndex = name.lastIndexOf(".");

    if (dotIndex !== -1) {
      var fileName = name.substr(0, dotIndex);
      var fileExtension = name.substr(dotIndex + 1);

      if (_tools_js__WEBPACK_IMPORTED_MODULE_3__["REGEXP"].fileExtension.test(fileExtension)) {
        thumbnail = fileName + this.props.thumbSuffix + "." + fileExtension;
      }
    }

    if (!thumbnail) {
      thumbnail = name + this.props.thumbSuffix;
    }

    return thumbnail;
  },
  _getLightbox: function _getLightbox() {
    if (this.props.lightbox === "global") {
      return null;
    } else if (this.props.lightbox === "none") {
      return false;
    } else if (this.props.globalLightbox === true) {
      // backward compatibility (deprecated prop)
      return null;
    } else {
      return this.getId();
    }
  },
  _getRowItems: function _getRowItems(data, width) {
    var separator = this.getDefault().padding * 2;
    width = width - (data.length - 1) * separator;
    var height = data.reduce(function (sum, x) {
      return sum + x.width * 1.0 / x.height;
    }, 0);
    return width / height;
  },
  _setHeight: function _setHeight(data, ln, height, aWidth) {
    var row = [];
    var width = aWidth;

    if (data.length === 1) {
      row.push({
        lightboxSrc: data[0].lightboxSrc,
        thumb: data[0].thumb,
        alt: data[0].alt,
        caption: data[0].caption,
        width: Math.min(width, height * data[0].width / data[0].height),
        height: height,
        column: 0,
        row: ln
      });
    } else {
      for (var i = 0; i < data.length; i++) {
        row.push({
          column: i,
          row: ln,
          lightboxSrc: data[i].lightboxSrc,
          thumb: data[i].thumb,
          caption: data[i].caption,
          alt: data[i].alt,
          width: height * data[i].width / data[i].height,
          height: height,
          left: i === 0 ? 0 : this.getDefault().padding,
          right: i === data.length - 1 ? 0 : this.getDefault().padding
        });
      }
    }

    return row;
  },
  _getTrackGrid: function _getTrackGrid(data, width, rowMaxHeight, rowMinHeight, lastRowMaxHeight) {
    // Algorithm for distributing images into rows is split into 1st pass and optional 2nd pass:
    // - 1st pass - we're trying to distribute images into width W:
    //   - take AS FEW of images so that they can be fit into width W while having same height and the height is <= rowMaxHeight
    //     (preserving their aspect ratio)
    //     => how to compute the height of used images while fitting them into width W:
    //       - choose height H0 arbitrarily; scale each of images individually (preserve aspect ratio) such that they all have the height H0
    //       - after scaling, sum up their widths (W0); W0=sum(H0*imageWidth/imageHeight)
    //       - now they all have height H0, their width sum is W0 and we want to fit them into width W, so scale all of them
    //         by W/W0 factor and find out their final height H; H = H0*W/W0 = H0*W/sum(H0*imageWidth/imageHeight) = W/sum(imageWidth/imageHeight)
    //       - and that is what _getRowItems(images, W) does (with addition of handling paddings between images)
    //   - we now have 1 row of images, we want them to be at least rowMinHeight high:
    //     - if they are not and it's just 1 image then let it be that way (its width/height aspect ratio is very big)
    //     - if they are not and it's more images then drop (unprocess) the last added one and recompute height - this will
    //       actually result in used images having height > rowMaxHeight (but that's ok - it's better than having tiny row)
    //   - continue the algorithm from the start using remaining images
    //   - if there're no remaining images and the row has height > rowMaxHeight then continue with 2nd pass; otherwise end (all rows are width-aligned)
    // - 2nd pass tries to distribute images from unaligned/too high last row into previous rows:
    //   1. start from last row, going backwards; images in last row are "extras"
    //   2. move all "extras" onto the end of previous row; this will make the previous row's height smaller
    //   3. if the row height >= rowMinHeight then end (all rows are now width-aligned)
    //   4. otherwise remove as few of images from the start of the row so that the remaining images in the row
    //      compute to height >= rowMinHeight (the row becomes higher by removing images); removed images will become new "extras"
    //   5. repeat from step 2 (if there's still a previous row), otherwise 2nd pass failed and continue with next step
    //   6. use rows as computed by 1st pass (last row height is now > rowMaxHeight)
    //      - if last row height < lastRowMaxHeight then use that height (last row will be width-aligned, though a bit higher than other rows)
    //      - otherwise use rowMaxHeight for the last row (last row won't be width-aligned)
    rowMaxHeight = rowMaxHeight || [160];
    rowMinHeight = rowMinHeight || 100;

    if (!Array.isArray(rowMaxHeight)) {
      rowMaxHeight = [rowMaxHeight];
    }

    var n = 0,
        ln = 0,
        out = [],
        row = [];

    while (n < data.length) {
      var mh = rowMaxHeight[ln % rowMaxHeight.length];
      var slice = false;
      var height = data[n].height;
      var previousHeight = 0;

      for (var i = n; i < data.length; i++) {
        var test = data.slice(n, i + 1);
        previousHeight = height;
        height = this._getRowItems(test, width);

        if (height < mh) {
          if (height < rowMinHeight && i > n) {
            test = data.slice(n, i); //i-1

            n = i;
            height = previousHeight;
          } else {
            n = i + 1;
          }

          row = this._setHeight(test, ln, height, width);
          out.push(row);
          slice = true;
          break;
        }
      }

      ln++;

      if (slice) {
        continue;
      }

      if (height > mh) {
        // last row is not fully aligned (it is too narrow)
        // => perform 2nd pass backwards trying to distribute images from last row
        // to previous ones so that the last row is fully aligned too
        var height1stPass = height;
        var n1stPass = n;

        var out1stPass = _toConsumableArray(out);

        var pending = data.slice(n);

        for (var _i = out.length - 1; _i >= 0 && pending.length > 0; _i--) {
          var rowLength = out[_i].length;
          n -= rowLength;

          var _test = data.slice(n, n + rowLength).concat(pending);

          var _height = void 0;

          pending = [];

          while ((_height = this._getRowItems(_test, width)) < rowMinHeight) {
            pending.push(_test.shift());
            if (_test.length <= 1) break;
          }

          out[_i] = this._setHeight(_test, _i, _height, width);
        }

        if (pending.length) {
          // it didn't work out => use the solution with narrow last row but try to widen it
          // yet without crossing lastRowMaxHeight height (and fall back to using narrow last row)
          out = out1stPass;
          var usedLastRowMaxHeight = typeof lastRowMaxHeight !== "number" ? 1.6 * mh : lastRowMaxHeight;

          var lastRow = this._setHeight(data.slice(n1stPass), ln, height1stPass <= usedLastRowMaxHeight ? height1stPass : mh, width);

          out.push(lastRow);
        }
      } else {
        // last row is fully aligned (sufficiently wide) => just add it
        row = this._setHeight(data.slice(n), ln, height, width);
        out.push(row);
      }

      break;
    }

    return out;
  },
  _getChildrenDefault: function _getChildrenDefault() {
    var _this3 = this;

    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Row, null, this.state.imgList.map(function (photo, i) {
      var colWidth = _this3.props.colWidth && _this3.props.colWidth.trim();

      return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Column, {
        colWidth: colWidth,
        key: i
      }, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_image_js__WEBPACK_IMPORTED_MODULE_2__["default"], {
        src: photo.lightboxSrc,
        thumb: photo.thumb,
        alt: photo.alt,
        caption: photo.caption,
        effect: _this3.props.effect,
        shape: _this3.props.shape,
        lightbox: _this3._getLightbox(),
        authenticate: _this3.props.authenticate
      }));
    }));
  },
  _getChildren: function _getChildren() {
    var children;

    switch (this.props.mode) {
      case "track":
        children = this._getChildrenTrack();
        break;

      default:
        children = this._getChildrenDefault();
    }

    return children || null;
  },
  _getChildrenTrack: function _getChildrenTrack() {
    var width = this.props.rowWidth;

    var rows = this._getTrackGrid(this.state.imgList, width, this.props.rowMaxHeight, this.props.rowMinHeight, this.props.lastRowMaxHeight);

    var result = [];

    for (var i = 0; i < rows.length; i++) {
      for (var j = 0; j < rows[i].length; j++) {
        var photo = rows[i][j];
        result.push(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Div, {
          key: i + "-" + j,
          className: this.getClassName("mode") + this.props.mode,
          style: {
            width: photo.width,
            height: photo.height,
            marginTop: i ? this.getDefault().padding : 0,
            marginBottom: i === rows.length - 1 ? 0 : this.getDefault().padding,
            marginLeft: photo.left,
            marginRight: photo.right
          }
        }, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_image_js__WEBPACK_IMPORTED_MODULE_2__["default"], {
          thumb: photo.thumb,
          src: photo.lightboxSrc,
          alt: photo.alt,
          caption: photo.caption,
          effect: this.props.effect,
          lightbox: this._getLightbox(),
          height: photo.height,
          authenticate: this.props.authenticate
        })));
      }
    }

    return result;
  },
  //@@viewOff:private
  //@@viewOn:render
  render: function render() {
    return this._getChildren();
  } //@@viewOff:render

});
/* harmony default export */ __webpack_exports__["default"] = (ThumbnailListBody);

/***/ }),
/* 23 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "REGEXP", function() { return REGEXP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tools", function() { return Tools; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);

var REGEXP = {
  fileExtension: /^[\w,\s-]+\.[A-Za-z]{3}$/
};
var Tools = {
  fetchAuthenticatedImage: function fetchAuthenticatedImage(imageURL, token) {
    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Request.get(imageURL, null, {
      headers: {
        Accept: "image/*,*/*;q=0.8",
        Authorization: token ? "Bearer " + token : undefined
      }
    });
  }
};
/* harmony default export */ __webpack_exports__["default"] = (Tools);

/***/ }),
/* 24 */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(25);

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":false}

options.transform = transform
options.insertInto = function anonymous(
) {
return __webpack_require__(12)();
};

var update = __webpack_require__(13)(content, options);

if(content.locals) module.exports = content.locals;



/***/ }),
/* 25 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(11)(false);
// Module
exports.push([module.i, ".uu5-imaging-thumbnail-list .uu5-bricks-column {\n  display: inline-block;\n  padding: 2px;\n  float: none;\n  vertical-align: top;\n}\n.uu5-imaging-thumbnail-list-mode-track {\n  vertical-align: top;\n  display: inline-block;\n  overflow: hidden;\n}\n", ""]);



/***/ }),
/* 26 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageRow", function() { return ImageRow; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);
/* harmony import */ var _internal_image_row_body_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(27);
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _templateObject() {
  var data = _taggedTemplateLiteral(["\n        display: flex;\n        ", "\n      "]);

  _templateObject = function _templateObject() {
    return data;
  };

  return data;
}

function _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }





function getAlignmentStyle(alignment) {
  if (alignment === "center") {
    return "justify-content: center;";
  } else if (alignment === "left") {
    return "justify-content: flex-start;";
  } else if (alignment === "right") {
    return "justify-content: flex-end;";
  } else {
    // block
    return "justify-content: space-between;";
  }
}

var bodyProps = {
  data: true,
  effect: true,
  thumbSuffix: true,
  lightbox: true,
  minHeight: true,
  maxHeight: true,
  alignment: true,
  rowWidth: true,
  session: true,
  authenticate: true
};
var ImageRow = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.VisualComponent.create({
  //@@viewOn:mixins
  mixins: [uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.BaseMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.ElementaryMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.NestingLevelMixin],
  //@@viewOff:mixins
  //@@viewOn:statics
  statics: {
    tagName: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].TAG + "ImageRow",
    nestingLevelList: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.getNestingLevelList("bigBoxCollection", "box"),
    classNames: {
      main: function main(props) {
        return _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "image-row" + " " + uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Css.css(_templateObject(), getAlignmentStyle(props.alignment));
      }
    },
    opt: {
      nestingLevelWrapper: true
    }
  },
  //@@viewOff:statics
  //@@viewOn:propTypes
  propTypes: {
    data: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.any,
    alignment: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string,
    authenticate: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.bool
  },
  //@@viewOff:propTypes
  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      data: null,
      alignment: "block",
      authenticate: false
    };
  },
  //@@viewOff:getDefaultProps
  //@@viewOn:reactLifeCycle
  //@@viewOff:reactLifeCycle
  //@@viewOn:interface
  //@@viewOff:interface
  //@@viewOn:overridingMethods
  //@@viewOff:overridingMethods
  //@@viewOn:private
  _renderBody: function _renderBody(_ref) {
    var width = _ref.width,
        height = _ref.height;

    if (width === 0 && height === 0) {
      // fix for Resize rendering without dimensions first
      return null;
    } else {
      var data = this.props.data || [];
      var props = {};

      for (var propKey in bodyProps) {
        props[propKey] = this.props[propKey];
      }

      if (props.authenticate) {
        return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.SessionContext.Consumer, null, function (session) {
          return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_internal_image_row_body_js__WEBPACK_IMPORTED_MODULE_2__["default"], _extends({}, props, {
            rowWidth: width,
            data: data,
            session: session ? session.session : undefined
          }));
        });
      } else {
        return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_internal_image_row_body_js__WEBPACK_IMPORTED_MODULE_2__["default"], _extends({}, props, {
          data: data,
          rowWidth: width
        }));
      }
    }
  },
  //@@viewOff:private
  //@@viewOn:render
  render: function render() {
    return this.getNestingLevel() ? uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Resize, this.getMainPropsToPass(), this._renderBody) : null;
  } //@@viewOff:render

});
/* harmony default export */ __webpack_exports__["default"] = (ImageRow);

/***/ }),
/* 27 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageRowBody", function() { return ImageRowBody; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);
/* harmony import */ var _image_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(17);
/* harmony import */ var _tools_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(23);
function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(n); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }






function getImageWrapperClassName(_ref) {
  var width = _ref.width,
      height = _ref.height;
  return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Css.css("\n    && {\n      width: ".concat(width, "px;\n      height: ").concat(height, "px;\n    }\n  "));
}

var ImageRowBody = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.VisualComponent.create({
  //@@viewOn:mixins
  mixins: [uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.BaseMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.ElementaryMixin],
  //@@viewOff:mixins
  //@@viewOn:statics
  statics: {
    tagName: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].TAG + "ImageRowBody",
    classNames: {
      main: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "image-row-body",
      imageWrapper: function imageWrapper() {
        return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Css.css("\n        & + & {\n          margin-left: 4px;\n        }\n      ");
      }
    },
    imageCache: {}
  },
  //@@viewOff:statics
  //@@viewOn:propTypes
  propTypes: {
    data: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.arrayOf(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.shape({
      src: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string.isRequired,
      thumb: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string,
      alt: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string
    })])).isRequired,
    effect: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string,
    thumbSuffix: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string,
    lightbox: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.oneOf(["local", "global", "none"]),
    authenticate: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.bool,
    minHeight: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.number, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string]),
    maxHeight: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.number, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string]),
    alignment: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string,
    rowWidth: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.number,
    session: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.object
  },
  //@@viewOff:propTypes
  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      data: null,
      effect: undefined,
      thumbSuffix: "_th",
      lightbox: "local",
      minHeight: 100,
      maxHeight: 160,
      alignment: "block",
      rowWidth: undefined,
      session: undefined,
      authenticate: false
    };
  },
  //@@viewOff:getDefaultProps
  //@@viewOn:reactLifeCycle
  getInitialState: function getInitialState() {
    return {
      imgList: []
    };
  },
  componentDidMount: function componentDidMount() {
    this._loadImages();
  },
  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {
    if (nextProps.controlled && !uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Tools.deepEqual(this.props.data, nextProps.data)) {
      if (nextProps.data.length) {
        this._loadImages(nextProps);
      } else {
        this.setState({
          imgList: []
        });
      }
    } else if (this.props.rowWidth !== nextProps.rowWidth || this.props.minHeight !== nextProps.minHeight || this.props.maxHeight !== nextProps.maxHeight) {
      // TODO FIX: if this gets called too quickly after the initial render, the images will probably be loaded again (if authenticated, a request will be sent twice)
      this._loadImages(nextProps);
    }
  },
  //@@viewOff:reactLifeCycle
  //@@viewOn:interface
  //@@viewOff:interface
  //@@viewOn:overridingMethods
  //@@viewOff:overridingMethods
  //@@viewOn:private
  _getRowItems: function _getRowItems(data, height, aWidth) {
    var row = [];
    var width = aWidth;

    if (data.length === 1) {
      row.push({
        lightboxSrc: data[0].lightboxSrc,
        thumb: data[0].thumb,
        alt: data[0].alt,
        caption: data[0].caption,
        width: Math.min(width, height * data[0].width / data[0].height),
        height: height,
        column: 0
      });
    } else {
      for (var i = 0; i < data.length; i++) {
        row.push({
          column: i,
          lightboxSrc: data[i].lightboxSrc,
          thumb: data[i].thumb,
          caption: data[i].caption,
          alt: data[i].alt,
          width: height * data[i].width / data[i].height,
          height: height,
          left: i === 0 ? 0 : 2,
          right: i === data.length - 1 ? 0 : 2
        });
      }
    }

    return row;
  },
  _getHeight: function _getHeight(data, width) {
    var separator = 2 * 2;
    width = width - (data.length - 1) * separator;
    var height = data.reduce(function (sum, x) {
      return sum + x.width * 1.0 / x.height;
    }, 0);
    return width / height;
  },
  _getRowImages: function _getRowImages(imgList, width, rowMaxHeight, rowMinHeight) {
    rowMaxHeight = rowMaxHeight || 160;
    rowMinHeight = rowMinHeight || 100;
    var rowItemsData = [[]];

    for (var adjustedImgIndex = 0; adjustedImgIndex < imgList.length; adjustedImgIndex++) {
      var testImgList = imgList.slice(0, adjustedImgIndex + 1);

      var height = this._getHeight(testImgList, width);

      if (height <= rowMaxHeight) {
        if (height < rowMinHeight && adjustedImgIndex > 0) {
          break;
        }

        rowItemsData = [testImgList, height, width];
      } else {
        height = Math.min(height, rowMaxHeight);
        rowItemsData = [testImgList, height, width];
      }
    }

    return this._getRowItems.apply(this, _toConsumableArray(rowItemsData));
  },
  _loadImages: function () {
    var _loadImages2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
      var props,
          imgList,
          dataChangeId,
          i,
          image,
          newImgList,
          _args = arguments;
      return regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              props = _args.length > 0 && _args[0] !== undefined ? _args[0] : this.props;
              this._dataChangeId = Math.random();
              imgList = [];
              dataChangeId = this._dataChangeId;
              i = 0;

            case 5:
              if (!(i < props.data.length)) {
                _context.next = 21;
                break;
              }

              _context.next = 8;
              return this._loadImage(props.data[i], props.authenticate, props.session);

            case 8:
              image = _context.sent;

              if (!(dataChangeId !== this._dataChangeId)) {
                _context.next = 11;
                break;
              }

              return _context.abrupt("return");

            case 11:
              if (!image) {
                _context.next = 18;
                break;
              }

              newImgList = this._getRowImages([].concat(_toConsumableArray(imgList), [image]), props.rowWidth, props.maxHeight, props.minHeight);

              if (!(newImgList.length === imgList.length)) {
                _context.next = 17;
                break;
              }

              return _context.abrupt("break", 21);

            case 17:
              imgList = newImgList;

            case 18:
              i++;
              _context.next = 5;
              break;

            case 21:
              this.setAsyncState({
                imgList: imgList
              });

            case 22:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, this);
    }));

    function _loadImages() {
      return _loadImages2.apply(this, arguments);
    }

    return _loadImages;
  }(),
  _loadImage: function _loadImage(imageData, authenticate, session) {
    var _this = this;

    if (typeof imageData === "string") {
      imageData = {
        src: imageData
      };
    }

    var thumbUrl = imageData.thumb || this._getThumbnail(imageData.src);

    var cacheMatch = this.constructor.imageCache[thumbUrl];
    var result;

    if (cacheMatch) {
      result = cacheMatch;
    } else {
      if (authenticate) {
        session = session || uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.getSession();

        if (session && session.isAuthenticated() && uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.isTrustedDomain(thumbUrl)) {
          var token = session.getCallToken().token;
          result = new Promise(function (resolve) {
            var result = _objectSpread({}, imageData);

            _tools_js__WEBPACK_IMPORTED_MODULE_3__["default"].fetchAuthenticatedImage(thumbUrl, token).then(function (data) {
              result.thumb = URL.createObjectURL(data.data);
              resolve(_this._getImageData(result, thumbUrl));
            }, function (err) {
              _tools_js__WEBPACK_IMPORTED_MODULE_3__["default"].fetchAuthenticatedImage(imageData.src, token).then(function (data) {
                result.thumb = URL.createObjectURL(data.data);
                resolve(_this._getImageData(result, imageData.src));
              }, function (err) {
                result.thumb = "data:image/gif;base64,ZZZZZZZZ"; // invalid image

                resolve(_this._getImageData(result, thumbUrl));
              });
            });
          });
        }
      }
    }

    if (!result) {
      result = this._getImageData(imageData, thumbUrl);
    }

    return result;
  },
  _getImageData: function _getImageData(imageData, cacheKey) {
    var _this2 = this;

    return new Promise(function (resolve) {
      var lightboxSrc;
      var thumb;

      if (imageData && _typeof(imageData) === "object") {
        lightboxSrc = imageData.src;
        thumb = imageData.thumb || imageData.lightboxSrc;
      } else {
        lightboxSrc = imageData;
      }

      thumb = thumb || _this2._getThumbnail(lightboxSrc);
      var img = new window.Image();
      var loadingThumbnail = true;

      img.onload = function () {
        var imgObj = {
          lightboxSrc: lightboxSrc,
          thumb: loadingThumbnail ? thumb : lightboxSrc,
          width: img.width,
          height: img.height,
          alt: imageData.alt || ""
        };
        _this2.constructor.imageCache[cacheKey] = imgObj;
        resolve(imgObj);
      };

      img.onerror = function () {
        if (loadingThumbnail) {
          loadingThumbnail = false;
          img.src = lightboxSrc;
          img.alt = imageData.alt || "";
          return;
        }

        resolve(null);
      };

      img.src = thumb;
    });
  },
  _getThumbnail: function _getThumbnail(name) {
    var thumbnail;
    var dotIndex = name.lastIndexOf(".");

    if (dotIndex !== -1) {
      var fileName = name.substr(0, dotIndex);
      var fileExtension = name.substr(dotIndex + 1);

      if (_tools_js__WEBPACK_IMPORTED_MODULE_3__["REGEXP"].fileExtension.test(fileExtension)) {
        thumbnail = fileName + this.props.thumbSuffix + "." + fileExtension;
      }
    }

    if (!thumbnail) {
      thumbnail = name + this.props.thumbSuffix;
    }

    return thumbnail;
  },
  _getLightbox: function _getLightbox() {
    if (this.props.lightbox === "global") {
      return null;
    } else if (this.props.lightbox === "none") {
      return false;
    } else {
      // this.props.lightbox === "local"
      return this.getId();
    }
  },
  _renderImages: function _renderImages() {
    var _this3 = this;

    return this.state.imgList.map(function (image, index) {
      return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_image_js__WEBPACK_IMPORTED_MODULE_2__["default"], {
        key: index,
        src: image.lightboxSrc,
        alt: image.alt,
        thumb: image.thumb,
        caption: image.caption,
        effect: _this3.props.effect,
        shape: _this3.props.shape,
        lightbox: _this3._getLightbox(),
        className: "".concat(getImageWrapperClassName(image), " ").concat(_this3.getClassName("imageWrapper")),
        authenticate: _this3.props.authenticate // width={image.width}
        // height={image.height}

      });
    });
  },
  //@@viewOff:private
  //@@viewOn:render
  render: function render() {
    return this._renderImages();
  } //@@viewOff:render

});
/* harmony default export */ __webpack_exports__["default"] = (ImageRowBody);

/***/ }),
/* 28 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageColumn", function() { return ImageColumn; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);
/* harmony import */ var _internal_image_column_body_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(29);
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _templateObject() {
  var data = _taggedTemplateLiteral(["\n        ", "\n        display: inline-flex;\n        flex-direction: column;\n        ", "\n      "]);

  _templateObject = function _templateObject() {
    return data;
  };

  return data;
}

function _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }




var bodyProps = {
  data: true,
  effect: true,
  thumbSuffix: true,
  lightbox: true,
  minWidth: true,
  maxWidth: true,
  height: true,
  alignment: true,
  rowWidth: true,
  session: true,
  authenticate: true
};

function getAlignmentStyle(alignment) {
  if (alignment === "center") {
    return "justify-content: center;";
  } else if (alignment === "top") {
    return "justify-content: flex-start;";
  } else if (alignment === "bottom") {
    return "justify-content: flex-end;";
  } else {
    // block
    return "justify-content: space-between;";
  }
}

var ImageColumn = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.VisualComponent.create({
  //@@viewOn:mixins
  mixins: [uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.BaseMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.ElementaryMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.NestingLevelMixin],
  //@@viewOff:mixins
  //@@viewOn:statics
  statics: {
    tagName: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].TAG + "ImageColumn",
    nestingLevelList: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.getNestingLevelList("bigBoxCollection", "box"),
    classNames: {
      main: function main(props) {
        return _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "image-column" + " " + uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Css.css(_templateObject(), props.height ? "height: ".concat(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Tools.fillUnit(props.height), ";") : "", getAlignmentStyle(props.alignment));
      }
    },
    opt: {
      nestingLevelWrapper: true
    }
  },
  //@@viewOff:statics
  //@@viewOn:propTypes
  propTypes: {
    data: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.any,
    alignment: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string,
    authenticate: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.bool
  },
  //@@viewOff:propTypes
  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      data: null,
      alignment: "block",
      authenticate: false
    };
  },
  //@@viewOff:getDefaultProps
  //@@viewOn:reactLifeCycle
  //@@viewOff:reactLifeCycle
  //@@viewOn:interface
  //@@viewOff:interface
  //@@viewOn:overridingMethods
  //@@viewOff:overridingMethods
  //@@viewOn:private
  _renderBody: function _renderBody() {
    var data = this.props.data || [];
    var props = {};

    for (var propKey in bodyProps) {
      props[propKey] = this.props[propKey];
    }

    if (props.authenticate) {
      return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.SessionContext.Consumer, null, function (session) {
        return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_internal_image_column_body_js__WEBPACK_IMPORTED_MODULE_2__["default"], _extends({}, props, {
          data: data,
          session: session ? session.session : undefined
        }));
      });
    } else {
      return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_internal_image_column_body_js__WEBPACK_IMPORTED_MODULE_2__["default"], _extends({}, props, {
        data: data
      }));
    }
  },
  //@@viewOff:private
  //@@viewOn:render
  render: function render() {
    return this.getNestingLevel() ? uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create("div", this.getMainAttrs(), this._renderBody()) : null;
  } //@@viewOff:render

});
/* harmony default export */ __webpack_exports__["default"] = (ImageColumn);

/***/ }),
/* 29 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageColumnBody", function() { return ImageColumnBody; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);
/* harmony import */ var _image_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(17);
/* harmony import */ var _tools_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(23);
function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(n); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }






function getImageWrapperClassName(_ref) {
  var width = _ref.width,
      height = _ref.height;
  return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Css.css("\n    && {\n      width: ".concat(width, "px;\n      height: ").concat(height, "px;\n    }\n  "));
}

var ImageColumnBody = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.VisualComponent.create({
  //@@viewOn:mixins
  mixins: [uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.BaseMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.ElementaryMixin],
  //@@viewOff:mixins
  //@@viewOn:statics
  statics: {
    tagName: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].TAG + "ImageColumnBody",
    classNames: {
      main: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "image-column-body",
      imageWrapper: function imageWrapper() {
        return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Css.css("\n        & + & {\n          margin-top: 4px;\n        }\n      ");
      }
    },
    imageCache: {}
  },
  //@@viewOff:statics
  //@@viewOn:propTypes
  propTypes: {
    data: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.arrayOf(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.shape({
      src: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string.isRequired,
      thumb: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string,
      alt: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string
    })])).isRequired,
    effect: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string,
    thumbSuffix: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string,
    lightbox: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.oneOf(["local", "global", "none"]),
    authenticate: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.bool,
    minWidth: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.number, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string]),
    maxWidth: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.number, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string]),
    alignment: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string,
    session: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.object
  },
  //@@viewOff:propTypes
  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      data: null,
      effect: undefined,
      thumbSuffix: "_th",
      lightbox: "local",
      minWidth: 100,
      maxWidth: 160,
      height: null,
      alignment: "block",
      session: undefined,
      authenticate: false
    };
  },
  //@@viewOff:getDefaultProps
  //@@viewOn:reactLifeCycle
  getInitialState: function getInitialState() {
    return {
      imgList: []
    };
  },
  componentDidMount: function componentDidMount() {
    this._loadImages();
  },
  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {
    if (nextProps.controlled && !uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Tools.deepEqual(this.props.data, nextProps.data)) {
      if (nextProps.data.length) {
        this._loadImages(nextProps);
      } else {
        this.setState({
          imgList: []
        });
      }
    } else if (this.props.height !== nextProps.height || this.props.minWidth !== nextProps.minWidth || this.props.maxWidth !== nextProps.maxWidth) {
      // TODO FIX: if this gets called too quickly after the initial render, the images will probably be loaded again (if authenticated, a request will be sent twice)
      this._loadImages(nextProps);
    }
  },
  //@@viewOff:reactLifeCycle
  //@@viewOn:interface
  //@@viewOff:interface
  //@@viewOn:overridingMethods
  //@@viewOff:overridingMethods
  //@@viewOn:private
  _getColItems: function _getColItems(data, width, aHeight) {
    var row = [];
    var height = aHeight;

    if (data.length === 1) {
      row.push({
        lightboxSrc: data[0].lightboxSrc,
        thumb: data[0].thumb,
        alt: data[0].alt,
        caption: data[0].caption,
        height: Math.min(height, width * data[0].height / data[0].width),
        width: width,
        column: 0
      });
    } else {
      for (var i = 0; i < data.length; i++) {
        row.push({
          column: i,
          lightboxSrc: data[i].lightboxSrc,
          thumb: data[i].thumb,
          alt: data[i].alt,
          caption: data[i].caption,
          height: width * data[i].height / data[i].width,
          width: width,
          left: i === 0 ? 0 : 2,
          right: i === data.length - 1 ? 0 : 2
        });
      }
    }

    return row;
  },
  _getWidth: function _getWidth(data, height) {
    var separator = 2 * 2;
    height = height - (data.length - 1) * separator;
    var width = data.reduce(function (sum, x) {
      return sum + x.height * 1.0 / x.width;
    }, 0);
    return height / width;
  },
  _getColImages: function _getColImages(imgList, height, rowMaxWidth, rowMinWidth) {
    rowMaxWidth = rowMaxWidth || 160;
    rowMinWidth = rowMinWidth || 100;
    var rowItemsData = [[]];

    if (height) {
      var imgIndex = 0;

      for (var adjustedImgIndex = imgIndex; adjustedImgIndex < imgList.length; adjustedImgIndex++) {
        var testImgList = imgList.slice(0, adjustedImgIndex + 1);

        var width = this._getWidth(testImgList, height);

        if (width <= rowMaxWidth) {
          if (width < rowMinWidth && adjustedImgIndex > imgIndex) {
            break;
          }

          rowItemsData = [testImgList, width, height];
        } else {
          width = Math.min(width, rowMaxWidth);
          rowItemsData = [testImgList, width, height];
        }
      }
    } else {
      rowItemsData = [imgList, rowMaxWidth, Infinity];
    }

    return this._getColItems.apply(this, _toConsumableArray(rowItemsData));
  },
  _loadImages: function () {
    var _loadImages2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
      var props,
          imgList,
          dataChangeId,
          i,
          image,
          newImgList,
          _args = arguments;
      return regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              props = _args.length > 0 && _args[0] !== undefined ? _args[0] : this.props;
              this._dataChangeId = Math.random();
              imgList = [];
              dataChangeId = this._dataChangeId;
              i = 0;

            case 5:
              if (!(i < props.data.length)) {
                _context.next = 21;
                break;
              }

              _context.next = 8;
              return this._loadImage(props.data[i], props.authenticate, props.session);

            case 8:
              image = _context.sent;

              if (!(dataChangeId !== this._dataChangeId)) {
                _context.next = 11;
                break;
              }

              return _context.abrupt("return");

            case 11:
              if (!image) {
                _context.next = 18;
                break;
              }

              newImgList = this._getColImages([].concat(_toConsumableArray(imgList), [image]), props.height, props.maxWidth, props.minWidth);

              if (!(newImgList.length === imgList.length)) {
                _context.next = 17;
                break;
              }

              return _context.abrupt("break", 21);

            case 17:
              imgList = newImgList;

            case 18:
              i++;
              _context.next = 5;
              break;

            case 21:
              this.setAsyncState({
                imgList: imgList
              });

            case 22:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, this);
    }));

    function _loadImages() {
      return _loadImages2.apply(this, arguments);
    }

    return _loadImages;
  }(),
  _loadImage: function _loadImage(imageData, authenticate, session) {
    var _this = this;

    if (typeof imageData === "string") {
      imageData = {
        src: imageData
      };
    }

    var thumbUrl = imageData.thumb || this._getThumbnail(imageData.src);

    var cacheMatch = this.constructor.imageCache[thumbUrl];
    var result;

    if (cacheMatch) {
      result = cacheMatch;
    } else {
      if (authenticate) {
        session = session || uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.getSession();

        if (session && session.isAuthenticated() && uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.isTrustedDomain(thumbUrl)) {
          var token = session.getCallToken().token;
          result = new Promise(function (resolve) {
            var result = _objectSpread({}, imageData);

            _tools_js__WEBPACK_IMPORTED_MODULE_3__["default"].fetchAuthenticatedImage(thumbUrl, token).then(function (data) {
              result.thumb = URL.createObjectURL(data.data);
              resolve(_this._getImageData(result, thumbUrl));
            }, function (err) {
              _tools_js__WEBPACK_IMPORTED_MODULE_3__["default"].fetchAuthenticatedImage(imageData.src, token).then(function (data) {
                result.thumb = URL.createObjectURL(data.data);
                resolve(_this._getImageData(result, imageData.src));
              }, function (err) {
                result.thumb = "data:image/gif;base64,ZZZZZZZZ"; // invalid image

                resolve(_this._getImageData(result, thumbUrl));
              });
            });
          });
        }
      }
    }

    if (!result) {
      result = this._getImageData(imageData, thumbUrl);
    }

    return result;
  },
  _getImageData: function _getImageData(imageData, cacheKey) {
    var _this2 = this;

    return new Promise(function (resolve) {
      var lightboxSrc;
      var thumb;

      if (imageData && _typeof(imageData) === "object") {
        lightboxSrc = imageData.src;
        thumb = imageData.thumb || imageData.lightboxSrc;
      } else {
        lightboxSrc = imageData;
      }

      thumb = thumb || _this2._getThumbnail(lightboxSrc);
      var img = new window.Image();
      var loadingThumbnail = true;

      img.onload = function () {
        var imgObj = {
          lightboxSrc: lightboxSrc,
          thumb: loadingThumbnail ? thumb : lightboxSrc,
          width: img.width,
          height: img.height,
          alt: imageData.alt || ""
        };
        _this2.constructor.imageCache[cacheKey] = imgObj;
        resolve(imgObj);
      };

      img.onerror = function () {
        if (loadingThumbnail) {
          loadingThumbnail = false;
          img.src = lightboxSrc;
          img.alt = imageData.alt || "";
          return;
        }

        resolve(null);
      };

      img.src = thumb;
    });
  },
  _getThumbnail: function _getThumbnail(name) {
    var thumbnail;
    var dotIndex = name.lastIndexOf(".");

    if (dotIndex !== -1) {
      var fileName = name.substr(0, dotIndex);
      var fileExtension = name.substr(dotIndex + 1);

      if (_tools_js__WEBPACK_IMPORTED_MODULE_3__["REGEXP"].fileExtension.test(fileExtension)) {
        thumbnail = fileName + this.props.thumbSuffix + "." + fileExtension;
      }
    }

    if (!thumbnail) {
      thumbnail = name + this.props.thumbSuffix;
    }

    return thumbnail;
  },
  _getLightbox: function _getLightbox() {
    if (this.props.lightbox === "global") {
      return null;
    } else if (this.props.lightbox === "none") {
      return false;
    } else {
      // this.props.lightbox === "local"
      return this.getId();
    }
  },
  _renderImages: function _renderImages() {
    var _this3 = this;

    return this.state.imgList.map(function (image, index) {
      return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_image_js__WEBPACK_IMPORTED_MODULE_2__["default"], {
        key: index,
        src: image.lightboxSrc,
        alt: image.alt,
        thumb: image.thumb,
        caption: image.caption,
        effect: _this3.props.effect,
        shape: _this3.props.shape,
        lightbox: _this3._getLightbox(),
        className: "".concat(getImageWrapperClassName(image), " ").concat(_this3.getClassName("imageWrapper")),
        authenticate: _this3.props.authenticate // width={image.width}
        // height={image.height}

      });
    });
  },
  //@@viewOff:private
  //@@viewOn:render
  render: function render() {
    return this._renderImages();
  } //@@viewOff:render

});
/* harmony default export */ __webpack_exports__["default"] = (ImageColumnBody);

/***/ }),
/* 30 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Carousel", function() { return Carousel; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);
/* harmony import */ var _internal_carousel_body_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(31);
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _templateObject() {
  var data = _taggedTemplateLiteral(["\n            && {\n              height: ", ";\n            }\n          "]);

  _templateObject = function _templateObject() {
    return data;
  };

  return data;
}

function _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }

//@@viewOn:imports


 //@@viewOff:imports

var Carousel = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.VisualComponent.create({
  //@@viewOn:mixins
  mixins: [uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.BaseMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.NestingLevelMixin],
  //@@viewOff:mixins
  //@@viewOn:statics
  statics: {
    tagName: _config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].TAG + "Carousel",
    nestingLevelList: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.getNestingLevelList("BigBoxCollection", "box"),
    classNames: {
      main: function main(props) {
        var classes = [_config_config_js__WEBPACK_IMPORTED_MODULE_1__["default"].CSS + "carousel"];

        if (props.height) {
          classes.push(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Css.css(_templateObject(), uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Tools.fillUnit(props.height)));
        }

        return classes.join(" ");
      }
    },
    opt: {
      hoc: true,
      nestingLevelWrapper: true
    }
  },
  //@@viewOff:statics
  //@@viewOn:propTypes
  propTypes: {
    data: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.any,
    authenticate: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.bool
  },
  //@@viewOff:propTypes
  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      data: null,
      authenticate: false
    };
  },
  //@@viewOff:getDefaultProps
  //@@viewOn:standardComponentLifeCycle
  //@@viewOff:standardComponentLifeCycle
  //@@viewOn:interface
  //@@viewOff:interface
  //@@viewOn:overridingMethods
  //@@viewOff:overridingMethods
  //@@viewOn:componentSpecificHelpers
  _renderResizeBody: function _renderResizeBody(_ref, orphan) {
    var width = _ref.width;

    if (width === 0) {
      // fix for Resize rendering without dimensions first
      return null;
    } else {
      return this._renderBody(width, orphan);
    }
  },
  _renderBody: function _renderBody() {
    var _this = this;

    var width = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props.width;
    var orphan = arguments.length > 1 ? arguments[1] : undefined;
    var data = this.props.data || [];

    if (this.props.authenticate) {
      return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.SessionContext.Consumer, null, function (session) {
        return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_internal_carousel_body_js__WEBPACK_IMPORTED_MODULE_2__["default"], _extends({}, _this.props, _this._getMainPropsToPass(orphan), {
          data: data,
          width: width,
          session: session ? session.session : undefined
        }));
      });
    } else {
      return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_internal_carousel_body_js__WEBPACK_IMPORTED_MODULE_2__["default"], _extends({}, this.props, this._getMainPropsToPass(orphan), {
        data: data,
        width: width,
        parent: null,
        nestingLevel: undefined
      }));
    }
  },
  _getMainPropsToPass: function _getMainPropsToPass(orphan) {
    var result = this.getMainPropsToPass();

    if (orphan) {
      delete result.parent;
      delete result.nestingLevel;
    }

    return result;
  },
  _getChildren: function _getChildren(orphan) {
    var _this2 = this;

    if (this.props.width) {
      return this._renderBody(undefined, orphan);
    } else {
      return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Resize, _extends({}, this._getMainPropsToPass(orphan), {
        nestingLevel: undefined,
        ref_: null,
        parent: null
      }), function (size) {
        return _this2._renderResizeBody(size, orphan);
      });
    }
  },
  _getLsiLabel: function _getLsiLabel() {
    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Lsi, {
      lsi: {
        cs: "Prezentace obrázků",
        en: "Show slideshow"
      }
    });
  },
  //@@viewOff:private
  //@@viewOff:componentSpecificHelpers
  //@@viewOn:render
  render: function render() {
    return this.getNestingLevel() ? this._getChildren() : uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.LinkModal, {
      component: this._getChildren(true)
    }, this._getLsiLabel());
  } //@@viewOff:render

});
Carousel = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.withVisibilityCheck(Carousel);

/* harmony default export */ __webpack_exports__["default"] = (Carousel);

/***/ }),
/* 31 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CarouselBody", function() { return CarouselBody; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var memoize_one__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(32);
/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(7);
/* harmony import */ var _tools_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(23);
/* harmony import */ var _carousel_item_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(33);
/* harmony import */ var _carousel_context_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(34);
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(n); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }

function _templateObject4() {
  var data = _taggedTemplateLiteral(["\n        &&& img.uu5-bricks-image {\n          height: auto;\n        }\n      "]);

  _templateObject4 = function _templateObject4() {
    return data;
  };

  return data;
}

function _templateObject3() {
  var data = _taggedTemplateLiteral(["\n        && {\n          & > .uu5-bricks-link {\n            display: inline-block;\n          }\n\n          img.uu5-bricks-image {\n            height: ", ";\n            width: auto;\n            max-width: 100%;\n            object-fit: contain;\n          }\n\n          &:focus .uu5-imaging-image-focus-wrapper {\n            box-shadow: none;\n          }\n        }\n\n      "]);

  _templateObject3 = function _templateObject3() {
    return data;
  };

  return data;
}

function _templateObject2() {
  var data = _taggedTemplateLiteral(["\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: ", ";\n    "]);

  _templateObject2 = function _templateObject2() {
    return data;
  };

  return data;
}

function _templateObject() {
  var data = _taggedTemplateLiteral(["\n        && {\n          text-align: center;\n          width: ", ";\n        }\n    "]);

  _templateObject = function _templateObject() {
    return data;
  };

  return data;
}

function _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }







var carouselProps = {
  hideControls: true,
  hideIndicators: true,
  activeIndex: true,
  nextIcon: true,
  prevIcon: true,
  displayedItems: true,
  type: true,
  interval: true,
  stepByOne: true,
  ref_: true
};
var CarouselBody = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.VisualComponent.create({
  //@@viewOn:mixins
  mixins: [uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.BaseMixin],
  //@@viewOff:mixins
  //@@viewOn:statics
  statics: {
    tagName: _config_config_js__WEBPACK_IMPORTED_MODULE_2__["default"].TAG + "CarouselBody",
    classNames: {
      main: function main(props) {
        return _config_config_js__WEBPACK_IMPORTED_MODULE_2__["default"].CSS + "carousel-body " + uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Css.css(_templateObject(), uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Tools.fillUnit(props.width));
      },
      carouselItem: function carouselItem(props) {
        return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Css.css(_templateObject2(), uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Tools.fillUnit(props.height));
      },
      image: function image(props) {
        return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Css.css(_templateObject3(), uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Tools.fillUnit(props.height));
      },
      errorImage: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Css.css(_templateObject4())
    },
    opt: {
      hoc: true
    },
    imageCache: {}
  },
  //@@viewOff:statics
  //@@viewOn:propTypes
  propTypes: {
    data: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.arrayOf(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.shape({
      src: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string.isRequired
    })])).isRequired,
    authenticate: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.bool,
    session: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.object,
    width: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.number,
    height: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.number,
    hideControls: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.bool,
    hideIndicators: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.bool,
    activeIndex: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.number,
    nextIcon: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string,
    prevIcon: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.string,
    displayedItems: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.number,
    type: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.oneOf(["circular", "final", "rewind"]),
    interval: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.number,
    stepByOne: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.bool
  },
  //@@viewOff:propTypes
  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      data: null,
      session: undefined,
      authenticate: false,
      width: null,
      height: 500,
      hideControls: false,
      hideIndicators: false,
      activeIndex: 0,
      nextIcon: "mdi-chevron-right",
      prevIcon: "mdi-chevron-left",
      displayedItems: 1,
      type: "final",
      interval: 5000,
      stepByOne: false
    };
  },
  //@@viewOff:getDefaultProps
  //@@viewOn:reactLifeCycle
  getInitialState: function getInitialState() {
    this._renderImages = Object(memoize_one__WEBPACK_IMPORTED_MODULE_1__["default"])(this._renderImages);
    return {
      imgList: [],
      activeIndex: this.props.activeIndex
    };
  },
  componentDidMount: function componentDidMount() {
    this._loadedIndexes = []; // make sure to always render the same instance of children. This is needed due to UU5.Bricks.Carousel
    // having a componentDidUpdate logic which, when receivening any new props (prevProps !== this.props),
    // re-renders the component without triggering the transition animations.

    this._loadImages();
  },
  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {
    if (!uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Tools.deepEqual(this.props.data, nextProps.data) || nextProps.activeIndex !== this.props.activeIndex || nextProps.displayedItems !== this.props.displayedItems || nextProps.stepByOne !== this.props.stepByOne || nextProps.type !== this.props.type) {
      this._loadedIndexes = [];

      if (nextProps.data.length) {
        this._loadImages(nextProps);
      } else {
        this.setState({
          imgList: []
        });
      }
    }
  },
  //@@viewOff:reactLifeCycle
  //@@viewOn:interface
  //@@viewOff:interface
  //@@viewOn:overridingMethods
  //@@viewOff:overridingMethods
  //@@viewOn:private
  _loadImages: function () {
    var _loadImages2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
      var _this = this;

      var props,
          activeIndex,
          setStateCallback,
          imgList,
          dataChangeId,
          preloadNumber,
          i,
          imageIndex,
          image,
          newState,
          _args = arguments;
      return regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              props = _args.length > 0 && _args[0] !== undefined ? _args[0] : this.props;
              activeIndex = _args.length > 1 ? _args[1] : undefined;
              setStateCallback = _args.length > 2 ? _args[2] : undefined;

              if (!(this._loadedIndexes.length < props.data.length)) {
                _context.next = 32;
                break;
              }

              // else all images have already been loaded and cached
              activeIndex = typeof activeIndex === "number" ? activeIndex : props.activeIndex;

              if (!props.stepByOne) {
                activeIndex = activeIndex * props.displayedItems;
              }

              this._dataChangeId = Math.random();
              imgList = props.data.map(function () {
                return null;
              });
              dataChangeId = this._dataChangeId;
              preloadNumber = props.displayedItems === 1 || props.stepByOne ? 1 : props.displayedItems; // load previous items

              _toConsumableArray(new Array(preloadNumber)).reverse().forEach(function (_, index) {
                var newIndex = activeIndex - (index + 1);

                if (_this._loadedIndexes.indexOf(newIndex) === -1) {
                  _this._loadedIndexes.push(newIndex);
                }
              }); // load visible items


              _toConsumableArray(new Array(props.displayedItems)).forEach(function (_, index) {
                var newIndex = activeIndex + index;

                if (_this._loadedIndexes.indexOf(newIndex) === -1) {
                  _this._loadedIndexes.push(newIndex);
                }
              }); // load next items


              _toConsumableArray(new Array(preloadNumber)).forEach(function (_, index) {
                var newIndex = activeIndex + props.displayedItems - 1 + (index + 1);

                if (_this._loadedIndexes.indexOf(newIndex) === -1) {
                  _this._loadedIndexes.push(newIndex);
                }
              }); // adjust items (over the limit or below)


              this._loadedIndexes.forEach(function (index, i) {
                var isBelow = index < 0;
                var isAbove = index > imgList.length - 1;

                if (props.type === "final" && (isBelow || isAbove)) {
                  _this._loadedIndexes[i] = null;
                } else {
                  if (isBelow) {
                    _this._loadedIndexes[i] = imgList.length + index;
                  } else if (isAbove) {
                    _this._loadedIndexes[i] = index - imgList.length;
                  }
                }
              });

              if (props.type !== "circular" && activeIndex + preloadNumber > imgList.length) {
                _toConsumableArray(new Array(imgList.length - activeIndex + preloadNumber)).forEach(function (_, index) {
                  var newIndex = activeIndex - (index + 1);

                  if (_this._loadedIndexes.indexOf(newIndex) === -1) {
                    _this._loadedIndexes.push(newIndex);
                  }
                });
              }

              this._loadedIndexes = this._loadedIndexes.filter(function (index) {
                return index !== null;
              });
              i = 0;

            case 17:
              if (!(i < this._loadedIndexes.length)) {
                _context.next = 29;
                break;
              }

              imageIndex = this._loadedIndexes[i];

              if (!(typeof imageIndex === "number")) {
                _context.next = 26;
                break;
              }

              _context.next = 22;
              return this._loadImage(props.data[imageIndex], props.authenticate, props.session);

            case 22:
              image = _context.sent;

              if (!(dataChangeId !== this._dataChangeId)) {
                _context.next = 25;
                break;
              }

              return _context.abrupt("return");

            case 25:
              if (image) {
                imgList[imageIndex] = image;
              }

            case 26:
              i++;
              _context.next = 17;
              break;

            case 29:
              newState = {
                imgList: imgList
              };

              if (typeof activeIndex === "number") {
                newState.activeIndex = activeIndex;
              }

              this.setAsyncState(newState, setStateCallback);

            case 32:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, this);
    }));

    function _loadImages() {
      return _loadImages2.apply(this, arguments);
    }

    return _loadImages;
  }(),
  _loadImage: function _loadImage(item, authenticate, session) {
    var _this2 = this;

    if (typeof item === "string") {
      item = {
        src: item
      };
    }

    var src = item.src;
    var cacheMatch = this.constructor.imageCache[src];
    var result;

    if (cacheMatch) {
      result = cacheMatch;
    } else {
      if (authenticate) {
        session = session || uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.getSession();

        if (session && session.isAuthenticated() && uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.isTrustedDomain(src)) {
          var token = session.getCallToken().token;
          result = new Promise(function (resolve) {
            var usedItem = _objectSpread({}, item);

            _tools_js__WEBPACK_IMPORTED_MODULE_3__["default"].fetchAuthenticatedImage(src, token).then(function (data) {
              usedItem.src = URL.createObjectURL(data.data);
              resolve(_this2._getImageData(usedItem, src));
            }, function (err) {
              usedItem.src = "data:image/gif;base64,ZZZZZZZZ"; // invalid image

              resolve(_this2._getImageData(usedItem, src));
            });
          });
        }
      }
    }

    if (!result) {
      result = this._getImageData(item, src);
    }

    return result;
  },
  _getImageData: function _getImageData(item, cacheKey) {
    var _this3 = this;

    return new Promise(function (resolve) {
      var src;

      if (item && _typeof(item) === "object") {
        src = item.src;
      } else {
        src = item;
      }

      var img = new window.Image();

      img.onload = function () {
        var imgObj = {
          src: src,
          width: img.width,
          height: img.height,
          alt: img.alt || "",
          error: false
        };
        _this3.constructor.imageCache[cacheKey] = imgObj;
        resolve(imgObj);
      };

      img.onerror = function () {
        var imgObj = {
          src: "data:image/gif;base64,ZZZZZZZZ",
          alt: img.alt || "",
          error: true
        };
        resolve(imgObj);
      };

      img.alt = item.alt || "";
      img.src = src;
    });
  },
  _onIndexChange: function _onIndexChange(_ref) {
    var activeIndex = _ref.activeIndex;

    this._loadImages(this.props, activeIndex);
  },
  _getImageProps: function _getImageProps(itemId) {
    var data = this.state.imgList[itemId];

    if (data) {
      var className = this.getClassName("image");

      if (data.error) {
        className += " " + this.getClassName("errorImage");
      }

      return {
        src: data.src,
        caption: data.caption,
        alt: data.alt,
        lightbox: false,
        authenticate: this.props.authenticate,
        width: "auto",
        height: "auto",
        className: className
      };
    } else {
      return null;
    }
  },
  _renderImages: function _renderImages(imgListLength) {
    var _this4 = this;

    return _toConsumableArray(new Array(imgListLength)).map(function (_, index) {
      return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Carousel.Item, {
        key: index,
        className: _this4.getClassName("carouselItem")
      }, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_carousel_item_js__WEBPACK_IMPORTED_MODULE_4__["default"], {
        id: index + ""
      }));
    });
  },
  //@@viewOff:private
  //@@viewOn:render
  render: function render() {
    var props = {};

    for (var propKey in carouselProps) {
      props[propKey] = this.props[propKey];
    }

    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_carousel_context_js__WEBPACK_IMPORTED_MODULE_5__["default"].Provider, {
      value: {
        getImageProps: this._getImageProps
      }
    }, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Carousel, _extends({}, this.getMainPropsToPass(), props, {
      displayedItems: props.displayedItems || 1,
      onIndexChange: this._onIndexChange
    }), this._renderImages(this.state.imgList.length)));
  } //@@viewOff:render

});
/* harmony default export */ __webpack_exports__["default"] = (CarouselBody);

/***/ }),
/* 32 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function areInputsEqual(newInputs, lastInputs) {
    if (newInputs.length !== lastInputs.length) {
        return false;
    }
    for (var i = 0; i < newInputs.length; i++) {
        if (newInputs[i] !== lastInputs[i]) {
            return false;
        }
    }
    return true;
}

function memoizeOne(resultFn, isEqual) {
    if (isEqual === void 0) { isEqual = areInputsEqual; }
    var lastThis;
    var lastArgs = [];
    var lastResult;
    var calledOnce = false;
    function memoized() {
        var newArgs = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            newArgs[_i] = arguments[_i];
        }
        if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {
            return lastResult;
        }
        lastResult = resultFn.apply(this, newArgs);
        calledOnce = true;
        lastThis = this;
        lastArgs = newArgs;
        return lastResult;
    }
    return memoized;
}

/* harmony default export */ __webpack_exports__["default"] = (memoizeOne);


/***/ }),
/* 33 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CarouselItem", function() { return CarouselItem; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _carousel_context_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(34);
/* harmony import */ var _image_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(17);
//@@viewOn:imports


 //@@viewOff:imports

var CarouselItem = Object(_carousel_context_js__WEBPACK_IMPORTED_MODULE_1__["withCarouselContext"])(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Reference.forward(function (props, ref) {
  var imageProps = props.getImageProps(props.id);
  return imageProps ? uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_image_js__WEBPACK_IMPORTED_MODULE_2__["default"], imageProps) : null;
}));

CarouselItem.isUu5PureComponent = true;
CarouselItem.displayName = "UU5.Bricks.CarouselItem";
CarouselItem.tagName = "UU5.Bricks.CarouselItem";
CarouselItem.propTypes = {
  getImageProps: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.func
};
/* harmony default export */ __webpack_exports__["default"] = (CarouselItem);

/***/ }),
/* 34 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Context", function() { return Context; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "withCarouselContext", function() { return withCarouselContext; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }


var Context = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Context.create();
var withCarouselContext = function withCarouselContext(Component) {
  if (!uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Context.isSupported()) return Component;
  var forwardRef = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Reference.forward(function (props, ref) {
    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(Context.Consumer, null, function (context) {
      return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(Component, _extends({}, context, props, {
        ref: ref
      }));
    });
  });
  forwardRef.isUu5PureComponent = true;
  forwardRef.displayName = "forwardRef(".concat(Component.displayName || Component.name || "Component", ")");
  forwardRef.tagName = Component.tagName;
  return forwardRef;
};
/* harmony default export */ __webpack_exports__["default"] = (Context);

/***/ }),
/* 35 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Input", function() { return Input; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(18);
/* harmony import */ var uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var uu5g04_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(36);
/* harmony import */ var uu5g04_forms__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(uu5g04_forms__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _adjustment_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(37);
/* harmony import */ var _input_less__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(38);
/* harmony import */ var _input_less__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_input_less__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _internal_image_input_adjustment_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(40);
/* harmony import */ var _internal_image_paste_handler_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(49);
/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(7);
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }









var ITEM_PROP_TYPE = uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].shape({
  id: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string,
  name: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string,
  value: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].object,
  // Blob
  // uri: UU5.PropTypes.string,
  // progress: UU5.PropTypes.number,
  src: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string,
  // for displaying via <img src="..." /> (image does not have to be uploaded)
  originalValue: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].object,
  // Blob - in case image adjustment settings gets changed (we need original file)
  error: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].any
});
var Input = uu5g04__WEBPACK_IMPORTED_MODULE_0__["Forms"].Context.withContext(uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].VisualComponent.create({
  //@@viewOn:mixins
  mixins: [uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].BaseMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].ElementaryMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].PureRenderMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].ColorSchemaMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0__["Forms"].InputMixin, _internal_image_paste_handler_js__WEBPACK_IMPORTED_MODULE_6__["ImagePasteHandlerMixin"]],
  //@@viewOff:mixins
  //@@viewOn:statics
  statics: {
    tagName: _config_config_js__WEBPACK_IMPORTED_MODULE_7__["default"].TAG + "Input",
    classNames: {
      main: _config_config_js__WEBPACK_IMPORTED_MODULE_7__["default"].CSS + "input"
    },
    lsi: {
      requiredMessage: uu5g04__WEBPACK_IMPORTED_MODULE_0__["Environment"].Lsi.Forms.message.requiredMessage,
      placeholder: {
        cs: "Nahrát obrázek",
        en: "Load image",
        sk: "Nahrať obrázok"
      },
      placeholderMulti: {
        cs: "Nahrát obrázky",
        en: "Load images",
        sk: "Nahrať obrázky"
      },
      placeholderReadOnly: {
        cs: "Nelze nahrát obrázek",
        en: "Cannot load image",
        sk: "Nie je možné nahrať obrázok"
      },
      placeholderReadOnlyMulti: {
        cs: "Nelze nahrát obrázky",
        en: "Cannot load images",
        sk: "Nie je možné nahrať obrázky"
      }
    },
    opt: {
      pureRender: true
    }
  },
  //@@viewOff:statics
  //@@viewOn:propTypes
  propTypes: {
    value: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOfType([ITEM_PROP_TYPE, uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].arrayOf(ITEM_PROP_TYPE)]),
    placeholder: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].object, uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string]),
    multiple: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].bool,
    outputWidth: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number, uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string]),
    outputHeight: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number, uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string]),
    outputType: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOf(_adjustment_js__WEBPACK_IMPORTED_MODULE_3__["default"].OUTPUT_TYPES.concat(["jpg", "image/jpeg", "image/png"])),
    outputRotation: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOf(["auto"]), uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number]),
    outputQuality: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number,
    ignorePaste: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].bool,
    borderRadius: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string,
    bgStyle: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOf(["filled", "outline", "transparent", "underline"]),
    elevation: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOf(["-1", "0", "1", "2", "3", "4", "5", -1, 0, 1, 2, 3, 4, 5]),
    previewWidth: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number,
    previewHeight: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number,
    previewShape: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string
  },
  //@@viewOff:propTypes
  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      placeholder: undefined,
      multiple: false,
      outputWidth: null,
      outputHeight: null,
      outputType: null,
      outputRotation: "auto",
      outputQuality: null,
      ignorePaste: undefined,
      borderRadius: null,
      bgStyle: null,
      elevation: null,
      previewWidth: 100,
      previewHeight: null,
      previewShape: "square"
    };
  },
  //@@viewOff:getDefaultProps
  //@@viewOn:standardComponentLifeCycle
  componentWillMount: function componentWillMount() {
    if (typeof this.props.onValidate === "function" && this._isItemsDone(this.state.value)) {
      this._validateOnChange({
        value: this.state.value,
        event: null,
        component: this
      });
    }
  },
  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {
    var _this = this;

    if (!nextProps.multiple && this.props.multiple) {
      var needsChangeEvent = false;
      this.setState(function (_ref) {
        var value = _ref.value;
        var result;

        if (Array.isArray(value) && value.length > 1) {
          needsChangeEvent = true;
          value.slice(0, value.length - 1).forEach(function (item) {
            if (item.src) URL.revokeObjectURL(item.src);
          });
          result = {
            value: value[value.length - 1]
          };
        }

        return result;
      }, function () {
        return needsChangeEvent ? _this._triggerChangeEvent() : null;
      });
    }

    if (nextProps.controlled) {
      this.setState({
        value: nextProps.value,
        feedback: nextProps.feedback,
        message: nextProps.message
      });
    }
  },
  //@@viewOff:standardComponentLifeCycle
  //@@viewOn:interface
  onChange: function onChange() {
    var opt = {
      value: this.state.value,
      component: this
    };

    if (!this.isComputedDisabled() && !this.isReadOnly()) {
      if (typeof this.props.onChange === "function") {
        this.props.onChange(opt);
      } else {
        this.onChangeDefault(opt);
      }
    }

    return this;
  },
  onChangeDefault: function onChangeDefault(opt) {
    if (typeof this.props.onValidate === "function") {
      this._validateOnChange({
        value: opt.value,
        event: opt.event,
        component: this
      });
    }

    return this;
  },
  isValid: function isValid() {
    var feedback = this.getFeedback();
    var value = this.getValue();
    var result = true;

    if (this.props.required && (value == null || value.length === 0)) {
      this.setError(this.props.requiredMessage || this.getLsiValue("requiredMessage")); // TODO Why modify state?

      result = false;
    } else if (feedback === "error" || feedback === "loading-internal" || feedback === "loading") {
      result = false;
    }

    if (result && this.props.onValidate) {
      var validation = this.props.onValidate({
        value: value,
        component: this
      });

      if (validation && _typeof(validation) === "object") {
        if (validation.feedback === "error") {
          result = false;
        }
      }
    }

    return result;
  },
  //@@viewOff:interface
  //@@viewOn:overridingMethods
  setValue_: function setValue_(value, setStateCallback) {
    if (this._checkRequired({
      value: value
    })) {
      if (typeof this.props.onValidate === "function") {
        this._validateOnChange({
          value: value,
          event: null,
          component: this
        });
      } else {
        this.setInitial(null, value, setStateCallback);
      }
    }

    return this;
  },
  getValue_: function getValue_() {
    var value = this.state.value;
    if (this.props.multiple && value && !Array.isArray(value)) value = [value];else if (!this.props.multiple && Array.isArray(value)) value = value[0];
    return value;
  },
  pasteImages_: function pasteImages_(imageBlobs) {
    var _this2 = this;

    var blobs = this.props.multiple ? imageBlobs : imageBlobs.slice(-1);

    if (blobs.length > 0) {
      this.setState(function (_ref2) {
        var value = _ref2.value;
        if (!_this2.props.multiple) value = [];else value = value && !Array.isArray(value) ? [value] : value || [];
        value = value.concat(blobs.map(function (blob) {
          return {
            id: uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Tools.generateUUID(),
            originalValue: blob,
            name: blob.name
          };
        }));
        if (!_this2.props.multiple) value = value[value.length - 1];
        return {
          value: value
        };
      });
    }
  },
  //@@viewOff:overridingMethods
  //@@viewOn:componentSpecificHelpers
  _triggerChangeEvent: function _triggerChangeEvent() {
    var _this3 = this;

    this._updateFeedbackFromValue(function () {
      // trigger props.onChange only after all items are finished (uploaded / failed)
      if (_this3._isItemsDone(_this3.state.value)) _this3.onChange();
    });
  },
  _validateOnChange: function _validateOnChange(opt) {
    var result = typeof this.props.onValidate === "function" ? this.props.onValidate(opt) : null;

    if (result) {
      if (_typeof(result) === "object") {
        if (result.feedback) {
          this._setFeedback(result.feedback, result.message, result.value);
        } else {
          this.setState({
            value: opt.value
          });
        }
      } else {
        this.showError("validateError", null, {
          context: {
            func: this.props.onValidate,
            result: result
          }
        });
      }
    }

    return this;
  },
  _checkRequired: function _checkRequired(opt) {
    var result = true;

    if (this.props.required && (!opt.value || opt.value.length === 0) && this.shouldValidateRequired()) {
      result = false;
      this.setError(this.props.requiredMessage || this.getLsiComponent("requiredMessage"), opt.value);
    }

    return result;
  },
  _isItemsDone: function _isItemsDone(value) {
    var valueArr = value && !Array.isArray(value) ? [value] : value;
    return !valueArr || valueArr.every(function (item) {
      return item.uri || item.error || item.value && item.originalValue;
    });
  },
  _onChange: function _onChange(opt) {
    var _this4 = this;

    var data = opt.data;

    if (data) {
      this.setState(function (_ref3) {
        var value = _ref3.value;

        var _loop = function _loop(k) {
          var modifiedItem = data[k];
          value = _this4._replaceStateItem(value, k, function (existingItem) {
            return modifiedItem;
          });
        };

        for (var k in data) {
          _loop(k);
        }

        return {
          value: value
        };
      }, this._triggerChangeEvent);
    }
  },
  _replaceStateItem: function _replaceStateItem(list, itemId, replacerFn) {
    var result;
    var listArr = list && !Array.isArray(list) ? [list] : list;
    var idx = listArr ? listArr.findIndex(function (item) {
      return item.id === itemId;
    }) : -1;

    if (idx === -1) {
      var newItem = replacerFn(null);
      if (newItem) result = (listArr || []).concat([newItem]);else result = list;
    } else {
      var existingItem = listArr ? listArr[idx] : undefined;

      var _newItem = replacerFn(existingItem);

      if (_newItem === existingItem) result = list;else {
        result = listArr ? _toConsumableArray(listArr) : [];
        if (!_newItem) result.splice(idx, 1);else result.splice(idx, 1, _newItem);
        if (result.length === 0 && !list) result = list; // keep null / undefined if that's what it was before
      }

      var _ref4 = existingItem || {},
          src = _ref4.src;

      if (src && (!_newItem || src !== _newItem.src)) {
        setTimeout(function () {
          return URL.revokeObjectURL(src);
        }); // NOTE Passing normal URLs is safe too (no-op).
      }
    }

    if (!this.props.multiple && Array.isArray(result)) result = result[result.length - 1];
    return result;
  },
  _updateFeedbackFromValue: function _updateFeedbackFromValue(setStateCallback) {
    var errors = [];
    var value = this.state.value && !Array.isArray(this.state.value) ? [this.state.value] : this.state.value;
    (value || []).forEach(function (item) {
      if (item.error) errors.push(item);
    });
    var feedback, message;

    if (errors.length > 0) {
      feedback = "error";
      message = uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create("div", null, errors.map(function (it) {
        return uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create("div", {
          key: it.id
        }, uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0__["Bricks"].Lsi, {
          lsi: it.error,
          params: [(it.value || it.originalValue || {}).name || ""]
        }));
      }));
    }

    this._setFeedback(feedback, message, this.state.value, setStateCallback);
  },
  _onRemove: function _onRemove(id) {
    var _this5 = this;

    this.setState(function (_ref5) {
      var value = _ref5.value;

      var newValue = _this5._replaceStateItem(value, id, function (existingItem) {
        return null;
      });

      return newValue === value ? undefined : {
        value: newValue
      };
    }, this._triggerChangeEvent);
  },
  _getInputProps: function _getInputProps() {
    return Object.assign({
      display: !this.state.value || this.state.value.length === 0 || this.props.multiple,
      id: this.getId() + "-input",
      multiple: this.props.multiple,
      readOnly: this.isReadOnly(),
      disabled: this.isComputedDisabled(),
      loading: this.isLoading(),
      placeholder: this.props.placeholder !== undefined ? this.props.placeholder : this.getLsiComponent("placeholder" + (this.isReadOnly() && !this.isDisabled() ? "ReadOnly" : "") + (this.props.multiple ? "Multi" : "")),
      borderRadius: this.props.borderRadius,
      bgStyle: this.props.bgStyle,
      elevation: this.props.elevation,
      inputWidth: this.props.inputWidth
    }, this.props.inputAttrs);
  },
  _getLineProps: function _getLineProps() {
    return {
      display: !!this.state.message,
      feedback: this.state.feedback
    };
  },
  _getAdjustmentProps: function _getAdjustmentProps() {
    return {
      value: this.state.value && !Array.isArray(this.state.value) ? [this.state.value] : this.state.value,
      onChange: this._onChange,
      inputProps: this._getInputProps(),
      lineProps: this._getLineProps(),
      onRemove: this._onRemove,
      onLoad: this._onLoad,
      width: this.props.outputWidth,
      height: this.props.outputHeight,
      type: this.props.outputType,
      rotation: this.props.outputRotation,
      quality: this.props.outputQuality,
      previewWidth: this.props.previewWidth,
      previewHeight: this.props.previewHeight,
      previewShape: this.props.previewShape,
      cumulativeOnChange: true
    };
  },
  _getMainAttrs: function _getMainAttrs() {
    var attrs = this._getInputAttrs();

    attrs.id = this.getId();
    return attrs;
  },
  //@@viewOff:componentSpecificHelpers
  //@@viewOn:render
  render: function render() {
    return uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create("div", this._getMainAttrs(), this.getLabel(this.getId() + "-input-hidden-input"), this.getInputWrapper(uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create(_internal_image_input_adjustment_js__WEBPACK_IMPORTED_MODULE_5__["default"], this._getAdjustmentProps())), this.getDisabledCoverTransparent());
  } //@@viewOff:render

}));
/* harmony default export */ __webpack_exports__["default"] = (Input);

/***/ }),
/* 36 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE__36__;

/***/ }),
/* 37 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Adjustment", function() { return Adjustment; });
var Adjustment = {
  OUTPUT_TYPES: ["png", "jpeg"]
};
var canvas, context;

if (!HTMLCanvasElement.prototype.toBlob) {
  Object.defineProperty(HTMLCanvasElement.prototype, "toBlob", {
    value: function value(callback, type, quality) {
      var dataURL = this.toDataURL(type, quality).split(",")[1];
      setTimeout(function () {
        var binStr = atob(dataURL),
            len = binStr.length,
            arr = new Uint8Array(len);

        for (var i = 0; i < len; i++) {
          arr[i] = binStr.charCodeAt(i);
        }

        callback(new Blob([arr], {
          type: type || "image/png"
        }));
      });
    }
  });
} //@@viewOn:interface


Adjustment.resize = function (imageFile, width, height) {
  return _modifyImage(imageFile, function (imageElement) {
    _initCanvas();

    var imgHeight = imageElement.naturalHeight || imageElement.height;
    var imgWidth = imageElement.naturalWidth || imageElement.width;
    if (typeof width === "string" && width.match(/^\d+(\.\d+)?%$/)) width = parseFloat(width) * imgWidth / 100;else if (typeof width === "string") width = Number(width);
    if (typeof height === "string" && height.match(/^\d+(\.\d+)?%$/)) height = parseFloat(height) * imgHeight / 100;else if (typeof height === "string") height = Number(height);
    var canvasWidth = width;
    var canvasHeight = height;

    if (!width) {
      canvasWidth = height / imgHeight * imgWidth;
    } else if (!height) {
      canvasHeight = width / imgWidth * imgHeight;
    }

    canvas.width = canvasWidth;
    canvas.height = canvasHeight;
    context.drawImage(imageElement, 0, 0, canvasWidth, canvasHeight);
    return {
      quality: 1
    };
  });
};

Adjustment.resizeMax = function (imageFile, maxWidth, maxHeight) {
  return _modifyImage(imageFile, function (imageElement) {
    _initCanvas();

    var imgHeight = imageElement.naturalHeight || imageElement.height;
    var imgWidth = imageElement.naturalWidth || imageElement.width;
    if (typeof maxWidth === "string" && maxWidth.match(/^\d+(\.\d+)?%$/)) maxWidth = parseFloat(maxWidth) * imgWidth / 100;else if (typeof maxWidth === "string") maxWidth = Number(maxWidth);
    if (typeof maxHeight === "string" && maxHeight.match(/^\d+(\.\d+)?%$/)) maxHeight = parseFloat(maxHeight) * imgHeight / 100;else if (typeof maxHeight === "string") maxHeight = Number(maxHeight);
    var canvasWidth = maxWidth;
    var canvasHeight = maxHeight;

    if (!maxWidth) {
      canvasWidth = maxHeight / imgHeight * imgWidth;
    } else if (!maxHeight) {
      canvasHeight = maxWidth / imgWidth * imgHeight;
    } else {
      // contain (preserve aspect ratio, i.e. width & height are max width & max height)
      // and don't scale up
      if (imgWidth / imgHeight < maxWidth / maxHeight) {
        canvasHeight = Math.min(imgHeight, maxHeight);
        canvasWidth = Math.min(imgWidth, canvasHeight / imgHeight * imgWidth);
      } else {
        canvasWidth = Math.min(imgWidth, maxWidth);
        canvasHeight = Math.min(imgHeight, canvasWidth / imgWidth * imgHeight);
      }
    }

    if (canvasWidth > imgWidth || canvasHeight > imgHeight) {
      canvasWidth = imgWidth;
      canvasHeight = imgHeight;
    }

    canvas.width = Math.floor(canvasWidth) > 0 ? canvasWidth : 1;
    canvas.height = Math.floor(canvasHeight) > 0 ? canvasHeight : 1;
    context.drawImage(imageElement, 0, 0, canvasWidth, canvasHeight);
    return {
      quality: 1
    };
  });
};

Adjustment.changeType = function (imageFile, requiredType, quality) {
  var result;

  if (!isTypeSupported(requiredType)) {
    result = Promise.reject(new Error("Output type '".concat(requiredType, "' is not supported. Must be one of: ").concat(Adjustment.OUTPUT_TYPES, ".")));
  } else {
    result = _modifyImage(imageFile, function (imageElement) {
      _initCanvas();

      var width = imageElement.naturalWidth || imageElement.width;
      var height = imageElement.naturalHeight || imageElement.height;
      canvas.width = width;
      canvas.height = height;
      context.drawImage(imageElement, 0, 0, width, height);
      return {
        type: requiredType,
        quality: quality
      };
    });
  }

  return result;
};

Adjustment.rotate = function (imageFile, method) {
  var originalFile = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : imageFile;
  return _getImageArrayBuffer(originalFile).then(function (imageArrayBuffer) {
    return _modifyImage(imageFile, function (imageElement) {
      _initCanvas();

      var result = {
        quality: 1
      };

      var orientation = _getOrientation(imageArrayBuffer);

      if (typeof method === "number") {
        _flipImage(imageElement, orientation, method);
      } else if (method === "auto" && orientation > 0) {
        _flipImageAutomatically(imageElement, orientation);
      } else {
        result.imageFile = imageFile;
      }

      return result;
    });
  });
};

Adjustment.crop = function (imageFile, x, y, width, height) {
  return _modifyImage(imageFile, function (imageElement) {
    _initCanvas();

    var imgHeight = imageElement.naturalHeight || imageElement.height;
    var imgWidth = imageElement.naturalWidth || imageElement.width;
    var srcWidth = Math.min(width, imgWidth - x);
    var srcHeight = Math.min(height, imgHeight - y);
    canvas.width = srcWidth;
    canvas.height = srcHeight;
    context.drawImage(imageElement, x, y, srcWidth, srcHeight, 0, 0, canvas.width, canvas.height);
    return {
      quality: 1
    };
  });
};

Adjustment.cropRatio = function (imageFile, dxWidth, dxHeight) {
  return _modifyImage(imageFile, function (imageElement) {
    _initCanvas();

    var imgHeight = imageElement.naturalHeight || imageElement.height;
    var imgWidth = imageElement.naturalWidth || imageElement.width;
    var canvasWidth, canvasHeight;

    if (dxWidth / dxHeight < imgWidth / imgHeight) {
      canvasHeight = imgHeight;
      canvasWidth = canvasHeight * dxWidth / dxHeight;
    } else {
      canvasWidth = imgWidth;
      canvasHeight = canvasWidth * dxHeight / dxWidth;
    }

    canvas.width = canvasWidth;
    canvas.height = canvasHeight;
    context.drawImage(imageElement, (imgWidth - canvasWidth) / 2, (imgHeight - canvasHeight) / 2, canvasWidth, canvasHeight, 0, 0, canvasWidth, canvasHeight);
    return {
      quality: 1
    };
  });
}; //@@viewOff:interface
// https://stackoverflow.com/questions/7584794/accessing-jpeg-exif-rotation-data-in-javascript-on-the-client-side


function _getOrientation(imageSrc) {
  var view = new DataView(imageSrc);

  if (view.getUint16(0, false) != 0xffd8) {
    return -2;
  }

  var length = view.byteLength,
      offset = 2;

  while (offset < length) {
    if (view.getUint16(offset + 2, false) <= 8) return -1;
    var marker = view.getUint16(offset, false);
    offset += 2;

    if (marker == 0xffe1) {
      if (view.getUint32(offset += 2, false) != 0x45786966) {
        return -1;
      }

      var little = view.getUint16(offset += 6, false) == 0x4949;
      offset += view.getUint32(offset + 4, little);
      var tags = view.getUint16(offset, little);
      offset += 2;

      for (var i = 0; i < tags; i++) {
        if (view.getUint16(offset + i * 12, little) == 0x0112) {
          return view.getUint16(offset + i * 12 + 8, little);
        }
      }
    } else if ((marker & 0xff00) != 0xff00) {
      break;
    } else {
      offset += view.getUint16(offset, false);
    }
  }

  return -1;
}

function _flipImage(imageElement, orientation, requiredRotation) {
  return _rotate(imageElement, orientation, requiredRotation);
}

function _flipImageAutomatically(imageElement, orientation) {
  return _rotate(imageElement, orientation);
}

function _rotate(imageElement, orientation, requiredRotation) {
  var width = imageElement.naturalWidth || imageElement.width;
  var height = imageElement.naturalHeight || imageElement.height;

  if (typeof requiredRotation === "number") {
    var angle = requiredRotation * (Math.PI / 180);

    var rotateX = function rotateX(x, y) {
      return -y * Math.sin(angle) + x * Math.cos(angle);
    };

    var rotateY = function rotateY(x, y) {
      return y * Math.cos(angle) + x * Math.sin(angle);
    };

    var leftTopX = Math.round(Math.min(0, rotateX(width, 0), rotateX(width, height), rotateX(0, height)));
    var leftTopY = Math.round(Math.min(0, rotateY(width, 0), rotateY(width, height), rotateY(0, height)));
    var rightBottomX = Math.round(Math.max(0, rotateX(width, 0), rotateX(width, height), rotateX(0, height)));
    var rightBottomY = Math.round(Math.max(0, rotateY(width, 0), rotateY(width, height), rotateY(0, height)));
    canvas.width = rightBottomX - leftTopX;
    canvas.height = rightBottomY - leftTopY;
    context.translate(-leftTopX, -leftTopY);
    context.rotate(angle);
  } else {
    switch (orientation) {
      case 2:
        // horizontal flip
        canvas.width = width;
        canvas.height = height;
        context.translate(width, 0);
        context.scale(-1, 1);
        break;

      case 3:
        // 180° left
        canvas.width = width;
        canvas.height = height;
        context.translate(width, height);
        context.rotate(Math.PI);
        break;

      case 4:
        // vertical flip
        canvas.width = width;
        canvas.height = height;
        context.translate(0, height);
        context.scale(1, -1);
        break;

      case 5:
        // vertical flip + 90 right
        canvas.width = height;
        canvas.height = width;
        context.rotate(0.5 * Math.PI);
        context.scale(1, -1);
        break;

      case 6:
        // 90° right
        canvas.width = height;
        canvas.height = width;
        context.rotate(0.5 * Math.PI);
        context.translate(0, -height);
        break;

      case 7:
        // horizontal flip + 90 right
        canvas.width = height;
        canvas.height = width;
        context.rotate(0.5 * Math.PI);
        context.translate(width, -height);
        context.scale(-1, 1);
        break;

      case 8:
        // 90° left
        canvas.width = height;
        canvas.height = width;
        context.rotate(-0.5 * Math.PI);
        context.translate(-width, 0);
        break;

      default:
        canvas.width = width;
        canvas.height = height;
    }
  }

  context.drawImage(imageElement, 0, 0);
}

function _initCanvas() {
  if (!canvas && !context) {
    canvas = document.createElement("canvas");
    canvas.style.display = "none";
    document.body.appendChild(canvas);
    context = canvas.getContext("2d");
  }

  context.clearRect(0, 0, canvas.width, canvas.height);
  context.restore();
  context.save();
}

function _modifyImage(imageFile, fn) {
  return new Promise(function (resolve, reject) {
    _getImageElement(URL.createObjectURL(imageFile)).then(function (imageElement) {
      var _ref = fn(imageElement) || {},
          type = _ref.type,
          resultFile = _ref.imageFile,
          quality = _ref.quality;

      if (resultFile) {
        resolve({
          imageSrc: URL.createObjectURL(resultFile),
          imageFile: resultFile
        });
      } else {
        if (!type && imageFile.name) {
          // preserve image type, e.g. photo.jpg => image/jpg
          type = imageFile.name.split(".").pop().toLowerCase();
          if (!isTypeSupported(type)) type = null;
        }

        if (!type) type = Adjustment.OUTPUT_TYPES[0];
        type = normalizeType(type);
        var _canvas = canvas,
            width = _canvas.width,
            height = _canvas.height;
        canvas.toBlob(function (blob) {
          if (!blob) {
            reject(new Error("Image adjustment failed (unable to get result blob data). Result canvas size: ".concat(width, "x").concat(height)));
          } else if (type && blob.type !== type) {
            reject(new Error("This browser doesn't support generating images of type '".concat(type, "'.")));
          } else {
            blob.name = imageFile.name;

            if (type) {
              blob.name = blob.name.replace(/\.[^.]*$/, function (m) {
                return "." + type.replace(/^image\//, "").replace(/^jpeg$/, "jpg");
              });
            }

            resolve({
              imageSrc: URL.createObjectURL(blob),
              imageFile: blob
            });
          }
        }, type, quality);
      }
    }, reject);
  });
}

function _getImageElement(imageSrc) {
  return new Promise(function (resolve, reject) {
    var image = new Image();
    image.src = imageSrc;

    image.onload = function () {
      resolve(image);
    };

    image.onerror = function () {
      reject(new Error("Image failed to load in <img> element."));
    };
  });
}

function _getImageArrayBuffer(imageFile) {
  return new Promise(function (resolve, reject) {
    var reader = new FileReader();

    reader.onload = function (e) {
      resolve(e.target.result);
    };

    reader.onerror = function () {
      reject(new Error("Reading image data failed."));
    };

    reader.readAsArrayBuffer(imageFile);
  });
}

function normalizeType(type) {
  if (type && !type.startsWith("image/")) type = "image/" + type;
  if (type === "image/jpg") type = "image/jpeg";
  return type || null;
}

var isTypeSupported = function () {
  var normalizedTypes;
  return function (type) {
    if (!normalizedTypes) {
      normalizedTypes = {};
      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = Adjustment.OUTPUT_TYPES[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var _type = _step.value;
          normalizedTypes[normalizeType(_type)] = true;
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return != null) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }
    }

    return normalizedTypes[normalizeType(type)];
  };
}();

/* harmony default export */ __webpack_exports__["default"] = (Adjustment);

/***/ }),
/* 38 */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(39);

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":false}

options.transform = transform
options.insertInto = function anonymous(
) {
return __webpack_require__(12)();
};

var update = __webpack_require__(13)(content, options);

if(content.locals) module.exports = content.locals;



/***/ }),
/* 39 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(11)(false);
// Module
exports.push([module.i, ".uu5-imaging-input {\n  position: relative;\n}\n", ""]);



/***/ }),
/* 40 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageInputAdjustment", function() { return ImageInputAdjustment; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(18);
/* harmony import */ var uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _image_input_adjustment_less__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(41);
/* harmony import */ var _image_input_adjustment_less__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_image_input_adjustment_less__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _image_input_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(43);
/* harmony import */ var _image_input_item_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(46);
/* harmony import */ var _adjustment__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(37);
/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(7);
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }








var ImageInputAdjustment = uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].VisualComponent.create({
  //@@viewOn:mixins
  mixins: [uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].BaseMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].ElementaryMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].PureRenderMixin],
  //@@viewOff:mixins
  //@@viewOn:statics
  statics: {
    tagName: _config_config_js__WEBPACK_IMPORTED_MODULE_6__["default"].TAG + "ImageInputAdjustment",
    classNames: {
      main: _config_config_js__WEBPACK_IMPORTED_MODULE_6__["default"].CSS + "image-input-adjustment",
      wrapper: _config_config_js__WEBPACK_IMPORTED_MODULE_6__["default"].CSS + "image-input-wrapper",
      line: _config_config_js__WEBPACK_IMPORTED_MODULE_6__["default"].CSS + "image-input-message-line",
      lineFeedback: _config_config_js__WEBPACK_IMPORTED_MODULE_6__["default"].CSS + "image-input-message-line-feedback-"
    },
    errors: {
      errorAdjusting: "Error while adjusting the image - check the adjustment settings and that the image file is not corrupted. Nested error: %s"
    },
    lsi: {
      imageError: {
        cs: "Obrázek {0} není podporován nebo je poškozen.",
        en: "The image {0} is not supported or it is damaged.",
        sk: "Obrázok {0} nie je podporovaný alebo je poškodený."
      }
    },
    opt: {
      pureRender: true
    }
  },
  //@@viewOff:statics
  //@@viewOn:propTypes
  propTypes: {
    value: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].arrayOf(uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].object),
    onChange: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].func,
    inputProps: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].object,
    lineProps: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].object,
    onRemove: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].func,
    onLoad: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].func,
    width: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number, uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string]),
    height: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number, uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string]),
    type: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string,
    rotation: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOf(["auto"]), uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number]),
    quality: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number,
    previewWidth: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number,
    previewHeight: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number,
    previewShape: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string,
    cumulativeOnChange: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].bool
  },
  //@@viewOff:propTypes
  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      value: null,
      onChange: null,
      inputProps: null,
      lineProps: null,
      onRemove: null,
      onLoad: null,
      width: null,
      height: null,
      type: null,
      rotation: null,
      quality: null,
      previewWidth: null,
      previewHeight: null,
      previewShape: null,
      cumulativeOnChange: null
    };
  },
  //@@viewOff:getDefaultProps
  //@@viewOn:standardComponentLifeCycle
  componentDidMount: function componentDidMount() {
    if (this.props.value) this._readjustImages(this.props.value, this.props);
  },
  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {
    var needsFullReadjustment = nextProps.rotation != this.props.rotation || nextProps.type != this.props.type || nextProps.quality != this.props.quality || nextProps.width != this.props.width || nextProps.height != this.props.height;

    var valueHasNewItems = this._hasValueNewItems(nextProps.value, this.props.value);

    if ((needsFullReadjustment || valueHasNewItems) && nextProps.value && typeof nextProps.onChange === "function") {
      this._readjustImages(nextProps.value, nextProps, needsFullReadjustment);
    }
  },
  //@@viewOff:standardComponentLifeCycle
  //@@viewOn:interface
  //@@viewOff:interface
  //@@viewOn:overridingMethods
  //@@viewOff:overridingMethods
  //@@viewOn:componentSpecificHelpers
  _hasValueNewItems: function _hasValueNewItems(value, oldValue) {
    var result = false;

    if (value) {
      var existingMap = {};
      if (oldValue) oldValue.forEach(function (item) {
        return existingMap[item.id] = item;
      });

      for (var k in value) {
        if (!(k in existingMap)) {
          result = true;
          break;
        }
      }
    }

    return result;
  },
  _readjustImages: function () {
    var _readjustImages2 = _asyncToGenerator(
    /*#__PURE__*/
    regeneratorRuntime.mark(function _callee(imageItems, props, processAllItems) {
      var _this = this;

      var cumulativeOnChange, cumulatedOnChangeData, promises, opt;
      return regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              cumulativeOnChange = props.cumulativeOnChange;
              promises = imageItems.map(function (imageItem) {
                var value = imageItem.originalValue || imageItem.value;

                if (value instanceof Blob && (processAllItems || (imageItem.originalValue == null || imageItem.value == null) && !imageItem.error)) {
                  return _this._adjustImage(value, props).catch(function (error) {
                    if (_this.isRendered()) {
                      _this.showError("errorAdjusting", [error]);
                    }
                  }).then(function (imageData) {
                    if (_this.isRendered() && typeof props.onChange === "function") {
                      var item;

                      if (imageData) {
                        var imageFile = imageData.imageFile,
                            imageSrc = imageData.imageSrc;
                        item = {
                          id: imageItem.id,
                          value: imageFile,
                          originalValue: imageItem.originalValue || imageItem.value,
                          src: imageSrc,
                          name: imageFile.name
                        };
                      } else {
                        item = {
                          id: imageItem.id,
                          value: null,
                          originalValue: imageItem.originalValue || imageItem.value,
                          src: null,
                          error: _this.getLsi("imageError"),
                          name: imageItem.name || (imageItem.value || {}).name || (imageItem.originalValue || {}).name
                        };
                      }

                      var optData = _defineProperty({}, item.id, item);

                      if (!cumulativeOnChange) {
                        var opt = {
                          component: _this,
                          data: optData
                        };
                        props.onChange(opt);
                      } else {
                        cumulatedOnChangeData = _objectSpread({}, cumulatedOnChangeData, optData);
                      }
                    }
                  });
                }
              });
              _context.next = 4;
              return Promise.all(promises.filter(Boolean));

            case 4:
              if (cumulativeOnChange && this.isRendered() && typeof props.onChange === "function") {
                opt = {
                  component: this,
                  data: cumulatedOnChangeData
                };
                props.onChange(opt);
              }

            case 5:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, this);
    }));

    function _readjustImages(_x, _x2, _x3) {
      return _readjustImages2.apply(this, arguments);
    }

    return _readjustImages;
  }(),
  _onChange: function _onChange(newFiles) {
    if (typeof this.props.onChange === "function") {
      this._readjustImages(newFiles, this.props);
    }
  },
  _adjustImage: function _adjustImage(file, props) {
    var resultImage = Promise.resolve({
      imageSrc: URL.createObjectURL(file),
      imageFile: file
    });

    if (props.rotation) {
      resultImage = resultImage.then(function (_ref) {
        var imageFile = _ref.imageFile,
            imageSrc = _ref.imageSrc;
        URL.revokeObjectURL(imageSrc);
        return _adjustment__WEBPACK_IMPORTED_MODULE_5__["default"].rotate(imageFile, props.rotation, file);
      });
    }

    if (props.width || props.height) {
      resultImage = resultImage.then(function (_ref2) {
        var imageFile = _ref2.imageFile,
            imageSrc = _ref2.imageSrc;
        URL.revokeObjectURL(imageSrc);
        return _adjustment__WEBPACK_IMPORTED_MODULE_5__["default"].resize(imageFile, props.width, props.height);
      });
    }

    if (props.type) {
      resultImage = resultImage.then(function (_ref3) {
        var imageFile = _ref3.imageFile,
            imageSrc = _ref3.imageSrc;
        URL.revokeObjectURL(imageSrc);
        return _adjustment__WEBPACK_IMPORTED_MODULE_5__["default"].changeType(imageFile, props.type, props.quality);
      });
    }

    return resultImage;
  },
  _getLine: function _getLine() {
    var className = this.getClassName("line");
    className += " " + this.getClassName("lineFeedback") + this.props.lineProps.feedback;
    return uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0__["Bricks"].Line, _extends({
      key: "line"
    }, {
      className: className
    }));
  },
  _getImages: function _getImages() {
    var _this2 = this;

    return this.props.value ? this.props.value.map(function (image) {
      if (!image.id) image.id = uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Tools.generateUUID();
      return uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create(_image_input_item_js__WEBPACK_IMPORTED_MODULE_4__["default"], {
        key: image.id,
        error: image.error,
        readOnly: (_this2.props.inputProps || {}).readOnly || (_this2.props.inputProps || {}).disabled,
        progress: image.progress,
        imageId: image.id,
        imageSrc: image.src || image.uri,
        imageName: image.name || (image.value || {}).name || (image.originalValue || {}).name,
        onRemove: _this2.props.onRemove,
        previewWidth: _this2.props.previewWidth,
        previewHeight: _this2.props.previewHeight,
        previewShape: _this2.props.previewShape
      });
    }) : null;
  },
  //@@viewOff:componentSpecificHelpers
  //@@viewOn:render
  render: function render() {
    return [this.props.inputProps.display ? uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create(_image_input_js__WEBPACK_IMPORTED_MODULE_3__["default"], _extends({
      key: "input"
    }, this.props.inputProps, {
      onChange: this._onChange
    })) : null, this.props.value ? uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create("div", {
      key: "images",
      className: this.getClassName("wrapper")
    }, this._getImages()) : null, this.props.lineProps.display ? this._getLine() : null];
  } //@@viewOn:render

});
/* harmony default export */ __webpack_exports__["default"] = (ImageInputAdjustment);

/***/ }),
/* 41 */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(42);

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":false}

options.transform = transform
options.insertInto = function anonymous(
) {
return __webpack_require__(12)();
};

var update = __webpack_require__(13)(content, options);

if(content.locals) module.exports = content.locals;



/***/ }),
/* 42 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(11)(false);
// Module
exports.push([module.i, ".uu5-imaging-image-input-wrapper {\n  margin-top: 8px;\n}\n.uu5-imaging-image-input-message-line {\n  margin: 6px 0 0 0;\n}\n.uu5-imaging-image-input-message-line-feedback-error {\n  background-color: #d50000;\n}\n.uu5-imaging-image-input-message-line-feedback-warning {\n  background-color: #ff9800;\n}\n.uu5-imaging-image-input-message-line-feedback-success {\n  background-color: #4faf50;\n}\n.uu5-imaging-image-input-message-line-feedback-initial {\n  background-color: rgba(0, 0, 0, 0.34);\n}\n", ""]);



/***/ }),
/* 43 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Input", function() { return Input; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(18);
/* harmony import */ var uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _image_input_less__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(44);
/* harmony import */ var _image_input_less__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_image_input_less__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7);
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }





var Input = uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].VisualComponent.create({
  //@@viewOn:mixins
  mixins: [uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].BaseMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].ElementaryMixin],
  //@@viewOff:mixins
  //@@viewOn:statics
  statics: {
    tagName: _config_config_js__WEBPACK_IMPORTED_MODULE_3__["default"].TAG + "ImageInput",
    classNames: {
      main: _config_config_js__WEBPACK_IMPORTED_MODULE_3__["default"].CSS + "image-input",
      input: _config_config_js__WEBPACK_IMPORTED_MODULE_3__["default"].CSS + "image-input-file-input",
      placeholder: _config_config_js__WEBPACK_IMPORTED_MODULE_3__["default"].CSS + "image-input-placeholder",
      dragover: _config_config_js__WEBPACK_IMPORTED_MODULE_3__["default"].CSS + "image-input-dragover"
    }
  },
  //@@viewOff:statics
  //@@viewOn:propTypes
  propTypes: {
    onChange: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].func,
    placeholder: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].object, uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string]),
    multiple: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].bool,
    readOnly: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].bool,
    loading: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].bool,
    inputWidth: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string,
    borderRadius: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string,
    bgStyle: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOf(["filled", "outline", "transparent", "underline"]),
    elevation: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOf(["-1", "0", "1", "2", "3", "4", "5", -1, 0, 1, 2, 3, 4, 5])
  },
  //@@viewOff:propTypes
  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      onChange: null,
      placeholder: null,
      multiple: false,
      readOnly: false,
      loading: false,
      inputWidth: null,
      borderRadius: null,
      bgStyle: null,
      elevation: null
    };
  },
  //@@viewOff:getDefaultProps
  //@@viewOn:standardComponentLifeCycle
  getInitialState: function getInitialState() {
    return {
      dragover: false
    };
  },
  componentDidMount: function componentDidMount() {
    if (this._visualInput) {
      uu5g04__WEBPACK_IMPORTED_MODULE_0__["Environment"].EventListener.addEvent(this._visualInput, "dragover", this.getId(), this._handleDragOver);
      uu5g04__WEBPACK_IMPORTED_MODULE_0__["Environment"].EventListener.addEvent(this._visualInput, "dragleave", this.getId(), this._handleDragLeave);
      uu5g04__WEBPACK_IMPORTED_MODULE_0__["Environment"].EventListener.addEvent(this._visualInput, "drop", this.getId(), this._handleFileSelect);
    }
  },
  componentWillUnmount: function componentWillUnmount() {
    if (this._visualInput) {
      uu5g04__WEBPACK_IMPORTED_MODULE_0__["Environment"].EventListener.removeEvent(this._visualInput, "dragover", this.getId());
      uu5g04__WEBPACK_IMPORTED_MODULE_0__["Environment"].EventListener.removeEvent(this._visualInput, "dragleave", this.getId());
      uu5g04__WEBPACK_IMPORTED_MODULE_0__["Environment"].EventListener.removeEvent(this._visualInput, "drop", this.getId());
      uu5g04__WEBPACK_IMPORTED_MODULE_0__["Environment"].EventListener.removeWindowEvent("keyup", this.getId());
    }
  },
  //@@viewOff:standardComponentLifeCycle
  //@@viewOn:interface
  //@@viewOff:interface
  //@@viewOn:overridingMethods
  //@@viewOff:overridingMethods
  //@@viewOn:componentSpecificHelpers
  _handleDragOver: function _handleDragOver(e) {
    e.stopPropagation();
    e.preventDefault();
    e.dataTransfer.dropEffect = "copy";
    this.setState({
      dragover: true
    });
  },
  _handleDragLeave: function _handleDragLeave(e) {
    e.stopPropagation();
    e.preventDefault();
    this.setState({
      dragover: false
    });
  },
  _handleFileSelect: function _handleFileSelect(e) {
    var _this = this;

    e.stopPropagation();
    e.preventDefault();

    if (e.dataTransfer.files) {
      this.setState({
        dragover: false
      }, function () {
        return _this._onChange(e.dataTransfer.files);
      });
    }
  },
  _onFocus: function _onFocus() {
    var _this2 = this;

    uu5g04__WEBPACK_IMPORTED_MODULE_0__["Environment"].EventListener.addWindowEvent("keyup", this.getId(), function (e) {
      var isEnter = e.which === 13;
      isEnter && !_this2.isDisabled() && _this2._open();
    });
  },
  _onBlur: function _onBlur() {
    uu5g04__WEBPACK_IMPORTED_MODULE_0__["Environment"].EventListener.removeWindowEvent("keyup", this.getId());
  },
  _onChange: function _onChange(list) {
    // NOTE "list" might not be Array, nor iterable (in Edge) but it has "length" and access via indices.
    if (list) {
      var files = [];

      for (var i = 0; i < list.length; ++i) {
        var file = list[i];
        files.push({
          id: uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Tools.generateUUID(),
          value: file,
          name: file.name
        });
      }

      if (files.length) {
        uu5g04__WEBPACK_IMPORTED_MODULE_0__["Environment"].EventListener.removeWindowEvent("keyup", this.getId());
        this.props.onChange(files);
      }
    }
  },
  _open: function _open() {
    this._input.click();

    return this;
  },
  _getInputWidth: function _getInputWidth() {
    return this.props.inputWidth === "auto" ? null : this.props.inputWidth;
  },
  _getMainAttrs: function _getMainAttrs() {
    var _this3 = this;

    var mainAttrs = this.getMainAttrs();
    var visulInputClassName = this.getClassName("main");

    if (this.state.dragover) {
      visulInputClassName += " " + this.getClassName("dragover");
    }

    mainAttrs = Object.assign(mainAttrs, {
      ref: function ref(visualInput) {
        return _this3._visualInput = visualInput;
      },
      className: visulInputClassName + (mainAttrs.className ? " " + mainAttrs.className : ""),
      tabIndex: !this.props.readOnly && !this.props.disabled ? "0" : null,
      onClick: !this.props.readOnly && !this.props.disabled && !this.props.loading ? function () {
        return _this3._open();
      } : null,
      onFocus: this._onFocus,
      onBlur: this._onBlur
    });
    mainAttrs.style = _objectSpread({}, mainAttrs.style, {
      borderRadius: this.props.borderRadius
    });

    if (this.props.elevation) {
      mainAttrs.className += " " + uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].ClassNames.elevation + this.props.elevation;
    }

    if (this.props.bgStyle) {
      mainAttrs.className += " " + uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].ClassNames[this.props.bgStyle];
    }

    if (this.props.inputWidth) {
      mainAttrs = uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Tools.mergeDeep(mainAttrs, {
        style: {
          width: this._getInputWidth()
        }
      });
    }

    return mainAttrs;
  },
  _getInput: function _getInput() {
    var _this4 = this;

    var inputAttrs = {
      onChange: function onChange(e) {
        return _this4._onChange(e.target.files);
      },
      type: "file",
      accept: "image/*",
      key:  true ? Math.random() : undefined,
      // onChange is always only simulated in Jest tests so no need for different keys (and random just screws up snapshots)
      id: this.getId() + "-hidden-input",
      className: this.getClassName("input"),
      ref: function ref(item) {
        return _this4._input = item;
      },
      multiple: this.props.multiple,
      disabled: this.props.disabled || this.props.readOnly,
      files: null
    };
    return uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create("div", this._getMainAttrs(), uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create("span", {
      className: this.getClassName("placeholder")
    }, this.props.placeholder), uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0__["Bricks"].Icon, {
      icon: "mdi-image"
    }), uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create("input", inputAttrs));
  },
  //@@viewOff:componentSpecificHelpers
  //@@viewOn:render
  render: function render() {
    return this._getInput();
  } //@@viewOn:render

});
/* harmony default export */ __webpack_exports__["default"] = (Input);

/***/ }),
/* 44 */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(45);

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":false}

options.transform = transform
options.insertInto = function anonymous(
) {
return __webpack_require__(12)();
};

var update = __webpack_require__(13)(content, options);

if(content.locals) module.exports = content.locals;



/***/ }),
/* 45 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(11)(false);
// Module
exports.push([module.i, ".uu5-imaging-image-input {\n  position: relative;\n  line-height: 1.42857143;\n  background-color: #ffffff;\n  background-image: none;\n  border: 1px dashed #bdbdbd;\n  border-radius: 4px;\n  outline: none;\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n  display: flex;\n  flex-direction: column;\n  align-items: normal;\n  justify-content: space-around;\n  color: rgba(0, 0, 0, 0.87);\n  cursor: pointer;\n  width: 100%;\n}\n.uu5-imaging-image-input .uu5-bricks-icon {\n  left: 0;\n  top: 0;\n  right: auto;\n  color: rgba(0, 0, 0, 0.54);\n  vertical-align: baseline;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  vertical-align: middle;\n  text-align: center;\n  height: 100%;\n}\n.uu5-imaging-image-input.uu5-common-bg-style-underline {\n  border-width: 0 0 1px 0;\n  border-radius: 0;\n}\n.uu5-imaging-image-input.uu5-common-bg-style-filled,\n.uu5-imaging-image-input.uu5-common-bg-style-transparent {\n  border-width: 0;\n}\n.uu5-forms-input-read-only .uu5-imaging-image-input {\n  cursor: default;\n}\n.uu5-imaging-image-input:hover {\n  background-color: #e0e0e0;\n  border-color: #bdbdbd;\n}\n.uu5-imaging-image-input:focus,\n.uu5-imaging-image-input.uu5-imaging-image-input-dragover {\n  background-color: #e3f2fd;\n  border-color: #2196f3;\n}\n.uu5-imaging-image-input-placeholder {\n  display: inline-block;\n}\n.uu5-imaging-image-input-file-input {\n  position: absolute;\n  visibility: hidden;\n  height: 0;\n  width: 0;\n}\n/* SIZES */\n.uu5-forms-input-s .uu5-imaging-image-input {\n  min-height: 24px;\n}\n.uu5-forms-input-s .uu5-imaging-image-input .uu5-bricks-icon {\n  padding: 4px;\n  font-size: 16px;\n}\n.uu5-forms-input-s .uu5-imaging-image-input-placeholder {\n  font-size: 12px;\n  margin-left: 28px;\n}\n.uu5-forms-input-m .uu5-imaging-image-input {\n  min-height: 32px;\n}\n.uu5-forms-input-m .uu5-imaging-image-input .uu5-bricks-icon {\n  padding: 6px;\n  font-size: 20px;\n}\n.uu5-forms-input-m .uu5-imaging-image-input-placeholder {\n  font-size: 14px;\n  margin-left: 34px;\n}\n.uu5-forms-input-l .uu5-imaging-image-input {\n  min-height: 40px;\n}\n.uu5-forms-input-l .uu5-imaging-image-input .uu5-bricks-icon {\n  padding: 7px;\n  font-size: 26px;\n}\n.uu5-forms-input-l .uu5-imaging-image-input-placeholder {\n  font-size: 16px;\n  margin-left: 41px;\n}\n.uu5-forms-input-xl .uu5-imaging-image-input {\n  min-height: 48px;\n}\n.uu5-forms-input-xl .uu5-imaging-image-input .uu5-bricks-icon {\n  padding: 7px;\n  font-size: 34px;\n}\n.uu5-forms-input-xl .uu5-imaging-image-input-placeholder {\n  font-size: 18px;\n  margin-left: 49px;\n}\n", ""]);



/***/ }),
/* 46 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageInputItem", function() { return ImageInputItem; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(18);
/* harmony import */ var uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _image_input_item_less__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(47);
/* harmony import */ var _image_input_item_less__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_image_input_item_less__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7);
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }



 // import Loading from "./image-loading.js";


var TRANSPARENT_IMAGE_DATA_URI = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";
var ImageInputItem = uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].VisualComponent.create({
  //@@viewOn:mixins
  mixins: [uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].BaseMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].ElementaryMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].PureRenderMixin],
  //@@viewOff:mixins
  //@@viewOn:statics
  statics: {
    tagName: _config_config_js__WEBPACK_IMPORTED_MODULE_3__["default"].TAG + "ImageInputItem",
    classNames: {
      main: _config_config_js__WEBPACK_IMPORTED_MODULE_3__["default"].CSS + "image-input-item",
      image: _config_config_js__WEBPACK_IMPORTED_MODULE_3__["default"].CSS + "image-input-item-image",
      imageWrapper: _config_config_js__WEBPACK_IMPORTED_MODULE_3__["default"].CSS + "image-input-item-image-wrapper",
      buttonBar: _config_config_js__WEBPACK_IMPORTED_MODULE_3__["default"].CSS + "image-input-item-button-bar",
      name: _config_config_js__WEBPACK_IMPORTED_MODULE_3__["default"].CSS + "image-input-item-name",
      nameError: _config_config_js__WEBPACK_IMPORTED_MODULE_3__["default"].CSS + "image-input-item-name-error",
      error: _config_config_js__WEBPACK_IMPORTED_MODULE_3__["default"].CSS + "image-input-item-error",
      errorIcon: _config_config_js__WEBPACK_IMPORTED_MODULE_3__["default"].CSS + "image-input-item-error-icon",
      loading: _config_config_js__WEBPACK_IMPORTED_MODULE_3__["default"].CSS + "image-input-item-loading",
      loadingComponent: _config_config_js__WEBPACK_IMPORTED_MODULE_3__["default"].CSS + "image-input-item-loading-component"
    },
    defaults: {
      aspectRatioShapesRegexp: /^((rounded)?square|circle|(rounded)?rect\d+x\d+)$/i
    },
    opt: {
      pureRender: true
    }
  },
  //@@viewOff:statics
  //@@viewOn:propTypes
  propTypes: {
    imageSrc: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string,
    imageName: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string,
    imageId: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string,
    onRemove: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].func,
    onAbort: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].func,
    progress: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number,
    readOnly: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].bool,
    error: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].any,
    previewWidth: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number,
    previewHeight: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number,
    previewShape: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string
  },
  //@@viewOff:propTypes
  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      imageSrc: null,
      imageName: null,
      onRemove: null,
      onAbort: null,
      progress: null,
      readOnly: null,
      error: null,
      previewWidth: null,
      previewHeight: null,
      previewShape: null
    };
  },
  //@@viewOff:getDefaultProps
  //@@viewOn:standardComponentLifeCycle
  //@@viewOff:standardComponentLifeCycle
  //@@viewOn:interface
  //@@viewOff:interface
  //@@viewOn:overridingMethods
  //@@viewOff:overridingMethods
  //@@viewOn:componentSpecificHelpers
  _getButtonBar: function _getButtonBar() {
    var _this = this;

    return !this.props.readOnly ? uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create("div", {
      className: this.getClassName("buttonBar")
    }, uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0__["Bricks"].Button, {
      onClick: function onClick() {
        return _this.props.onRemove(_this.props.imageId);
      },
      content: uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0__["Bricks"].Icon, {
        icon: "mdi-delete"
      })
    })) : null;
  },
  _getLoading: function _getLoading() {
    return (// <Loading value={this.props.progress} iconAttrs={{ mainAttrs: { onClick: this.props.onAbort } }} />
      uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0__["Bricks"].Loading, {
        className: this.getClassName("loadingComponent")
      })
    );
  },
  _getError: function _getError() {
    return uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create("div", {
      className: this.getClassName("error")
    }, uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0__["Bricks"].Icon, {
      icon: "mdi-alert-circle",
      className: this.getClassName("errorIcon")
    }));
  },
  //@@viewOff:componentSpecificHelpers
  //@@viewOn:render
  render: function render() {
    var _this$props = this.props,
        imageSrc = _this$props.imageSrc,
        progress = _this$props.progress,
        imageName = _this$props.imageName,
        error = _this$props.error,
        previewShape = _this$props.previewShape;
    var isLoading = !error && typeof progress === "number" && progress < 100;
    var mainAttrs = this.getMainAttrs();
    if (isLoading) mainAttrs.className = (mainAttrs.className || "") + " " + this.getClassName("loading");
    var width = this.props.previewWidth;
    var height = this.props.previewHeight;

    if (height == null && previewShape && !previewShape.match(this.getDefault("aspectRatioShapesRegexp"))) {
      height = width;
    }

    return uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create("span", _extends({}, mainAttrs, {
      style: {
        width: width
      }
    }), uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create("div", {
      className: this.getClassName("imageWrapper")
    }, (imageSrc || error) && uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0__["Imaging"].Image, {
      authenticate: true,
      blackBackground: false,
      src: imageSrc || TRANSPARENT_IMAGE_DATA_URI,
      className: this.getClassName("image"),
      width: width,
      height: height,
      shape: this.props.previewShape,
      fit: "coverNoScaleUp"
    }), error && this._getError(), this._getButtonBar(), isLoading ? this._getLoading() : null), uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create("div", {
      className: this.getClassName("name") + (error ? " " + this.getClassName("nameError") : ""),
      title: imageName
    }, imageName || "\xa0"));
  } //@@viewOn:render

});
/* harmony default export */ __webpack_exports__["default"] = (ImageInputItem);

/***/ }),
/* 47 */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(48);

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":false}

options.transform = transform
options.insertInto = function anonymous(
) {
return __webpack_require__(12)();
};

var update = __webpack_require__(13)(content, options);

if(content.locals) module.exports = content.locals;



/***/ }),
/* 48 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(11)(false);
// Module
exports.push([module.i, ".uu5-imaging-image-input-item {\n  position: relative;\n  display: inline-block;\n  width: 100px;\n  max-width: 100%;\n  vertical-align: top;\n}\n.uu5-imaging-image-input-item-button-bar {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  z-index: 1;\n}\n.uu5-imaging-image-input-item-button-bar > .uu5-bricks-button {\n  width: 24px;\n  height: 24px;\n  min-height: 24px;\n  padding: 0;\n  background-color: rgba(255, 255, 255, 0.8);\n  box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.5);\n  border-radius: 4px;\n}\n.uu5-imaging-image-input-item-button-bar > .uu5-bricks-button:not(:last-child) {\n  margin-right: 4px;\n}\n.uu5-imaging-image-input-item-button-bar > .uu5-bricks-button > .uu5-bricks-icon {\n  font-size: 20px;\n  margin: 0;\n  padding: 0;\n  color: rgba(0, 0, 0, 0.54);\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n.uu5-imaging-image-input-item:not(:last-child) {\n  margin-right: 8px;\n}\n.uu5-imaging-image-input-item-image-wrapper {\n  position: relative;\n  display: inline-block;\n}\n.uu5-imaging-image-input-item-image {\n  vertical-align: top;\n}\n.uu5-imaging-image-input-item-loading-component {\n  position: absolute;\n  top: 50%;\n  left: 0;\n  right: 0;\n  transform: translateY(-50%);\n  pointer-events: none;\n}\n.uu5-imaging-image-input-item-loading > .uu5-imaging-image-input-item-image,\n.uu5-imaging-image-input-item-loading > .uu5-imaging-image-input-item-name {\n  opacity: 0.42;\n}\n.uu5-imaging-image-input-item-error {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  text-align: center;\n  background: rgba(0, 0, 0, 0.12);\n  border: 2px solid #d50000;\n  color: #d50000;\n  border-radius: 2px;\n  pointer-events: none;\n}\n.uu5-imaging-image-input-item-error > .uu5-imaging-image-input-item-error-icon {\n  /* requires specificity (0, 2, 0) to override */\n  position: static;\n}\n.uu5-imaging-image-input-item-name {\n  font-size: 10px;\n  color: rgba(0, 0, 0, 0.87);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.uu5-imaging-image-input-item-name-error {\n  color: rgba(213, 0, 0, 0.87);\n}\n", ""]);



/***/ }),
/* 49 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImagePasteHandlerMixin", function() { return ImagePasteHandlerMixin; });
var instances = {};
var InstanceCounter = {
  getInstances: function getInstances(tagName) {
    return instances[tagName] || [];
  },
  Mixin: {
    componentDidMount: function componentDidMount() {
      var compInstances = instances[this.getTagName()];
      if (!compInstances) compInstances = instances[this.getTagName()] = [];
      compInstances.push(this);
    },
    componentWillUnmount: function componentWillUnmount() {
      var compInstances = instances[this.getTagName()];

      if (compInstances) {
        var idx = compInstances.indexOf(this);
        if (idx != -1) compInstances.splice(idx, 1);
      }
    }
  }
};
var ImagePasteHandlerMixin = {
  mixins: [InstanceCounter.Mixin],
  componentDidMount: function componentDidMount() {
    if (!this.pasteImages_) throw new Error("ImagePasteHandler requires method pasteImages_(blobs) to be defined.");

    if (InstanceCounter.getInstances("UU5.Imaging.Input").length + InstanceCounter.getInstances("UU5.Imaging.UploadInput").length === 1) {
      document.addEventListener("paste", handleDocumentPaste);
    }
  },
  componentWillUnmount: function componentWillUnmount() {
    if (InstanceCounter.getInstances("UU5.Imaging.Input").length + InstanceCounter.getInstances("UU5.Imaging.UploadInput").length === 0) {
      document.removeEventListener("paste", handleDocumentPaste);
    }
  }
}; // NOTE This method must not be instance method (or mount/unmount listener registering would have to change).

function handleDocumentPaste(e) {
  if (e.repeat !== true) {
    // find out how many instances of Input / UploadInput components are present & visible
    var _instances = InstanceCounter.getInstances("UU5.Imaging.Input").concat(InstanceCounter.getInstances("UU5.Imaging.UploadInput"));

    var pastableInstances = _instances.filter(function (it) {
      var result = false;

      if (!it.props.ignorePaste) {
        var domNode = it.findDOMNode(); // eslint-disable-line

        if (domNode) {
          var computedStyle = getComputedStyle(domNode);
          if (computedStyle.visibility !== "hidden" && computedStyle.display !== "none") result = true;
        }
      }

      return result;
    });

    if (pastableInstances.length === 1) {
      // paste images to the component
      var items = (e.clipboardData || e.originalEvent.clipboardData || {}).items;
      var blobs = [];

      for (var index in items) {
        var item = items[index];

        if (item.kind === "file" && item.type && item.type.match(/^image\//)) {
          var blob = item.getAsFile();
          blobs.push(blob);
        }
      }

      if (blobs.length > 0) {
        var component = pastableInstances[0];
        component.pasteImages_(blobs);
      }
    }
  }
}

/***/ }),
/* 50 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UploadInput", function() { return UploadInput; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(18);
/* harmony import */ var uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var uu5g04_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(36);
/* harmony import */ var uu5g04_forms__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(uu5g04_forms__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _adjustment_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(37);
/* harmony import */ var _upload_input_less__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(51);
/* harmony import */ var _upload_input_less__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_upload_input_less__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _internal_image_input_adjustment_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(40);
/* harmony import */ var _internal_image_paste_handler_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(49);
/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(7);
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }









var ITEM_PROP_TYPE = uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].shape({
  id: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string,
  name: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string,
  value: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].object,
  // Blob
  uri: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string,
  progress: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number,
  src: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string,
  // for displaying via <img src="..." /> (image does not have to be uploaded)
  originalValue: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].object,
  // Blob - in case image adjustment settings gets changed (we need original file)
  error: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].any
});
var UploadInput = uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].VisualComponent.create({
  //@@viewOn:mixins
  mixins: [uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].BaseMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].ElementaryMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].PureRenderMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].CallsMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].ColorSchemaMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0__["Forms"].InputMixin, _internal_image_paste_handler_js__WEBPACK_IMPORTED_MODULE_6__["ImagePasteHandlerMixin"]],
  //@@viewOff:mixins
  //@@viewOn:statics
  statics: {
    tagName: _config_config_js__WEBPACK_IMPORTED_MODULE_7__["default"].TAG + "UploadInput",
    classNames: {
      main: _config_config_js__WEBPACK_IMPORTED_MODULE_7__["default"].CSS + "upload-input"
    },
    lsi: {
      requiredMessage: uu5g04__WEBPACK_IMPORTED_MODULE_0__["Environment"].Lsi.Forms.message.requiredMessage,
      placeholder: {
        cs: "Nahrát obrázek",
        en: "Load image",
        sk: "Nahrať obrázok"
      },
      placeholderMulti: {
        cs: "Nahrát obrázky",
        en: "Load images",
        sk: "Nahrať obrázky"
      },
      placeholderReadOnly: {
        cs: "Nelze nahrát obrázek",
        en: "Cannot load image",
        sk: "Nie je možné nahrať obrázok"
      },
      placeholderReadOnlyMulti: {
        cs: "Nelze nahrát obrázky",
        en: "Cannot load images",
        sk: "Nie je možné nahrať obrázky"
      },
      uploadFailed: {
        cs: "Nepodařilo se nahrát obrázek {0}.",
        en: "Upload of the image  {0} failed.",
        sk: "Nepodarilo se nahrať obrázok {0}."
      }
    },
    opt: {
      pureRender: true
    },
    calls: {
      createImage: "createImage",
      updateImage: "updateImage",
      deleteImage: "deleteImage"
    }
  },
  //@@viewOff:statics
  //@@viewOn:propTypes
  propTypes: {
    value: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOfType([ITEM_PROP_TYPE, uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].arrayOf(ITEM_PROP_TYPE)]),
    placeholder: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].object, uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string]),
    multiple: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].bool,
    outputWidth: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number, uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string]),
    outputHeight: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number, uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string]),
    outputType: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOf(_adjustment_js__WEBPACK_IMPORTED_MODULE_3__["default"].OUTPUT_TYPES.concat(["jpg", "image/jpeg", "image/png"])),
    outputRotation: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOf(["auto"]), uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number]),
    outputQuality: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number,
    ignorePaste: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].bool,
    borderRadius: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string,
    bgStyle: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOf(["filled", "outline", "transparent", "underline"]),
    elevation: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].oneOf(["-1", "0", "1", "2", "3", "4", "5", -1, 0, 1, 2, 3, 4, 5]),
    previewWidth: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number,
    previewHeight: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].number,
    previewShape: uu5g04__WEBPACK_IMPORTED_MODULE_0__["PropTypes"].string
  },
  //@@viewOff:propTypes
  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      placeholder: undefined,
      multiple: false,
      outputWidth: null,
      outputHeight: null,
      outputType: null,
      outputRotation: "auto",
      outputQuality: null,
      ignorePaste: undefined,
      borderRadius: null,
      bgStyle: null,
      elevation: null,
      previewWidth: 100,
      previewHeight: null,
      previewShape: "square"
    };
  },
  //@@viewOff:getDefaultProps
  //@@viewOn:standardComponentLifeCycle
  componentWillMount: function componentWillMount() {
    if (!this.props.calls) this.setCalls({}); // TODO Remove after fix in CallMixin (throws if null and calling getCall("xyz")).

    if (typeof this.props.onValidate === "function" && this._isItemsDone(this.state.value)) {
      this._validateOnChange({
        value: this.state.value,
        event: null,
        component: this
      });
    }
  },
  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {
    var _this = this;

    if (!nextProps.multiple && this.props.multiple) {
      var needsChangeEvent = false;
      this.setState(function (_ref) {
        var value = _ref.value;
        var result;

        if (Array.isArray(value) && value.length > 1) {
          needsChangeEvent = true;
          value.slice(0, value.length - 1).forEach(function (item) {
            if (item.src) URL.revokeObjectURL(item.src);

            _this._handleDeleteImage(item);
          });
          result = {
            value: value[value.length - 1]
          };
        }

        return result;
      }, function () {
        return needsChangeEvent ? _this._triggerChangeEvent() : null;
      });
    }

    if (nextProps.controlled) {
      // FIXME Make diff against this.props and remove images from remote (pass diff to this._onChange()).
      this.setState({
        value: nextProps.value,
        feedback: nextProps.feedback,
        message: nextProps.message
      });
    }
  },
  //@@viewOff:standardComponentLifeCycle
  //@@viewOn:interface
  onChange: function onChange() {
    var opt = {
      value: this.getValue(),
      component: this,
      feedback: this.state.feedback,
      message: this.state.message
    };

    if (!this.isComputedDisabled() && !this.isReadOnly()) {
      if (typeof this.props.onChange === "function") {
        this.props.onChange(opt);
      } else {
        this.onChangeDefault(opt);
      }
    }

    return this;
  },
  onChangeDefault: function onChangeDefault(opt) {
    if (typeof this.props.onValidate === "function") {
      this._validateOnChange({
        value: opt.value,
        event: opt.event,
        component: this
      });
    }

    return this;
  },
  isValid: function isValid() {
    var feedback = this.getFeedback();
    var value = this.getValue();
    var result = true;

    if (this.props.required && (value == null || value.length === 0)) {
      this.setError(this.props.requiredMessage || this.getLsiValue("requiredMessage")); // TODO Why modify state?

      result = false;
    } else if (feedback === "error" || feedback === "loading-internal" || feedback === "loading") {
      result = false;
    }

    if (result && this.props.onValidate) {
      var validation = this.props.onValidate({
        value: value,
        component: this
      });

      if (validation && _typeof(validation) === "object") {
        if (validation.feedback === "error") {
          result = false;
        }
      }
    }

    return result;
  },
  //@@viewOff:interface
  //@@viewOn:overridingMethods
  setValue_: function setValue_(value, setStateCallback) {
    if (this._checkRequired({
      value: value
    })) {
      if (typeof this.props.onValidate === "function") {
        this._validateOnChange({
          value: value,
          event: null,
          component: this
        });
      } else {
        this.setInitial(null, value, setStateCallback);
      }
    }

    return this;
  },
  getValue_: function getValue_() {
    var value = this.state.value;
    if (this.props.multiple && value && !Array.isArray(value)) value = [value];else if (!this.props.multiple && Array.isArray(value)) value = value[0];
    return value;
  },
  pasteImages_: function pasteImages_(imageBlobs) {
    var _this2 = this;

    var blobs = this.props.multiple ? imageBlobs : imageBlobs.slice(-1);

    if (blobs.length > 0) {
      this.setState(function (_ref2) {
        var value = _ref2.value;
        if (!_this2.props.multiple) value = [];else value = value && !Array.isArray(value) ? [value] : value || [];
        value = value.concat(blobs.map(function (blob) {
          return {
            id: uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Tools.generateUUID(),
            originalValue: blob,
            name: blob.name
          };
        }));
        if (!_this2.props.multiple) value = value[value.length - 1];
        return {
          value: value
        };
      });
    }
  },
  //@@viewOff:overridingMethods
  //@@viewOn:componentSpecificHelpers
  _triggerChangeEvent: function _triggerChangeEvent() {
    var _this3 = this;

    this._updateFeedbackFromValue(function () {
      // trigger props.onChange only after all items are finished (uploaded / failed)
      if (_this3._isItemsDone(_this3.state.value)) _this3.onChange();
    });
  },
  _validateOnChange: function _validateOnChange(opt) {
    var result = typeof this.props.onValidate === "function" ? this.props.onValidate(opt) : null;

    if (result) {
      if (_typeof(result) === "object") {
        if (result.feedback) {
          this._setFeedback(result.feedback, result.message, result.value);
        } else {
          this.setState({
            value: opt.value
          });
        }
      } else {
        this.showError("validateError", null, {
          context: {
            func: this.props.onValidate,
            result: result
          }
        });
      }
    }

    return this;
  },
  _checkRequired: function _checkRequired(opt) {
    var result = true;

    if (this.props.required && (!opt.value || opt.value.length === 0) && this.shouldValidateRequired()) {
      result = false;
      this.setError(this.props.requiredMessage || this.getLsiComponent("requiredMessage"), opt.value);
    }

    return result;
  },
  _isItemsDone: function _isItemsDone(value) {
    var valueArr = value && !Array.isArray(value) ? [value] : value;
    return !valueArr || !this.getCall("createImage") || valueArr.every(function (item) {
      return item.uri || item.error;
    });
  },
  _onChange: function _onChange(opt) {
    var _this4 = this;

    var data = opt.data;

    if (data) {
      this.setState(function (_ref3) {
        var value = _ref3.value;

        var _loop = function _loop(k) {
          var modifiedItem = data[k];
          value = _this4._replaceStateItem(value, k, function (existingItem) {
            var result = existingItem;

            if (!existingItem) {
              // new image
              result = Object.assign({}, modifiedItem, modifiedItem.uri ? null : {
                progress: 0
              });
              if (!result.uri) _this4._handleCreateImage(result);
            } else if (modifiedItem) {
              result = modifiedItem;

              if (existingItem.value !== modifiedItem.value) {
                // existing image got changed
                if (modifiedItem.value && existingItem.uri) {
                  result = Object.assign({}, modifiedItem, {
                    uri: existingItem.uri,
                    progress: 0
                  });

                  _this4._handleUpdateImage(result);
                } else if (modifiedItem.value) {
                  result = Object.assign({}, modifiedItem, modifiedItem.uri ? null : {
                    progress: 0
                  });
                  if (!result.uri) _this4._handleCreateImage(result);
                } else {
                  _this4._handleDeleteImage(existingItem);
                }
              }
            } else {
              // image removed
              _this4._handleDeleteImage(existingItem);

              result = null;
            }

            return result;
          });
        };

        for (var k in data) {
          _loop(k);
        }

        return {
          value: value
        };
      }, function () {
        _this4._updateFeedbackFromValue();
      });
    }
  },
  _handleCreateImage: function _handleCreateImage(imageItem) {
    var _this5 = this;

    var value = imageItem.value,
        id = imageItem.id;
    return new Promise(function (resolve, reject) {
      var call = _this5.getCall("createImage");

      if (call) {
        var dtoIn = {
          data: {
            value: value
          },
          progress: function progress(progressData) {
            return _this5._handleCreateImageProgress({
              id: id,
              data: progressData
            });
          },
          done: function done(resolveData) {
            return resolve({
              id: id,
              data: resolveData
            });
          },
          fail: reject
        };
        call(dtoIn);
      } else {
        resolve({
          id: id,
          data: null
        });
      }
    }).then(this._handleCreateImageDone, function (e) {
      return _this5._handleCreateImageFail({
        id: id,
        data: e
      });
    });
  },
  _handleCreateImageDone: function _handleCreateImageDone(_ref4) {
    var _this6 = this;

    var id = _ref4.id,
        data = _ref4.data;
    this.setState(function (_ref5) {
      var value = _ref5.value;
      var uri = data ? data.uri : null;

      var newValue = _this6._replaceStateItem(value, id, function (existingItem) {
        var result = existingItem;
        if (existingItem) result = Object.assign({}, existingItem, {
          uri: uri,
          error: false,
          progress: 100
        });else _this6._handleDeleteImage({
          id: id,
          uri: uri
        });
        return result;
      });

      return newValue === value ? undefined : {
        value: newValue
      };
    }, this._triggerChangeEvent);
  },
  _handleCreateImageFail: function _handleCreateImageFail(_ref6) {
    var _this7 = this;

    var id = _ref6.id,
        data = _ref6.data;
    uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Tools.error(data);
    this.setState(function (_ref7) {
      var value = _ref7.value;

      var newValue = _this7._replaceStateItem(value, id, function (existingItem) {
        return existingItem ? Object.assign({}, existingItem, {
          uri: null,
          error: _this7.getLsi("uploadFailed"),
          progress: 100
        }) : existingItem;
      });

      return newValue === value ? undefined : {
        value: newValue
      };
    }, this._triggerChangeEvent);
  },
  _handleCreateImageProgress: function _handleCreateImageProgress(_ref8) {
    var _this8 = this;

    var id = _ref8.id,
        data = _ref8.data;
    var progress = data.progress;
    this.setState(function (_ref9) {
      var value = _ref9.value;

      var newValue = _this8._replaceStateItem(value, id, function (existingItem) {
        return existingItem ? Object.assign({}, existingItem, {
          progress: progress
        }) : existingItem;
      });

      return newValue === value ? undefined : {
        value: newValue
      };
    });
  },
  _handleDeleteImage: function _handleDeleteImage(imageItem) {
    var _this9 = this;

    var uri = imageItem.uri,
        value = imageItem.value,
        originalValue = imageItem.originalValue,
        id = imageItem.id;
    return new Promise(function (resolve, reject) {
      // remove only those with Blob, i.e. not the ones that were defined as initial value from outside (without Blob-s)
      if (uri && (value instanceof Blob || originalValue instanceof Blob)) {
        var call = _this9.getCall("deleteImage");

        if (call) {
          var dtoIn = {
            data: {
              uri: uri
            },
            done: function done(resolveData) {
              return resolve({
                id: id,
                data: resolveData
              });
            },
            fail: reject
          };
          call(dtoIn);
        } else {
          resolve({
            id: id,
            data: null
          });
        }
      } else {
        resolve({
          id: id,
          data: null
        });
      }
    }).then(this._handleDeleteImageDone, function (e) {
      return _this9._handleDeleteImageFail({
        id: id,
        data: e
      });
    });
  },
  _handleDeleteImageDone: function _handleDeleteImageDone(_ref10) {// no-op

    var id = _ref10.id,
        data = _ref10.data;
  },
  _handleDeleteImageFail: function _handleDeleteImageFail(_ref11) {
    var id = _ref11.id,
        data = _ref11.data;
    uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Tools.error(data);
  },
  _handleUpdateImage: function _handleUpdateImage(imageItem) {
    var _this10 = this;

    var result;
    var call = this.getCall("updateImage");

    if (call) {
      var uri = imageItem.uri,
          value = imageItem.value,
          id = imageItem.id;
      result = new Promise(function (resolve, reject) {
        var dtoIn = {
          data: {
            uri: uri,
            value: value
          },
          progress: function progress(progressData) {
            return _this10._handleUpdateImageProgress({
              id: id,
              data: progressData
            });
          },
          done: function done(resolveData) {
            return resolve({
              id: id,
              data: resolveData
            });
          },
          fail: reject
        };
        call(dtoIn);
      }).then(this._handleUpdateImageDone, function (e) {
        return _this10._handleUpdateImageFail({
          id: id,
          data: e
        });
      });
    } else {
      this._handleDeleteImage(imageItem).catch(function () {
        return null;
      }); // remove in parallel


      result = this._handleCreateImage(imageItem);
    }

    return result;
  },
  _handleUpdateImageDone: function _handleUpdateImageDone(_ref12) {
    var id = _ref12.id,
        data = _ref12.data;
    return this._handleCreateImageDone({
      id: id,
      data: data
    });
  },
  _handleUpdateImageFail: function _handleUpdateImageFail(_ref13) {
    var id = _ref13.id,
        data = _ref13.data;
    return this._handleCreateImageFail({
      id: id,
      data: data
    });
  },
  _handleUpdateImageProgress: function _handleUpdateImageProgress(_ref14) {
    var id = _ref14.id,
        data = _ref14.data;
    return this._handleCreateImageProgress({
      id: id,
      data: data
    });
  },
  _replaceStateItem: function _replaceStateItem(list, itemId, replacerFn) {
    var result;
    var listArr = list && !Array.isArray(list) ? [list] : list;
    var idx = listArr ? listArr.findIndex(function (item) {
      return item.id === itemId;
    }) : -1;

    if (idx === -1) {
      var newItem = replacerFn(null);
      if (newItem) result = (listArr || []).concat([newItem]);else result = list;
    } else {
      var existingItem = listArr ? listArr[idx] : undefined;

      var _newItem = replacerFn(existingItem);

      if (_newItem === existingItem) result = list;else {
        result = listArr ? _toConsumableArray(listArr) : [];
        if (!_newItem) result.splice(idx, 1);else result.splice(idx, 1, _newItem);
        if (result.length === 0 && !list) result = list; // keep null / undefined if that's what it was before
      }

      var _ref15 = existingItem || {},
          src = _ref15.src;

      if (src && (!_newItem || src !== _newItem.src)) {
        setTimeout(function () {
          return URL.revokeObjectURL(src);
        }); // NOTE Passing normal URLs is safe too (no-op).
      }
    }

    if (!this.props.multiple && Array.isArray(result)) result = result[result.length - 1];
    return result;
  },
  _updateFeedbackFromValue: function _updateFeedbackFromValue(setStateCallback) {
    var _this11 = this;

    var errors = [];
    var uploads = [];
    var value = this.state.value && !Array.isArray(this.state.value) ? [this.state.value] : this.state.value;
    (value || []).forEach(function (item) {
      if (item.error) errors.push(item);else if (!item.uri && _this11.getCall("createImage")) uploads.push(item);
    });
    var feedback, message;

    if (errors.length > 0) {
      feedback = "error";
      message = uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create("div", null, errors.map(function (it) {
        return uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create("div", {
          key: it.id
        }, uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0__["Bricks"].Lsi, {
          lsi: it.error,
          params: [(it.value || it.originalValue || {}).name || ""]
        }));
      }));
    } else if (uploads.length > 0) {
      // NOTE We can't use "loading" because we want our component be enabled (interactive) while items
      // are being uploaded and "loading" feedback would disable us (due to InputMixin).
      // => we'll use different constant
      feedback = "loading-internal";
    }

    this._setFeedback(feedback, message, this.state.value, setStateCallback);
  },
  _onRemove: function _onRemove(id) {
    var _this12 = this;

    this.setState(function (_ref16) {
      var value = _ref16.value;

      var newValue = _this12._replaceStateItem(value, id, function (existingItem) {
        if (existingItem) _this12._handleDeleteImage(existingItem);
        return null;
      });

      return newValue === value ? undefined : {
        value: newValue
      };
    }, this._triggerChangeEvent);
  },
  _getInputProps: function _getInputProps() {
    return Object.assign({
      display: !this.state.value || this.state.value.length === 0 || this.props.multiple,
      id: this.getId() + "-input",
      multiple: this.props.multiple,
      readOnly: this.isReadOnly(),
      disabled: this.isComputedDisabled(),
      loading: this.isLoading(),
      placeholder: this.props.placeholder !== undefined ? this.props.placeholder : this.getLsiComponent("placeholder" + (this.isReadOnly() && !this.isDisabled() ? "ReadOnly" : "") + (this.props.multiple ? "Multi" : "")),
      borderRadius: this.props.borderRadius,
      bgStyle: this.props.bgStyle,
      elevation: this.props.elevation,
      inputWidth: this.props.inputWidth
    }, this.props.inputAttrs);
  },
  _getLineProps: function _getLineProps() {
    return {
      display: !!this.state.message,
      feedback: this.state.feedback
    };
  },
  _getAdjustmentProps: function _getAdjustmentProps() {
    return {
      value: this.state.value && !Array.isArray(this.state.value) ? [this.state.value] : this.state.value,
      onChange: this._onChange,
      inputProps: this._getInputProps(),
      lineProps: this._getLineProps(),
      onRemove: this._onRemove,
      onLoad: this._onLoad,
      width: this.props.outputWidth,
      height: this.props.outputHeight,
      type: this.props.outputType,
      rotation: this.props.outputRotation,
      quality: this.props.outputQuality,
      previewWidth: this.props.previewWidth,
      previewHeight: this.props.previewHeight,
      previewShape: this.props.previewShape
    };
  },
  _getMainAttrs: function _getMainAttrs() {
    var attrs = this._getInputAttrs();

    attrs.id = this.getId();
    return attrs;
  },
  //@@viewOff:componentSpecificHelpers
  //@@viewOn:render
  render: function render() {
    return uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create("div", this._getMainAttrs(), this.getLabel(this.getId() + "-input-hidden-input"), this.getInputWrapper(uu5g04__WEBPACK_IMPORTED_MODULE_0__["Common"].Element.create(_internal_image_input_adjustment_js__WEBPACK_IMPORTED_MODULE_5__["default"], this._getAdjustmentProps())), this.getDisabledCoverTransparent());
  } //@@viewOn:render

});
/* harmony default export */ __webpack_exports__["default"] = (UploadInput);

/***/ }),
/* 51 */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(52);

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":false}

options.transform = transform
options.insertInto = function anonymous(
) {
return __webpack_require__(12)();
};

var update = __webpack_require__(13)(content, options);

if(content.locals) module.exports = content.locals;



/***/ }),
/* 52 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(11)(false);
// Module
exports.push([module.i, ".uu5-imaging-upload-input {\n  position: relative;\n}\n", ""]);



/***/ }),
/* 53 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ThumbnailGenerator", function() { return ThumbnailGenerator; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var uu5g04_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(36);
/* harmony import */ var uu5g04_forms__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(uu5g04_forms__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_image_crop__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(54);
/* harmony import */ var react_image_crop__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_image_crop__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_image_crop_dist_ReactCrop_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(57);
/* harmony import */ var react_image_crop_dist_ReactCrop_css__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_image_crop_dist_ReactCrop_css__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _thumbnail_generator_less__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(59);
/* harmony import */ var _thumbnail_generator_less__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_thumbnail_generator_less__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(7);
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === "[object Arguments]")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }







var RATIO_SEPARATOR = ":";
var ONE_BY_ONE = "1:1";
var AVATAR = "avatar";
var TWO_BY_THREE = "2:3";
var THREE_BY_TWO = "3:2";
var THREE_BY_FOUR = "3:4";
var FOUR_BY_THREE = "4:3";
var DEFAULT_TYPES = [ONE_BY_ONE, AVATAR, TWO_BY_THREE, THREE_BY_TWO, THREE_BY_FOUR, FOUR_BY_THREE];
var ThumbnailGenerator = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.VisualComponent.create({
  //@@viewOn:mixins
  mixins: [uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.BaseMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.ElementaryMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.NestingLevelMixin],
  //@@viewOff:mixins
  //@@viewOn:statics
  statics: {
    tagName: _config_config_js__WEBPACK_IMPORTED_MODULE_5__["default"].TAG + "ThumbnailGenerator",
    classNames: {
      main: _config_config_js__WEBPACK_IMPORTED_MODULE_5__["default"].CSS + "thumbnail-generator",
      aside: _config_config_js__WEBPACK_IMPORTED_MODULE_5__["default"].CSS + "thumbnail-generator-aside",
      imageArea: _config_config_js__WEBPACK_IMPORTED_MODULE_5__["default"].CSS + "thumbnail-generator-image-area",
      imageAreaSet: _config_config_js__WEBPACK_IMPORTED_MODULE_5__["default"].CSS + "thumbnail-generator-image-area set",
      maskItems: _config_config_js__WEBPACK_IMPORTED_MODULE_5__["default"].CSS + "thumbnail-generator-mask-items",
      maskItem: _config_config_js__WEBPACK_IMPORTED_MODULE_5__["default"].CSS + "thumbnail-generator-mask-item",
      uploadText: _config_config_js__WEBPACK_IMPORTED_MODULE_5__["default"].CSS + "thumbnail-generator-upload-text",
      areaItem: _config_config_js__WEBPACK_IMPORTED_MODULE_5__["default"].CSS + "thumbnail-generator-area-item",
      controlButtons: _config_config_js__WEBPACK_IMPORTED_MODULE_5__["default"].CSS + "thumbnail-generator-button-control",
      imgAlign: _config_config_js__WEBPACK_IMPORTED_MODULE_5__["default"].CSS + "thumbnail-generator-img-align"
    },
    nestingLevelList: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.getNestingLevelList("bigBoxCollection", "box"),
    lsi: {
      clearSource: {
        en: "Clear source",
        cs: "Odstranit zdroj"
      },
      clearSelected: {
        en: "Clear selected",
        cs: "Vymazat vybrané"
      },
      uploadPlaceholder: {
        en: "<uu5string/><UU5.Bricks.Header level=\"4\">Drag image here</UU5.Bricks.Header><UU5.Bricks.P>or click to upload</UU5.Bricks.P>",
        cs: "<uu5string/><UU5.Bricks.Header level=\"4\">P\u0159et\xE1hn\u011Bte obr\xE1zek sem</UU5.Bricks.Header><UU5.Bricks.P>nebo klikn\u011Bte pro vlo\u017Een\xED</UU5.Bricks.P>"
      }
    },
    opt: {
      nestingLevelWrapper: true
    }
  },
  //@@viewOff:statics
  //@@viewOn:propTypes
  propTypes: {
    onChange: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.func,
    thumbnailTypes: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.arrayOf(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.oneOf(DEFAULT_TYPES)),
    outputType: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.oneOf(["png", "jpeg"])
  },
  //@@viewOff:propTypes
  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      thumbnailTypes: DEFAULT_TYPES,
      outputType: "jpeg"
    };
  },
  //@@viewOff:getDefaultProps
  //@@viewOn:reactLifeCycle
  getInitialState: function getInitialState() {
    var resultList = this.props.thumbnailTypes.map(function (type) {
      return {
        type: type,
        uri: null
      };
    });
    return {
      src: null,
      crops: {},
      // type => {x,y,width,height}
      selectedType: null,
      resultList: resultList
    };
  },
  componentWillUnmount: function componentWillUnmount() {
    this._unmounted = true;
    uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.EventListener.removeWindowEvent("keyup", this.getId());
  },
  //@@viewOff:reactLifeCycle
  //@@viewOn:interface
  //@@viewOff:interface
  //@@viewOn:overriding
  //@@viewOff:overriding
  //@@viewOn:private
  _evalExpression: function _evalExpression(exp) {
    if (exp === AVATAR) {
      return 1;
    }

    var _exp$split = exp.split(RATIO_SEPARATOR),
        _exp$split2 = _slicedToArray(_exp$split, 2),
        width = _exp$split2[0],
        height = _exp$split2[1];

    return parseInt(width) / parseInt(height);
  },
  _calcHeight: function _calcHeight(width, type) {
    return width / this._evalExpression(type);
  },
  _calcWidth: function _calcWidth(height, type) {
    return height * this._evalExpression(type);
  },
  _makeAspectCrop: function _makeAspectCrop(crop, imageAspect) {
    var completeCrop = crop;

    if (crop.width) {
      completeCrop.height = crop.width / crop.aspect * imageAspect;
    }

    if (crop.height) {
      completeCrop.width = (completeCrop.height || crop.height) * crop.aspect / imageAspect;
    }

    if (crop.y + (completeCrop.height || crop.height) > 100) {
      completeCrop.height = 100 - crop.y;
      completeCrop.width = completeCrop.height * crop.aspect / imageAspect;
    }

    if (crop.x + (completeCrop.width || crop.width) > 100) {
      completeCrop.width = 100 - crop.x;
      completeCrop.height = completeCrop.width / crop.aspect * imageAspect;
    }

    return completeCrop;
  },
  _handleOnFileChange: function _handleOnFileChange(_ref) {
    var _this = this;

    var value = _ref.value;
    var reader = new FileReader();

    reader.onload = function (_ref2) {
      var src = _ref2.target.result;
      _this._fileComp = null;

      _this.setState({
        src: src
      });
    };

    reader.readAsDataURL(value);
  },
  _onFocus: function _onFocus() {
    var _this2 = this;

    uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.EventListener.addWindowEvent("keyup", this.getId(), function (e) {
      var isEnter = e.which === 13;

      var fileComp = isEnter && !_this2.isDisabled() && _this2._fileComp && _this2._fileComp.findDOMNode();

      if (fileComp) {
        var input = fileComp.querySelector("input");
        input && input.click();
      }
    });
  },
  _onBlur: function _onBlur() {
    uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Environment.EventListener.removeWindowEvent("keyup", this.getId());
  },
  _onImageLoaded: function _onImageLoaded(image, pixelCrop) {
    this._imageRef = image;
  },
  _onCropComplete: function _onCropComplete(crop, pixelCrop) {
    if (this.state.selectedType) {
      this._makeClientCrop(crop, pixelCrop);
    }
  },
  _onCropChange: function _onCropChange(crop) {
    this.setState(function (state) {
      return state.selectedType ? {
        crops: _objectSpread({}, state.crops, _defineProperty({}, state.selectedType, crop))
      } : undefined;
    });
  },
  _cropResolver: function _cropResolver(data) {
    var _this3 = this;

    if (!this._unmounted) {
      var onChange = this.props.onChange;
      this.setState(function (prevState) {
        var type = prevState.selectedType;
        var resultList = prevState.resultList.map(function (element) {
          return element.type === type ? _objectSpread({}, element, {
            uri: data
          }) : element;
        });
        return {
          resultList: resultList
        };
      }, function () {
        if (typeof onChange === "function") {
          onChange(_this3.state.resultList.filter(function (x) {
            return !!x.uri;
          }));
        }
      });
    }
  },
  _makeClientCrop: function _makeClientCrop(crop, pixelCrop) {
    if (this._imageRef && crop.width && crop.height) {
      var outputType = this.props.outputType;

      var croppedImageUrl = this._getCroppedImg(this._imageRef, pixelCrop, "newFile.".concat(outputType));

      croppedImageUrl.then(this._cropResolver, null);
    }
  },
  _getCroppedImg: function _getCroppedImg(image, pixelCrop, fileName) {
    var _this4 = this;

    var canvas = document.createElement("canvas");
    canvas.width = pixelCrop.width;
    canvas.height = pixelCrop.height;
    var ctx = canvas.getContext("2d");
    ctx.drawImage(image, pixelCrop.x, pixelCrop.y, pixelCrop.width, pixelCrop.height, 0, 0, pixelCrop.width, pixelCrop.height);
    return new Promise(function (resolve, reject) {
      canvas.toBlob(function (blob) {
        if (!blob) {
          //reject(new Error('Canvas is empty'));
          console.error("Canvas is empty");
          return;
        }

        var fileUrl;
        blob.name = fileName;
        window.URL.revokeObjectURL(fileUrl);
        fileUrl = window.URL.createObjectURL(blob);
        resolve(fileUrl);
      }, "image/" + _this4.props.outputType);
    });
  },
  _getPixelCrop: function _getPixelCrop(image, percentCrop) {
    if (!image || !percentCrop) {
      return null;
    }

    var imageWidth = image.naturalWidth;
    var imageHeight = image.naturalHeight;
    var x = Math.round(imageWidth * (percentCrop.x / 100));
    var y = Math.round(imageHeight * (percentCrop.y / 100));
    var width = Math.round(imageWidth * (percentCrop.width / 100));
    var height = Math.round(imageHeight * (percentCrop.height / 100));
    return {
      x: x,
      y: y,
      // Clamp width and height so rounding doesn't cause the crop to exceed bounds.
      width: Math.min(Math.max(width, 0), imageWidth - x),
      height: Math.min(Math.max(height, 0), imageHeight - y)
    };
  },
  _addOrSelectArea: function _addOrSelectArea(type) {
    var _this5 = this;

    this.setState(function (state) {
      var crop = state.crops[type];
      var newCrop; // NOTE !crop.width is for case when there's no selection yet but we need to pass aspectRatio
      // to ReactCrop so that shape that user drags is using that ratio (e.g. circle instead of ellipsis).

      if (!crop || !crop.width) {
        newCrop = _this5._makeAspectCrop(_objectSpread({}, state.crops[state.selectedType], {
          aspect: _this5._evalExpression(type)
        }), _this5._imageRef.naturalWidth / _this5._imageRef.naturalHeight); //real image size
      }

      var newState = {
        selectedType: type
      };

      if (newCrop) {
        newState.crops = _objectSpread({}, state.crops, _defineProperty({}, type, newCrop));

        if (newCrop.width) {
          _this5._getCroppedImg(_this5._imageRef, _this5._getPixelCrop(_this5._imageRef, newCrop), "tmpFile.jpeg").then(_this5._cropResolver, null);
        }
      }

      return newState;
    });
  },
  _getImageArea: function _getImageArea() {
    var _this6 = this;

    var _this$state = this.state,
        crops = _this$state.crops,
        src = _this$state.src,
        selectedType = _this$state.selectedType;
    var crop = crops[selectedType] || {};
    var isImageSet = !!src;
    var croppedData = isImageSet ? uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Div, {
      key: "is",
      className: this.getClassName("imgAlign")
    }, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(react_image_crop__WEBPACK_IMPORTED_MODULE_2___default.a, {
      src: src,
      crop: crop,
      disabled: selectedType === null,
      className: selectedType,
      keepSelection: true,
      onImageLoaded: this._onImageLoaded,
      onComplete: this._onCropComplete,
      onChange: this._onCropChange
    })) : uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Fragment, {
      key: "up"
    }, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Div, {
      className: this.getClassName("uploadText"),
      content: this.getLsiComponent("uploadPlaceholder")
    }), uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Forms.File, {
      onChange: this._handleOnFileChange,
      ref_: function ref_(ref) {
        return _this6._fileComp = ref;
      }
    }));
    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Div, {
      key: "ia",
      className: isImageSet ? this.getClassName("imageAreaSet") : this.getClassName("imageArea"),
      mainAttrs: {
        tabIndex: this.state.src === null ? "0" : "-1",
        onFocus: this._onFocus,
        onBlur: this._onBlur
      }
    }, croppedData);
  },
  _handleOnClick: function _handleOnClick(type) {
    if (this._imageRef && this.state.src) {
      this._addOrSelectArea(type);
    }
  },
  _clearSelected: function _clearSelected(cleanSrc) {
    var _this7 = this;

    var onChange = this.props.onChange;
    if (cleanSrc === true) this._fileComp = null;
    this.setState(function (prev) {
      var cleaned = prev.resultList.map(function (element) {
        return _objectSpread({}, element, {
          uri: null
        });
      });
      return {
        resultList: cleaned,
        selectedType: null,
        src: cleanSrc === true ? null : prev.src,
        crops: {}
      };
    }, function () {
      if (typeof onChange === "function") {
        onChange(_this7.state.resultList.filter(function (x) {
          return !!x.uri;
        }));
      }
    });
  },
  _cleanSource: function _cleanSource() {
    this._clearSelected(true);
  },
  _getMasks: function _getMasks() {
    var _this8 = this;

    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Div, {
      key: "masks",
      className: this.getClassName("maskItems")
    }, this.state.resultList.map(function (element, index) {
      var type = element.type;
      var minWidth = 45;
      var minHeight = 45;
      var borderRadius = 0;

      if (type === AVATAR) {
        borderRadius = 100;
      } else {
        var _type$split$map = type.split(RATIO_SEPARATOR).map(function (x) {
          return parseInt(x);
        }),
            _type$split$map2 = _slicedToArray(_type$split$map, 2),
            widthR = _type$split$map2[0],
            heightR = _type$split$map2[1];

        if (widthR > heightR) {
          minHeight = _this8._calcHeight(minWidth, type);
        } else {
          minWidth = _this8._calcWidth(minHeight, type);
        }
      }

      var key = "thumbnail-generator-area-item-" + index;
      var isSelected = _this8.state.selectedType === type && _this8.state.src;

      var cssClassName = _this8.getClassName("maskItem");

      if (isSelected) {
        cssClassName = cssClassName + " selected";
      }

      var link = element.uri ? element.uri : "";
      return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Div, {
        key: key,
        className: cssClassName
      }, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create("div", {
        onClick: function onClick() {
          return _this8._handleOnClick(type);
        },
        className: _this8.getClassName("areaItem"),
        style: {
          width: minWidth,
          height: minHeight,
          borderRadius: borderRadius,
          backgroundImage: "url(" + link + ")"
        }
      }), uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create("p", null, type));
    }), uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Div, {
      className: this.getClassName("controlButtons")
    }, this._getCleanButton(), this._getReloadButton()));
  },
  _getReloadButton: function _getReloadButton() {
    return this.state.src && uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Link, {
      onClick: this._cleanSource
    }, this.getLsiComponent("clearSource"));
  },
  _getCleanButton: function _getCleanButton() {
    return this.state.selectedType && this.state.src !== null && uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Link, {
      onClick: this._clearSelected
    }, this.getLsiComponent("clearSelected"));
  },
  _getChild: function _getChild() {
    var _this9 = this;

    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Resize, null, function (_ref3) {
      var width = _ref3.width,
          height = _ref3.height;

      var mainProps = _this9.getMainPropsToPass();

      if (width > 768) mainProps.className += " " + _this9.getClassName("aside");
      return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Div, mainProps, _this9._getImageArea(width), _this9._getMasks(width));
    });
  },
  //@@viewOff:private
  //@@viewOn:render
  render: function render() {
    return this.getNestingLevel() ? this._getChild() : null;
  } //@@viewOff:render

});
/* harmony default export */ __webpack_exports__["default"] = (ThumbnailGenerator);

/***/ }),
/* 54 */
/***/ (function(module, exports, __webpack_require__) {

(function webpackUniversalModuleDefinition(root, factory) {
	if(true)
		module.exports = factory(__webpack_require__(55), __webpack_require__(56));
	else {}
})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.containCrop = exports.makeAspectCrop = exports.getPixelCrop = exports.Component = exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }(); /* globals document, window */


var _react = __webpack_require__(1);

var _react2 = _interopRequireDefault(_react);

var _propTypes = __webpack_require__(2);

var _propTypes2 = _interopRequireDefault(_propTypes);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// Feature detection
// https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Improving_scrolling_performance_with_passive_listeners
var passiveSupported = false;

try {
  window.addEventListener('test', null, Object.defineProperty({}, 'passive', {
    get: function get() {
      passiveSupported = true;return true;
    }
  }));
} catch (err) {} // eslint-disable-line no-empty

var EMPTY_GIF = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==';

function getClientPos(e) {
  var pageX = void 0;
  var pageY = void 0;

  if (e.touches) {
    var _e$touches = _slicedToArray(e.touches, 1);

    var _e$touches$ = _e$touches[0];
    pageX = _e$touches$.pageX;
    pageY = _e$touches$.pageY;
  } else {
    pageX = e.pageX;
    pageY = e.pageY;
  }

  return {
    x: pageX,
    y: pageY
  };
}

function clamp(num, min, max) {
  return Math.min(Math.max(num, min), max);
}

function isCropValid(crop) {
  return crop && crop.width && crop.height && !isNaN(crop.width) && !isNaN(crop.height);
}

function inverseOrd(ord) {
  var inversedOrd = void 0;

  if (ord === 'n') inversedOrd = 's';else if (ord === 'ne') inversedOrd = 'sw';else if (ord === 'e') inversedOrd = 'w';else if (ord === 'se') inversedOrd = 'nw';else if (ord === 's') inversedOrd = 'n';else if (ord === 'sw') inversedOrd = 'ne';else if (ord === 'w') inversedOrd = 'e';else if (ord === 'nw') inversedOrd = 'se';

  return inversedOrd;
}

function makeAspectCrop(crop, imageAspect) {
  if (isNaN(crop.aspect) || isNaN(imageAspect)) {
    console.warn('`crop.aspect` and `imageAspect` need to be numbers in order to make an aspect crop', crop);
    return crop;
  }

  var completeCrop = _extends({
    x: 0,
    y: 0
  }, crop);

  if (crop.width) {
    completeCrop.height = crop.width / crop.aspect * imageAspect;
  }
  if (crop.height) {
    completeCrop.width = (completeCrop.height || crop.height) * (crop.aspect / imageAspect);
  }

  if (crop.y + (completeCrop.height || crop.height) > 100) {
    completeCrop.height = 100 - crop.y;
    completeCrop.width = completeCrop.height * crop.aspect / imageAspect;
  }

  if (crop.x + (completeCrop.width || crop.width) > 100) {
    completeCrop.width = 100 - crop.x;
    completeCrop.height = completeCrop.width / crop.aspect * imageAspect;
  }

  return completeCrop;
}

function isAspectInvalid(crop, width, height) {
  if (!crop.width && crop.height || crop.width && !crop.height) {
    return true;
  }

  if (crop.width && crop.height && Math.round(height * (crop.height / 100) * crop.aspect) !== Math.round(width * (crop.width / 100))) {
    return true;
  }

  return false;
}

function resolveCrop(crop, image) {
  if (crop && crop.aspect && isAspectInvalid(crop, image.naturalWidth, image.naturalHeight)) {
    return makeAspectCrop(crop, image.naturalWidth / image.naturalHeight);
  }

  return crop;
}

function getPixelCrop(image, percentCrop) {
  var useNaturalImageDimensions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;

  if (!image || !percentCrop) {
    return null;
  }

  var imageWidth = useNaturalImageDimensions ? image.naturalWidth : image.width;
  var imageHeight = useNaturalImageDimensions ? image.naturalHeight : image.height;

  var x = Math.round(imageWidth * (percentCrop.x / 100));
  var y = Math.round(imageHeight * (percentCrop.y / 100));
  var width = Math.round(imageWidth * (percentCrop.width / 100));
  var height = Math.round(imageHeight * (percentCrop.height / 100));

  return {
    x: x,
    y: y,
    // Clamp width and height so rounding doesn't cause the crop to exceed bounds.
    width: clamp(width, 0, imageWidth - x),
    height: clamp(height, 0, imageHeight - y)
  };
}

function containCrop(prevCrop, crop, imageAspect) {
  var contained = _extends({}, crop);

  // Fixes issue where crop can be dragged to the left when resizing with SW ord
  // even though it's hit the bottom of the image.
  if (crop.aspect && prevCrop.x > crop.x && crop.height + crop.y >= 100) {
    contained.x = prevCrop.x;
  }

  // Don't let the crop grow on the opposite side when hitting an x image boundary.
  var cropXAdjusted = false;
  if (contained.x + contained.width > 100) {
    contained.width = crop.width + (100 - (crop.x + crop.width));
    contained.x = crop.x + (100 - (crop.x + contained.width));
    cropXAdjusted = true;
  } else if (contained.x < 0) {
    contained.width = crop.x + crop.width;
    contained.x = 0;
    cropXAdjusted = true;
  }

  if (cropXAdjusted && crop.aspect) {
    // Adjust height to the resized width to maintain aspect.
    contained.height = contained.width / crop.aspect * imageAspect;
    // If sizing in up direction we need to pin Y at the point it
    // would be at the boundary.
    if (prevCrop.y > contained.y) {
      contained.y = crop.y + (crop.height - contained.height);
    }
  }

  // Don't let the crop grow on the opposite side when hitting a y image boundary.
  var cropYAdjusted = false;
  if (contained.y + contained.height > 100) {
    contained.height = crop.height + (100 - (crop.y + crop.height));
    contained.y = crop.y + (100 - (crop.y + contained.height));
    cropYAdjusted = true;
  } else if (contained.y < 0) {
    contained.height = crop.y + crop.height;
    contained.y = 0;
    cropYAdjusted = true;
  }

  if (cropYAdjusted && crop.aspect) {
    // Adjust width to the resized height to maintain aspect.
    contained.width = contained.height * crop.aspect / imageAspect;
    // If sizing in up direction we need to pin X at the point it
    // would be at the boundary.
    if (contained.x < crop.x) {
      contained.x = crop.x + (crop.width - contained.width);
    }
  }

  return contained;
}

var ReactCrop = function (_PureComponent) {
  _inherits(ReactCrop, _PureComponent);

  function ReactCrop() {
    var _ref;

    var _temp, _this, _ret;

    _classCallCheck(this, ReactCrop);

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = ReactCrop.__proto__ || Object.getPrototypeOf(ReactCrop)).call.apply(_ref, [this].concat(args))), _this), _this.window = window, _this.document = document, _this.state = {}, _this.onCropMouseTouchDown = function (e) {
      var _this$props = _this.props,
          crop = _this$props.crop,
          disabled = _this$props.disabled;


      if (disabled) {
        return;
      }

      e.preventDefault(); // Stop drag selection.

      var clientPos = getClientPos(e);

      // Focus for detecting keypress.
      _this.componentRef.focus({ preventScroll: true });

      var ord = e.target.dataset.ord;

      var xInversed = ord === 'nw' || ord === 'w' || ord === 'sw';
      var yInversed = ord === 'nw' || ord === 'n' || ord === 'ne';

      var cropOffset = void 0;

      if (crop.aspect) {
        cropOffset = _this.getElementOffset(_this.cropSelectRef);
      }

      _this.evData = {
        clientStartX: clientPos.x,
        clientStartY: clientPos.y,
        cropStartWidth: crop.width,
        cropStartHeight: crop.height,
        cropStartX: xInversed ? crop.x + crop.width : crop.x,
        cropStartY: yInversed ? crop.y + crop.height : crop.y,
        xInversed: xInversed,
        yInversed: yInversed,
        xCrossOver: xInversed,
        yCrossOver: yInversed,
        startXCrossOver: xInversed,
        startYCrossOver: yInversed,
        isResize: e.target.dataset.ord,
        ord: ord,
        cropOffset: cropOffset
      };

      _this.mouseDownOnCrop = true;
      _this.setState({ cropIsActive: true });
    }, _this.onComponentMouseTouchDown = function (e) {
      var _this$props2 = _this.props,
          crop = _this$props2.crop,
          disabled = _this$props2.disabled,
          locked = _this$props2.locked,
          keepSelection = _this$props2.keepSelection,
          onChange = _this$props2.onChange,
          useNaturalImageDimensions = _this$props2.useNaturalImageDimensions;


      if (e.target !== _this.imageRef) {
        return;
      }

      if (disabled || locked || keepSelection && isCropValid(crop)) {
        return;
      }

      e.preventDefault(); // Stop drag selection.

      var clientPos = getClientPos(e);

      // Focus for detecting keypress.
      _this.componentRef.focus({ preventScroll: true });

      var imageOffset = _this.getElementOffset(_this.imageRef);
      var xPc = (clientPos.x - imageOffset.left) / _this.imageRef.width * 100;
      var yPc = (clientPos.y - imageOffset.top) / _this.imageRef.height * 100;

      var nextCrop = {
        aspect: crop ? crop.aspect : undefined,
        x: xPc,
        y: yPc,
        width: 0,
        height: 0
      };

      _this.evData = {
        clientStartX: clientPos.x,
        clientStartY: clientPos.y,
        cropStartWidth: nextCrop.width,
        cropStartHeight: nextCrop.height,
        cropStartX: nextCrop.x,
        cropStartY: nextCrop.y,
        xInversed: false,
        yInversed: false,
        xCrossOver: false,
        yCrossOver: false,
        startXCrossOver: false,
        startYCrossOver: false,
        isResize: true,
        ord: 'nw'
      };

      _this.mouseDownOnCrop = true;
      onChange(nextCrop, getPixelCrop(_this.imageRef, nextCrop, useNaturalImageDimensions));
      _this.setState({ cropIsActive: true });
    }, _this.onDocMouseTouchMove = function (e) {
      var _this$props3 = _this.props,
          crop = _this$props3.crop,
          disabled = _this$props3.disabled,
          onChange = _this$props3.onChange,
          onDragStart = _this$props3.onDragStart;


      if (disabled) {
        return;
      }

      if (!_this.mouseDownOnCrop) {
        return;
      }

      e.preventDefault(); // Stop drag selection.
      if (!_this.dragStarted) {
        _this.dragStarted = true;
        onDragStart();
      }

      var _this2 = _this,
          evData = _this2.evData;

      var clientPos = getClientPos(e);

      if (evData.isResize && crop.aspect && evData.cropOffset) {
        clientPos.y = _this.straightenYPath(clientPos.x);
      }

      var xDiffPx = clientPos.x - evData.clientStartX;
      evData.xDiffPc = xDiffPx / _this.imageRef.width * 100;

      var yDiffPx = clientPos.y - evData.clientStartY;
      evData.yDiffPc = yDiffPx / _this.imageRef.height * 100;

      var nextCrop = void 0;

      if (evData.isResize) {
        nextCrop = _this.resizeCrop();
      } else {
        nextCrop = _this.dragCrop();
      }

      if (nextCrop !== crop) {
        onChange(nextCrop, getPixelCrop(_this.imageRef, nextCrop));
      }
    }, _this.onComponentKeyDown = function (e) {
      var _this$props4 = _this.props,
          crop = _this$props4.crop,
          disabled = _this$props4.disabled,
          onChange = _this$props4.onChange,
          onComplete = _this$props4.onComplete,
          useNaturalImageDimensions = _this$props4.useNaturalImageDimensions;


      if (disabled) {
        return;
      }

      var keyCode = e.which;
      var nudged = false;

      if (!isCropValid(crop)) {
        return;
      }

      var nextCrop = _this.makeNewCrop();

      if (keyCode === ReactCrop.arrowKey.left) {
        nextCrop.x -= ReactCrop.nudgeStep;
        nudged = true;
      } else if (keyCode === ReactCrop.arrowKey.right) {
        nextCrop.x += ReactCrop.nudgeStep;
        nudged = true;
      } else if (keyCode === ReactCrop.arrowKey.up) {
        nextCrop.y -= ReactCrop.nudgeStep;
        nudged = true;
      } else if (keyCode === ReactCrop.arrowKey.down) {
        nextCrop.y += ReactCrop.nudgeStep;
        nudged = true;
      }

      if (nudged) {
        e.preventDefault(); // Stop drag selection.
        nextCrop.x = clamp(nextCrop.x, 0, 100 - nextCrop.width);
        nextCrop.y = clamp(nextCrop.y, 0, 100 - nextCrop.height);

        onChange(nextCrop, getPixelCrop(_this.imageRef, nextCrop, useNaturalImageDimensions));
        onComplete(nextCrop, getPixelCrop(_this.imageRef, nextCrop, useNaturalImageDimensions));
      }
    }, _this.onDocMouseTouchEnd = function () {
      var _this$props5 = _this.props,
          crop = _this$props5.crop,
          disabled = _this$props5.disabled,
          onComplete = _this$props5.onComplete,
          onDragEnd = _this$props5.onDragEnd,
          useNaturalImageDimensions = _this$props5.useNaturalImageDimensions;


      if (disabled) {
        return;
      }

      if (_this.mouseDownOnCrop) {
        _this.mouseDownOnCrop = false;
        _this.dragStarted = false;
        onDragEnd();
        onComplete(crop, getPixelCrop(_this.imageRef, crop, useNaturalImageDimensions));
        _this.setState({ cropIsActive: false });
      }
    }, _temp), _possibleConstructorReturn(_this, _ret);
  }

  _createClass(ReactCrop, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      var options = passiveSupported ? { passive: false } : false;

      this.document.addEventListener('mousemove', this.onDocMouseTouchMove, options);
      this.document.addEventListener('touchmove', this.onDocMouseTouchMove, options);

      this.document.addEventListener('mouseup', this.onDocMouseTouchEnd, options);
      this.document.addEventListener('touchend', this.onDocMouseTouchEnd, options);
      this.document.addEventListener('touchcancel', this.onDocMouseTouchEnd, options);

      if (this.imageRef.complete || this.imageRef.readyState) {
        if (this.imageRef.naturalWidth === 0) {
          // Broken load on iOS, PR #51
          // https://css-tricks.com/snippets/jquery/fixing-load-in-ie-for-cached-images/
          // http://stackoverflow.com/questions/821516/browser-independent-way-to-detect-when-image-has-been-loaded
          var src = this.imageRef.src;

          this.imageRef.src = EMPTY_GIF;
          this.imageRef.src = src;
        } else {
          this.onImageLoad(this.imageRef);
        }
      }
    }
  }, {
    key: 'componentWillUnmount',
    value: function componentWillUnmount() {
      this.document.removeEventListener('mousemove', this.onDocMouseTouchMove);
      this.document.removeEventListener('touchmove', this.onDocMouseTouchMove);

      this.document.removeEventListener('mouseup', this.onDocMouseTouchEnd);
      this.document.removeEventListener('touchend', this.onDocMouseTouchEnd);
      this.document.removeEventListener('touchcancel', this.onDocMouseTouchEnd);
    }
  }, {
    key: 'onImageLoad',
    value: function onImageLoad(image) {
      var _props = this.props,
          crop = _props.crop,
          onComplete = _props.onComplete,
          onChange = _props.onChange,
          onImageLoaded = _props.onImageLoaded,
          useNaturalImageDimensions = _props.useNaturalImageDimensions;


      var resolvedCrop = resolveCrop(crop, image);

      // Return false from onImageLoaded if you set the crop with setState in there as otherwise the subsequent
      // onChange + onComplete will not have your updated crop.
      var res = onImageLoaded(image, getPixelCrop(image, resolvedCrop, useNaturalImageDimensions));

      if (res !== false && resolvedCrop !== crop) {
        onChange(resolvedCrop, getPixelCrop(image, resolvedCrop, useNaturalImageDimensions));
        onComplete(resolvedCrop, getPixelCrop(image, resolvedCrop, useNaturalImageDimensions));
      }
    }
  }, {
    key: 'getElementOffset',
    value: function getElementOffset(el) {
      var rect = el.getBoundingClientRect();
      var docEl = this.document.documentElement;

      var rectTop = rect.top + this.window.pageYOffset - docEl.clientTop;
      var rectLeft = rect.left + this.window.pageXOffset - docEl.clientLeft;

      return {
        top: rectTop,
        left: rectLeft
      };
    }
  }, {
    key: 'getCropStyle',
    value: function getCropStyle() {
      var crop = this.props.crop;

      return {
        top: crop.y + '%',
        left: crop.x + '%',
        width: crop.width + '%',
        height: crop.height + '%'
      };
    }
  }, {
    key: 'getNewSize',
    value: function getNewSize() {
      var _props2 = this.props,
          crop = _props2.crop,
          minWidth = _props2.minWidth,
          maxWidth = _props2.maxWidth,
          minHeight = _props2.minHeight,
          maxHeight = _props2.maxHeight;
      var evData = this.evData;

      var imageAspect = this.imageRef.width / this.imageRef.height;

      // New width.
      var newWidth = evData.cropStartWidth + evData.xDiffPc;

      if (evData.xCrossOver) {
        newWidth = Math.abs(newWidth);
      }

      newWidth = clamp(newWidth, minWidth, maxWidth);

      // New height.
      var newHeight = void 0;

      if (crop.aspect) {
        newHeight = newWidth / crop.aspect * imageAspect;
      } else {
        newHeight = evData.cropStartHeight + evData.yDiffPc;
      }

      if (evData.yCrossOver) {
        // Cap if polarity is inversed and the height fills the y space.
        newHeight = Math.min(Math.abs(newHeight), evData.cropStartY);
      }

      newHeight = clamp(newHeight, minHeight, maxHeight);

      if (crop.aspect) {
        newWidth = clamp(newHeight * crop.aspect / imageAspect, 0, 100);
      }

      return {
        width: newWidth,
        height: newHeight
      };
    }
  }, {
    key: 'dragCrop',
    value: function dragCrop() {
      var nextCrop = this.makeNewCrop();
      var evData = this.evData;

      nextCrop.x = clamp(evData.cropStartX + evData.xDiffPc, 0, 100 - nextCrop.width);
      nextCrop.y = clamp(evData.cropStartY + evData.yDiffPc, 0, 100 - nextCrop.height);
      return nextCrop;
    }
  }, {
    key: 'resizeCrop',
    value: function resizeCrop() {
      var nextCrop = this.makeNewCrop();
      var evData = this.evData;
      var _props3 = this.props,
          crop = _props3.crop,
          minWidth = _props3.minWidth,
          minHeight = _props3.minHeight;
      var ord = evData.ord;

      var imageAspect = this.imageRef.width / this.imageRef.height;

      // On the inverse change the diff so it's the same and
      // the same algo applies.
      if (evData.xInversed) {
        evData.xDiffPc -= evData.cropStartWidth * 2;
      }
      if (evData.yInversed) {
        evData.yDiffPc -= evData.cropStartHeight * 2;
      }

      // New size.
      var newSize = this.getNewSize();

      // Adjust x/y to give illusion of 'staticness' as width/height is increased
      // when polarity is inversed.
      var newX = evData.cropStartX;
      var newY = evData.cropStartY;

      if (evData.xCrossOver) {
        newX = nextCrop.x + (nextCrop.width - newSize.width);
      }

      if (evData.yCrossOver) {
        // This not only removes the little "shake" when inverting at a diagonal, but for some
        // reason y was way off at fast speeds moving sw->ne with fixed aspect only, I couldn't
        // figure out why.
        if (evData.lastYCrossover === false) {
          newY = nextCrop.y - newSize.height;
        } else {
          newY = nextCrop.y + (nextCrop.height - newSize.height);
        }
      }

      var containedCrop = containCrop(this.props.crop, {
        x: newX,
        y: newY,
        width: newSize.width,
        height: newSize.height,
        aspect: nextCrop.aspect
      }, imageAspect);

      // Apply x/y/width/height changes depending on ordinate (fixed aspect always applies both).
      if (nextCrop.aspect || ReactCrop.xyOrds.indexOf(ord) > -1) {
        nextCrop.x = containedCrop.x;
        nextCrop.y = containedCrop.y;
        nextCrop.width = containedCrop.width;
        nextCrop.height = containedCrop.height;
      } else if (ReactCrop.xOrds.indexOf(ord) > -1) {
        nextCrop.x = containedCrop.x;
        nextCrop.width = containedCrop.width;
      } else if (ReactCrop.yOrds.indexOf(ord) > -1) {
        nextCrop.y = containedCrop.y;
        nextCrop.height = containedCrop.height;
      }

      evData.lastYCrossover = evData.yCrossOver;
      this.crossOverCheck();

      // Ensure new dimensions aren't less than min dimensions.
      if (minWidth && nextCrop.width < minWidth) {
        return crop;
      }

      if (minHeight && nextCrop.height < minHeight) {
        return crop;
      }

      return nextCrop;
    }
  }, {
    key: 'straightenYPath',
    value: function straightenYPath(clientX) {
      var evData = this.evData;
      var ord = evData.ord;
      var cropOffset = evData.cropOffset;

      var cropStartWidth = evData.cropStartWidth / 100 * this.imageRef.width;
      var cropStartHeight = evData.cropStartHeight / 100 * this.imageRef.height;
      var k = void 0;
      var d = void 0;

      if (ord === 'nw' || ord === 'se') {
        k = cropStartHeight / cropStartWidth;
        d = cropOffset.top - cropOffset.left * k;
      } else {
        k = -cropStartHeight / cropStartWidth;
        d = cropOffset.top + (cropStartHeight - cropOffset.left * k);
      }

      return k * clientX + d;
    }
  }, {
    key: 'createCropSelection',
    value: function createCropSelection() {
      var _this3 = this;

      var _props4 = this.props,
          disabled = _props4.disabled,
          locked = _props4.locked,
          renderSelectionAddon = _props4.renderSelectionAddon;

      var style = this.getCropStyle();

      return _react2.default.createElement(
        'div',
        {
          ref: function ref(n) {
            _this3.cropSelectRef = n;
          },
          style: style,
          className: 'ReactCrop__crop-selection',
          onMouseDown: this.onCropMouseTouchDown,
          onTouchStart: this.onCropMouseTouchDown,
          role: 'presentation'
        },
        !disabled && !locked && _react2.default.createElement(
          'div',
          { className: 'ReactCrop__drag-elements' },
          _react2.default.createElement('div', { className: 'ReactCrop__drag-bar ord-n', 'data-ord': 'n' }),
          _react2.default.createElement('div', { className: 'ReactCrop__drag-bar ord-e', 'data-ord': 'e' }),
          _react2.default.createElement('div', { className: 'ReactCrop__drag-bar ord-s', 'data-ord': 's' }),
          _react2.default.createElement('div', { className: 'ReactCrop__drag-bar ord-w', 'data-ord': 'w' }),
          _react2.default.createElement('div', { className: 'ReactCrop__drag-handle ord-nw', 'data-ord': 'nw' }),
          _react2.default.createElement('div', { className: 'ReactCrop__drag-handle ord-n', 'data-ord': 'n' }),
          _react2.default.createElement('div', { className: 'ReactCrop__drag-handle ord-ne', 'data-ord': 'ne' }),
          _react2.default.createElement('div', { className: 'ReactCrop__drag-handle ord-e', 'data-ord': 'e' }),
          _react2.default.createElement('div', { className: 'ReactCrop__drag-handle ord-se', 'data-ord': 'se' }),
          _react2.default.createElement('div', { className: 'ReactCrop__drag-handle ord-s', 'data-ord': 's' }),
          _react2.default.createElement('div', { className: 'ReactCrop__drag-handle ord-sw', 'data-ord': 'sw' }),
          _react2.default.createElement('div', { className: 'ReactCrop__drag-handle ord-w', 'data-ord': 'w' })
        ),
        renderSelectionAddon && renderSelectionAddon(this.state)
      );
    }
  }, {
    key: 'makeNewCrop',
    value: function makeNewCrop() {
      return _extends({}, ReactCrop.defaultCrop, this.props.crop);
    }
  }, {
    key: 'crossOverCheck',
    value: function crossOverCheck() {
      var evData = this.evData;


      if (!evData.xCrossOver && -Math.abs(evData.cropStartWidth) - evData.xDiffPc >= 0 || evData.xCrossOver && -Math.abs(evData.cropStartWidth) - evData.xDiffPc <= 0) {
        evData.xCrossOver = !evData.xCrossOver;
      }

      if (!evData.yCrossOver && -Math.abs(evData.cropStartHeight) - evData.yDiffPc >= 0 || evData.yCrossOver && -Math.abs(evData.cropStartHeight) - evData.yDiffPc <= 0) {
        evData.yCrossOver = !evData.yCrossOver;
      }

      var swapXOrd = evData.xCrossOver !== evData.startXCrossOver;
      var swapYOrd = evData.yCrossOver !== evData.startYCrossOver;

      evData.inversedXOrd = swapXOrd ? inverseOrd(evData.ord) : false;
      evData.inversedYOrd = swapYOrd ? inverseOrd(evData.ord) : false;
    }
  }, {
    key: 'render',
    value: function render() {
      var _this4 = this;

      var _props5 = this.props,
          children = _props5.children,
          className = _props5.className,
          crossorigin = _props5.crossorigin,
          crop = _props5.crop,
          disabled = _props5.disabled,
          locked = _props5.locked,
          imageAlt = _props5.imageAlt,
          onImageError = _props5.onImageError,
          src = _props5.src,
          style = _props5.style,
          imageStyle = _props5.imageStyle;
      var cropIsActive = this.state.cropIsActive;

      var cropSelection = void 0;

      if (isCropValid(crop)) {
        cropSelection = this.createCropSelection();
      }

      var componentClasses = ['ReactCrop'];

      if (cropIsActive) {
        componentClasses.push('ReactCrop--active');
      }

      if (crop) {
        if (crop.aspect) {
          componentClasses.push('ReactCrop--fixed-aspect');
        }

        // In this case we have to shadow the image, since the box-shadow
        // on the crop won't work.
        if (cropIsActive && (!crop.width || !crop.height)) {
          componentClasses.push('ReactCrop--crop-invisible');
        }
      }

      if (disabled) {
        componentClasses.push('ReactCrop--disabled');
      }

      if (locked) {
        componentClasses.push('ReactCrop--locked');
      }

      if (className) {
        componentClasses.push.apply(componentClasses, _toConsumableArray(className.split(' ')));
      }

      return _react2.default.createElement(
        'div',
        {
          ref: function ref(n) {
            _this4.componentRef = n;
          },
          className: componentClasses.join(' '),
          style: style,
          onTouchStart: this.onComponentMouseTouchDown,
          onMouseDown: this.onComponentMouseTouchDown,
          role: 'presentation',
          tabIndex: 1,
          onKeyDown: this.onComponentKeyDown
        },
        _react2.default.createElement('img', {
          ref: function ref(n) {
            _this4.imageRef = n;
          },
          crossOrigin: crossorigin,
          className: 'ReactCrop__image',
          style: imageStyle,
          src: src,
          onLoad: function onLoad(e) {
            return _this4.onImageLoad(e.target);
          },
          onError: onImageError,
          alt: imageAlt
        }),
        children,
        cropSelection
      );
    }
  }]);

  return ReactCrop;
}(_react.PureComponent);

ReactCrop.xOrds = ['e', 'w'];
ReactCrop.yOrds = ['n', 's'];
ReactCrop.xyOrds = ['nw', 'ne', 'se', 'sw'];

ReactCrop.arrowKey = {
  left: 37,
  up: 38,
  right: 39,
  down: 40
};

ReactCrop.nudgeStep = 0.2;

ReactCrop.defaultCrop = {
  x: 0,
  y: 0,
  width: 0,
  height: 0
};

ReactCrop.propTypes = {
  className: _propTypes2.default.string,
  crossorigin: _propTypes2.default.string,
  children: _propTypes2.default.oneOfType([_propTypes2.default.arrayOf(_propTypes2.default.node), _propTypes2.default.node]),
  crop: _propTypes2.default.shape({
    aspect: _propTypes2.default.number,
    x: _propTypes2.default.number,
    y: _propTypes2.default.number,
    width: _propTypes2.default.number,
    height: _propTypes2.default.number
  }),
  disabled: _propTypes2.default.bool,
  locked: _propTypes2.default.bool,
  imageAlt: _propTypes2.default.string,
  imageStyle: _propTypes2.default.shape({}),
  keepSelection: _propTypes2.default.bool,
  minWidth: _propTypes2.default.number,
  minHeight: _propTypes2.default.number,
  maxWidth: _propTypes2.default.number,
  maxHeight: _propTypes2.default.number,
  onChange: _propTypes2.default.func.isRequired,
  onImageError: _propTypes2.default.func,
  onComplete: _propTypes2.default.func,
  onImageLoaded: _propTypes2.default.func,
  onDragStart: _propTypes2.default.func,
  onDragEnd: _propTypes2.default.func,
  src: _propTypes2.default.string.isRequired,
  style: _propTypes2.default.shape({}),
  renderSelectionAddon: _propTypes2.default.func
};

ReactCrop.defaultProps = {
  className: undefined,
  crop: undefined,
  crossorigin: undefined,
  disabled: false,
  locked: false,
  imageAlt: '',
  maxWidth: 100,
  maxHeight: 100,
  minWidth: 0,
  minHeight: 0,
  keepSelection: false,
  onComplete: function onComplete() {},
  onImageError: function onImageError() {},
  onImageLoaded: function onImageLoaded() {},
  onDragStart: function onDragStart() {},
  onDragEnd: function onDragEnd() {},
  children: undefined,
  style: undefined,
  imageStyle: undefined,
  renderSelectionAddon: undefined,
  useNaturalImageDimensions: true
};

exports.default = ReactCrop;
exports.Component = ReactCrop;
exports.getPixelCrop = getPixelCrop;
exports.makeAspectCrop = makeAspectCrop;
exports.containCrop = containCrop;

/***/ }),
/* 1 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_1__;

/***/ }),
/* 2 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_2__;

/***/ })
/******/ ]);
});

/***/ }),
/* 55 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE__55__;

/***/ }),
/* 56 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE__56__;

/***/ }),
/* 57 */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(58);

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":false}

options.transform = transform
options.insertInto = function anonymous(
) {
return __webpack_require__(12)();
};

var update = __webpack_require__(13)(content, options);

if(content.locals) module.exports = content.locals;



/***/ }),
/* 58 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(11)(false);
// Module
exports.push([module.i, ".ReactCrop {\n  position: relative;\n  display: inline-block;\n  cursor: crosshair;\n  overflow: hidden;\n  max-width: 100%;\n  background-color: #000; }\n  .ReactCrop:focus {\n    outline: none; }\n  .ReactCrop--disabled, .ReactCrop--locked {\n    cursor: inherit; }\n  .ReactCrop__image {\n    /* autoprefixer: off */\n    display: block;\n    max-width: 100%;\n    max-height: -webkit-fill-available;\n    max-height: -moz-available;\n    max-height: fill-available; }\n  .ReactCrop--crop-invisible .ReactCrop__image {\n    opacity: 0.5; }\n  .ReactCrop__crop-selection {\n    position: absolute;\n    top: 0;\n    left: 0;\n    transform: translate3d(0, 0, 0);\n    box-sizing: border-box;\n    cursor: move;\n    box-shadow: 0 0 0 9999em rgba(0, 0, 0, 0.5);\n    border: 1px solid;\n    border-image-source: url(\"data:image/gif;base64,R0lGODlhCgAKAJECAAAAAP///////wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEI5RDc5MTFDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEI5RDc5MTBDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEBQoAAgAsAAAAAAoACgAAAhWEERkn7W3ei7KlagMWF/dKgYeyGAUAIfkEBQoAAgAsAAAAAAoACgAAAg+UYwLJ7RnQm7QmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYgLJHdiinNSAVfOEKoUCACH5BAUKAAIALAAAAAAKAAoAAAIRVISAdusPo3RAzYtjaMIaUQAAIfkEBQoAAgAsAAAAAAoACgAAAg+MDiem7Q8bSLFaG5il6xQAIfkEBQoAAgAsAAAAAAoACgAAAg+UYRLJ7QnQm7SmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYBLJDdiinNSEVfOEKoECACH5BAUKAAIALAAAAAAKAAoAAAIRFISBdusPo3RBzYsjaMIaUQAAOw==\");\n    border-image-slice: 1;\n    border-image-repeat: repeat; }\n    .ReactCrop--disabled .ReactCrop__crop-selection {\n      cursor: inherit; }\n  .ReactCrop__drag-handle {\n    position: absolute;\n    width: 9px;\n    height: 9px;\n    background-color: rgba(0, 0, 0, 0.2);\n    border: 1px solid rgba(255, 255, 255, 0.7);\n    box-sizing: border-box;\n    outline: 1px solid transparent; }\n  .ReactCrop .ord-nw {\n    top: 0;\n    left: 0;\n    margin-top: -5px;\n    margin-left: -5px;\n    cursor: nw-resize; }\n  .ReactCrop .ord-n {\n    top: 0;\n    left: 50%;\n    margin-top: -5px;\n    margin-left: -5px;\n    cursor: n-resize; }\n  .ReactCrop .ord-ne {\n    top: 0;\n    right: 0;\n    margin-top: -5px;\n    margin-right: -5px;\n    cursor: ne-resize; }\n  .ReactCrop .ord-e {\n    top: 50%;\n    right: 0;\n    margin-top: -5px;\n    margin-right: -5px;\n    cursor: e-resize; }\n  .ReactCrop .ord-se {\n    bottom: 0;\n    right: 0;\n    margin-bottom: -5px;\n    margin-right: -5px;\n    cursor: se-resize; }\n  .ReactCrop .ord-s {\n    bottom: 0;\n    left: 50%;\n    margin-bottom: -5px;\n    margin-left: -5px;\n    cursor: s-resize; }\n  .ReactCrop .ord-sw {\n    bottom: 0;\n    left: 0;\n    margin-bottom: -5px;\n    margin-left: -5px;\n    cursor: sw-resize; }\n  .ReactCrop .ord-w {\n    top: 50%;\n    left: 0;\n    margin-top: -5px;\n    margin-left: -5px;\n    cursor: w-resize; }\n  .ReactCrop__disabled .ReactCrop__drag-handle {\n    cursor: inherit; }\n  .ReactCrop__drag-bar {\n    position: absolute; }\n    .ReactCrop__drag-bar.ord-n {\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 6px;\n      margin-top: -3px; }\n    .ReactCrop__drag-bar.ord-e {\n      right: 0;\n      top: 0;\n      width: 6px;\n      height: 100%;\n      margin-right: -3px; }\n    .ReactCrop__drag-bar.ord-s {\n      bottom: 0;\n      left: 0;\n      width: 100%;\n      height: 6px;\n      margin-bottom: -3px; }\n    .ReactCrop__drag-bar.ord-w {\n      top: 0;\n      left: 0;\n      width: 6px;\n      height: 100%;\n      margin-left: -3px; }\n  .ReactCrop--new-crop .ReactCrop__drag-bar,\n  .ReactCrop--new-crop .ReactCrop__drag-handle,\n  .ReactCrop--fixed-aspect .ReactCrop__drag-bar {\n    display: none; }\n  .ReactCrop--fixed-aspect .ReactCrop__drag-handle.ord-n,\n  .ReactCrop--fixed-aspect .ReactCrop__drag-handle.ord-e,\n  .ReactCrop--fixed-aspect .ReactCrop__drag-handle.ord-s,\n  .ReactCrop--fixed-aspect .ReactCrop__drag-handle.ord-w {\n    display: none; }\n  @media (max-width: 768px), (pointer: coarse) {\n    .ReactCrop__drag-handle {\n      width: 17px;\n      height: 17px; }\n    .ReactCrop .ord-nw {\n      margin-top: -9px;\n      margin-left: -9px; }\n    .ReactCrop .ord-n {\n      margin-top: -9px;\n      margin-left: -9px; }\n    .ReactCrop .ord-ne {\n      margin-top: -9px;\n      margin-right: -9px; }\n    .ReactCrop .ord-e {\n      margin-top: -9px;\n      margin-right: -9px; }\n    .ReactCrop .ord-se {\n      margin-bottom: -9px;\n      margin-right: -9px; }\n    .ReactCrop .ord-s {\n      margin-bottom: -9px;\n      margin-left: -9px; }\n    .ReactCrop .ord-sw {\n      margin-bottom: -9px;\n      margin-left: -9px; }\n    .ReactCrop .ord-w {\n      margin-top: -9px;\n      margin-left: -9px; }\n    .ReactCrop__drag-bar.ord-n {\n      height: 14px;\n      margin-top: -7px; }\n    .ReactCrop__drag-bar.ord-e {\n      width: 14px;\n      margin-right: -7px; }\n    .ReactCrop__drag-bar.ord-s {\n      height: 14px;\n      margin-bottom: -7px; }\n    .ReactCrop__drag-bar.ord-w {\n      width: 14px;\n      margin-left: -7px; } }\n", ""]);



/***/ }),
/* 59 */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(60);

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":false}

options.transform = transform
options.insertInto = function anonymous(
) {
return __webpack_require__(12)();
};

var update = __webpack_require__(13)(content, options);

if(content.locals) module.exports = content.locals;



/***/ }),
/* 60 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(11)(false);
// Module
exports.push([module.i, "/* Following variables are available to uuApps / libraries using uu5g04 library.\n   This file can be imported using:\n    import \"~uu5g04/dist/tools.less\";\n*/\n/***************** FLEX start *****************/\n/* @deprecated */\n/***************** FLEX end *****************/\n/***************** ANIMATIONS start *****************/\n/* @deprecated */\n/***************** ANIMATIONS end *****************/\n/***************** LAYOUT start *****************/\n/* @deprecated */\n/***************** LAYOUT end *****************/\n.uu5-common-temp-textarea {\n  opacity: 0;\n  position: absolute;\n  left: -1000px;\n  top: -1000px;\n}\n.uu5-imaging-thumbnail-generator {\n  padding: 8px;\n  display: flex;\n  justify-content: flex-start;\n  flex-direction: column;\n}\n@media screen and (min-width: 769px) {\n  .uu5-imaging-thumbnail-generator-aside.uu5-imaging-thumbnail-generator {\n    display: inline-flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n  }\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area {\n  background-color: #e5e5e5;\n  width: 100%;\n  height: 240px;\n  position: relative;\n  display: flex;\n  border: 2px dashed #cacaca;\n  overflow: hidden;\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area.set {\n  border: none;\n}\n@media screen and (min-width: 769px) {\n  .uu5-imaging-thumbnail-generator-aside.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area {\n    width: 520px;\n    height: 344px;\n  }\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .uu5-imaging-thumbnail-generator-upload-text {\n  width: 100%;\n  position: absolute;\n  left: 50%;\n  top: auto;\n  bottom: 15%;\n  transform: translateX(-50%);\n  text-align: center;\n}\n@media screen and (min-width: 769px) {\n  .uu5-imaging-thumbnail-generator-aside.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .uu5-imaging-thumbnail-generator-upload-text {\n    bottom: 20%;\n  }\n}\n@media screen and (min-width: 481px) {\n  .uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .uu5-imaging-thumbnail-generator-upload-text .uu5-bricks-header {\n    font-size: 30px;\n    line-height: 40px;\n  }\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .uu5-imaging-thumbnail-generator-upload-text .uu5-bricks-header {\n  color: rgba(0, 0, 0, 0.36);\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .uu5-imaging-thumbnail-generator-upload-text .uu5-bricks-p {\n  font-size: 16px;\n  line-height: 21px;\n  color: rgba(0, 0, 0, 0.36);\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .uu5-forms-input.uu5-forms-file {\n  height: 100%;\n  width: 100%;\n  margin: 0;\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .uu5-forms-input.uu5-forms-file:not([class^=\"color-schema-\"]):not([class*=\" color-schema-\"]):not(.uu5-forms-file-selected):not(.uu5-common-disabled):not(.uu5-forms-input-read-only) .uu5-forms-items-input:hover:not(:focus):not(:active) {\n  background-color: transparent;\n  border: none;\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .uu5-forms-input.uu5-forms-file .uu5-forms-input-wrapper {\n  margin: 0;\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .uu5-forms-input.uu5-forms-file .uu5-forms-file-input-row {\n  height: 100%;\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .uu5-forms-input.uu5-forms-file .uu5-forms-items-input {\n  background-color: transparent;\n  width: 100%;\n  height: 100%;\n  border: none;\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .uu5-forms-input.uu5-forms-file .uu5-forms-items-input:focus {\n  background-color: transparent !important;\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .uu5-forms-input.uu5-forms-file .uu5-forms-items-input .uu5-bricks-icon.mdi.mdi-cloud-upload {\n  padding: 0;\n  height: auto;\n  left: 50%;\n  top: 10%;\n  transform: translateX(-50%);\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .uu5-forms-input.uu5-forms-file .uu5-forms-items-input .uu5-bricks-icon.mdi.mdi-cloud-upload:before {\n  font-size: 70px;\n  color: rgba(0, 0, 0, 0.36);\n}\n@media screen and (min-width: 769px) {\n  .uu5-imaging-thumbnail-generator-aside.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .uu5-forms-input.uu5-forms-file .uu5-forms-items-input .uu5-bricks-icon.mdi.mdi-cloud-upload {\n    top: 25%;\n  }\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .ReactCrop {\n  vertical-align: top;\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .ReactCrop img {\n  max-width: 100%;\n  max-height: 240px;\n}\n@media screen and (min-width: 769px) {\n  .uu5-imaging-thumbnail-generator-aside.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .ReactCrop img {\n    max-width: 520px;\n    max-height: 344px;\n  }\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .ReactCrop .ReactCrop__crop-selection {\n  border: none;\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .ReactCrop .ReactCrop__crop-selection:after {\n  width: 100%;\n  content: \" \";\n  display: block;\n  border: 2px dashed white;\n  height: 100%;\n  transform: scale(1.01);\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .ReactCrop .ReactCrop__crop-selection .ReactCrop__drag-elements .ReactCrop__drag-handle {\n  margin: 0;\n  background: none;\n  outline: none;\n  border: none;\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .ReactCrop .ReactCrop__crop-selection .ReactCrop__drag-elements .ord-nw,\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .ReactCrop .ReactCrop__crop-selection .ReactCrop__drag-elements .ord-ne,\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .ReactCrop .ReactCrop__crop-selection .ReactCrop__drag-elements .ord-sw {\n  display: none;\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .ReactCrop .ReactCrop__crop-selection .ReactCrop__drag-elements .ord-se {\n  width: 0;\n  height: 0;\n  border-bottom: 10px solid white;\n  border-left: 10px solid transparent;\n  z-index: 9;\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .ReactCrop.avatar .ReactCrop__crop-selection {\n  border-radius: 50%;\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-image-area .ReactCrop.avatar .ReactCrop__crop-selection:after {\n  border-radius: 50%;\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-img-align {\n  margin: auto;\n  align-self: center;\n  max-width: 100%;\n  flex: none;\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-mask-items {\n  width: 100%;\n  padding-top: 8px;\n  align-self: flex-start;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n}\n@media screen and (min-width: 769px) {\n  .uu5-imaging-thumbnail-generator-aside.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-mask-items {\n    padding-top: 0;\n    padding-left: 16px;\n    width: 152px;\n    justify-content: flex-start;\n  }\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-mask-items .uu5-imaging-thumbnail-generator-mask-item {\n  width: 64px;\n  height: 80px;\n  position: relative;\n  margin-right: 4px;\n  margin-bottom: 8px;\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-mask-items .uu5-imaging-thumbnail-generator-mask-item:last-child {\n  margin-right: 0;\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-mask-items .uu5-imaging-thumbnail-generator-mask-item.selected {\n  box-shadow: 0 0 0 2px #3991e1;\n  border-radius: 4px;\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-mask-items .uu5-imaging-thumbnail-generator-mask-item .uu5-imaging-thumbnail-generator-area-item {\n  margin: 0;\n  border: none;\n  cursor: pointer;\n  background-color: #e5e5e5;\n  background-size: 100% 100%;\n  background-repeat: no-repeat;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-mask-items .uu5-imaging-thumbnail-generator-mask-item p {\n  position: absolute;\n  left: 50%;\n  top: auto;\n  bottom: 0;\n  transform: translateX(-50%);\n  margin: 0;\n  font-size: 10px;\n  line-height: 14px;\n  color: #303030;\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-mask-items .uu5-imaging-thumbnail-generator-button-control {\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: center;\n  width: 100%;\n}\n@media screen and (min-width: 769px) {\n  .uu5-imaging-thumbnail-generator-aside.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-mask-items .uu5-imaging-thumbnail-generator-button-control {\n    padding-top: 16px;\n    flex-wrap: wrap;\n  }\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-mask-items .uu5-imaging-thumbnail-generator-button-control a {\n  display: block;\n  padding-right: 16px;\n  color: #d0021b;\n  font-size: 12px;\n  line-height: 16px;\n}\n@media screen and (min-width: 769px) {\n  .uu5-imaging-thumbnail-generator-aside.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-mask-items .uu5-imaging-thumbnail-generator-button-control a {\n    padding: 8px 0;\n  }\n}\n.uu5-imaging-thumbnail-generator .uu5-imaging-thumbnail-generator-mask-items .uu5-imaging-thumbnail-generator-button-control a:last-child {\n  padding-right: 0;\n}\n", ""]);



/***/ })
/******/ ]);
});