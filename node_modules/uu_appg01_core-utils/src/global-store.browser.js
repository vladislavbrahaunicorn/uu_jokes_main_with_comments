"use strict";

if (!window._uuAppGlobals) {
  window._uuAppGlobals = {};
}

/**
 * Global storage allowing to share objects accross multiple modules in various versions.
 */
class GlobalStore {
  /**
   * Returns global store with given name.
   * @param storeName Global store name.
   * @returns {GlobalStore} Instance of global store.
   */
  static get(storeName) {
    let store = window._uuAppGlobals[storeName];
    if (!store) {
      store = window._uuAppGlobals[storeName] = new GlobalStore();
    }
    return store;
  }

  /**
   * Stores global attribute.
   * @param key Global attribute name.
   * @param value Global attribute value.
   */
  set(key, value) {
    this._attributes[key] = value;
  }

  /**
   * Returns global attribute.
   * @param key Global attribute name.
   * @returns {*} Global attribute value.
   */
  get(key) {
    return this._attributes[key];
  }

  /**
   * Creates new instance of global store.
   * @private
   */
  constructor() {
    this._attributes = {};
  }
}

module.exports = GlobalStore;
