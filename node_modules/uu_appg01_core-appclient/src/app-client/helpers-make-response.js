function makeResponse(response) {
  return {
    status: response ? response.statusCode : 0,
    headers: function(aHeader) {
      if (!aHeader) return response ? getAllResponseHeaders(response) : [];
      return response ? getResponseHeader(response, aHeader) : null;
    },
    data: response.body != null ? response.body : response
  };
}

function getAllResponseHeaders(response) {
  let headers = Object.keys(response.headers);
  let strings = [];
  for (let i = 0; i < headers.length; i++) {
    let header = headers[i];
    if (header.match(/set-cookie/)) continue;
    strings.push(header + ": " + response.headers[header]);
  }
  return strings.sort().join("\n");
}

function getResponseHeader(response, header) {
  header = header.toLowerCase();
  if (response.headers.hasOwnProperty(header)) return `${response.headers[header]}`;
  return null;
}

module.exports = makeResponse;
