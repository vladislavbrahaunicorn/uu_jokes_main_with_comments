function makeResponse(xhr, error) {
  const res = {
    status: xhr ? xhr.status : 0,
    headers: function(aHeader) {
      if (!aHeader) return xhr ? xhr.getAllResponseHeaders() : [];
      return xhr ? xhr.getResponseHeader(aHeader) : null;
    },
    data: xhr.body != null ? xhr.body : xhr
  };

  if (xhr.filename) res.filename = xhr.filename;
  if (xhr.contentType) res.contentType = xhr.contentType;
  if (xhr.encoding) res.encoding = xhr.encoding;

  return error ? { ...res, ...error } : res;
}

module.exports = makeResponse;
