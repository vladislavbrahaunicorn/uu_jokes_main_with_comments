/**
 * LoggerMDC implementation of get and set
 * for Browser environment.
 */
module.exports = {
  setFactory(ContextStore, CTX_STORE_NAME, MDC_KEY) {
    return function set(key, value) {
      let store = ContextStore.get(CTX_STORE_NAME);
      if (!store) {
        ContextStore.create(CTX_STORE_NAME, noop);
        store = ContextStore.get(CTX_STORE_NAME);
      }
      let mdc = store.get(MDC_KEY);
      if (!mdc) {
        mdc = {};
        store.set(MDC_KEY, mdc);
      }
      mdc[key] = value;
    };
  },
  getFactory(ContextStore, CTX_STORE_NAME, MDC_KEY) {
    return function get(key) {
      let store = ContextStore.get(CTX_STORE_NAME);
      if (!store) {
        ContextStore.create(CTX_STORE_NAME, noop);
        store = ContextStore.get(CTX_STORE_NAME);
      }
      let mdc = store.get(MDC_KEY);
      if (mdc) {
        return mdc[key];
      }
    };
  }
};

function noop() {}
