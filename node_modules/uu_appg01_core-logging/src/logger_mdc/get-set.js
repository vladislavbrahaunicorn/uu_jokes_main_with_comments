/**
 * LoggerMDC implementation of get and set
 * for Node.js environment.
 */
module.exports = {
  setFactory(ContextStore, CTX_STORE_NAME, MDC_KEY) {
    return function set(key, value) {
      let store = ContextStore.get(CTX_STORE_NAME);
      if (store) {
        let mdc = store.get(MDC_KEY);
        if (!mdc) {
          mdc = {};
          store.set(MDC_KEY, mdc);
        }
        mdc[key] = value;
      }
    };
  },
  getFactory(ContextStore, CTX_STORE_NAME, MDC_KEY) {
    return function get(key) {
      let store = ContextStore.get(CTX_STORE_NAME);
      if (store) {
        let mdc = store.get(MDC_KEY);
        if (mdc) {
          return mdc[key];
        }
      }
    };
  }
};
