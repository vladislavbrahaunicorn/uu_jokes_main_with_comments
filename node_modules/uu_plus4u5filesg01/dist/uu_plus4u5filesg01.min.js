/*!
 * Copyright (c) 2018 Unicorn a.s.
 * All rights reserved.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("uu5g04"),require("uu5g04-bricks"),require("uu_appg01"),require("uu5tilesg01"),require("uu5imagingg01"),require("module"),require("uu5g04-forms"),require("react")):"function"==typeof define&&define.amd?define("uu_plus4u5filesg01",["uu5g04","uu5g04-bricks","uu_appg01","uu5tilesg01","uu5imagingg01","module","uu5g04-forms","react"],t):"object"==typeof exports?exports.uu_plus4u5filesg01=t(require("uu5g04"),require("uu5g04-bricks"),require("uu_appg01"),require("uu5tilesg01"),require("uu5imagingg01"),require("module"),require("uu5g04-forms"),require("react")):(e.Plus4U5=e.Plus4U5||{},e.Plus4U5.Files=t(e.UU5,e.UU5.Bricks,e.UuApp,e.UU5.Tiles,e.UU5.Imaging,e[void 0],e.UU5.Forms,e.React))}(window,function(i,n,s,r,a,o,l,u){return d={},p.m=c=[function(e,t){e.exports=i},function(e,t,i){"use strict";e.exports=function(i){var a=[];return a.toString=function(){return this.map(function(e){var t=function(e,t){var i=e[1]||"",n=e[3];if(!n)return i;if(t&&"function"==typeof btoa){var s=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(n),r=n.sources.map(function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"});return[i].concat(r).concat([s]).join("\n")}return[i].join("\n")}(e,i);return e[2]?"@media "+e[2]+"{"+t+"}":t}).join("")},a.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},n=0;n<this.length;n++){var s=this[n][0];null!=s&&(i[s]=!0)}for(n=0;n<e.length;n++){var r=e[n];null!=r[0]&&i[r[0]]||(t&&!r[2]?r[2]=t:t&&(r[2]="("+r[2]+") and ("+t+")"),a.push(r))}},a}},function(e,t,n){var i,s,r,l={},u=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===s&&(s=i.apply(this,arguments)),s}),a=(r={},function(e,t){if("function"==typeof e)return e();if(void 0===r[e]){var i=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}r[e]=i}return r[e]}),o=null,p=0,c=[],d=n(12);function m(e,t){for(var i=0;i<e.length;i++){var n=e[i],s=l[n.id];if(s){s.refs++;for(var r=0;r<s.parts.length;r++)s.parts[r](n.parts[r]);for(;r<n.parts.length;r++)s.parts.push(_(n.parts[r],t))}else{var a=[];for(r=0;r<n.parts.length;r++)a.push(_(n.parts[r],t));l[n.id]={id:n.id,refs:1,parts:a}}}}function h(e,t){for(var i=[],n={},s=0;s<e.length;s++){var r=e[s],a=t.base?r[0]+t.base:r[0],o={css:r[1],media:r[2],sourceMap:r[3]};n[a]?n[a].parts.push(o):i.push(n[a]={id:a,parts:[o]})}return i}function f(e,t){var i=a(e.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=c[c.length-1];if("top"===e.insertAt)n?n.nextSibling?i.insertBefore(t,n.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),c.push(t);else if("bottom"===e.insertAt)i.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var s=a(e.insertAt.before,i);i.insertBefore(t,s)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);0<=t&&c.splice(t,1)}function b(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var i=function(){0;return n.nc}();i&&(e.attrs.nonce=i)}return y(t,e.attrs),f(e,t),t}function y(t,i){Object.keys(i).forEach(function(e){t.setAttribute(e,i[e])})}function _(t,e){var i,n,s,r;if(e.transform&&t.css){if(!(r="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=r}if(e.singleton){var a=p++;i=o=o||b(e),n=T.bind(null,i,a,!1),s=T.bind(null,i,a,!0)}else s=t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",y(t,e.attrs),f(e,t),t}(e),n=function(e,t,i){var n=i.css,s=i.sourceMap,r=void 0===t.convertToAbsoluteUrls&&s;(t.convertToAbsoluteUrls||r)&&(n=d(n));s&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");var a=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(a),o&&URL.revokeObjectURL(o)}.bind(null,i,e),function(){g(i),i.href&&URL.revokeObjectURL(i.href)}):(i=b(e),n=function(e,t){var i=t.css,n=t.media;n&&e.setAttribute("media",n);if(e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}.bind(null,i),function(){g(i)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else s()}}e.exports=function(e,a){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(a=a||{}).attrs="object"==typeof a.attrs?a.attrs:{},a.singleton||"boolean"==typeof a.singleton||(a.singleton=u()),a.insertInto||(a.insertInto="head"),a.insertAt||(a.insertAt="bottom");var o=h(e,a);return m(o,a),function(e){for(var t=[],i=0;i<o.length;i++){var n=o[i];(s=l[n.id]).refs--,t.push(s)}e&&m(h(e,a),a);for(i=0;i<t.length;i++){var s;if(0===(s=t[i]).refs){for(var r=0;r<s.parts.length;r++)s.parts[r]();delete l[s.id]}}}};var v,C=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")});function T(e,t,i,n){var s=i?"":n.css;if(e.styleSheet)e.styleSheet.cssText=C(t,s);else{var r=document.createTextNode(s),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}},function(e,t){e.exports=n},function(e,t){e.exports=s},function(e,t){e.exports=r},function(e,t){e.exports=a},function(e,t,i){e.exports=i(8)},function(e,t,i){var n=i(9),s="undefined"!=typeof document,r=((n?n.uri:s&&(document.currentScript||Array.prototype.slice.call(document.getElementsByTagName("script"),-1)[0]||{}).src)||"").toString(),a="/4.0.0/";(r=r.split(/\//).slice(0,-1).join("/")+"/").substr(-a.length)===a&&(r=r.substr(0,r.length-a.length)+"/4.3.1/"),i.p=r,e.exports=i(37)},function(e,t){e.exports=o},function(e,t,i){var n=i(11);"string"==typeof n&&(n=[[e.i,n,""]]);var s={insertInto:"head",insertAt:{before:"[data-uu-app-styles-insert-before]"},hmr:!1,attrs:{"data-owner":"uu_plus4u5filesg01@4.3.1"},transform:void 0,insertInto:"head"};i(2)(n,s);n.locals&&(e.exports=n.locals)},function(e,t,i){(e.exports=i(1)(!1)).push([e.i,".plus4u5-files-file-manager-tile{position:relative}.plus4u5-files-file-manager-inner-tile{position:relative;border-radius:2px;border:1px solid #d6d6d6}.plus4u5-files-file-manager-selectable-only{cursor:pointer}.plus4u5-files-file-manager-tile .preview-field{min-height:127px;max-height:127px;height:127px;text-align:center;border-bottom:1px solid rgba(0,0,0,.12);display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;width:100%}.plus4u5-files-file-manager-tile .preview-content-wrapper{vertical-align:middle;height:100%}.plus4u5-files-file-manager-tile .tile-card{padding:1px}.plus4u5-files-file-manager-tile-selected .tile-card{padding:0}.plus4u5-files-file-manager-tile .preview-content-wrapper .uu5-bricks-image{max-height:127px;margin:0 auto;height:100%;object-fit:scale-down;border:8px solid transparent}.plus4u5-files-file-manager-tile .preview-field .uu5-bricks-icon{font-size:64px;color:rgba(0,0,0,.54)}.plus4u5-files-file-manager-tile .info-field{min-height:64px;padding:8px}.plus4u5-files-file-manager-tile .info-field .primary-attribute,.plus4u5-files-file-manager-tile .info-field .secondary-attribute{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.plus4u5-files-file-manager-tile .info-field .primary-attribute{color:rgba(0,0,0,.7);min-height:22px}.plus4u5-files-file-manager-tile .info-field .secondary-attribute{color:rgba(0,0,0,.54);font-size:12px;min-height:18px}.plus4u5-files-file-manager-tile .select-button{position:absolute;left:0;top:0;width:48px;height:48px;border-radius:0 0 16px 0;opacity:0}.plus4u5-files-file-manager-tile-selected .select-button{left:-1px;top:-1px}.plus4u5-files-file-manager-tile:hover .select-button{opacity:.5}.plus4u5-files-file-manager-tile-selected .select-button,.plus4u5-files-file-manager-tile-selected:hover .select-button{opacity:1}.plus4u5-files-file-manager-tile .button-panel{position:absolute;top:8px;right:8px;opacity:0;-webkit-transition:opacity .1s;transition:opacity .1s;text-align:right}.plus4u5-files-file-manager-tile-selected .button-panel{top:7px;right:7px}.plus4u5-files-file-manager-tile:hover .button-panel{opacity:1}.plus4u5-files-file-manager-tile .button-panel .uu5-bricks-icon{vertical-align:top}.plus4u5-files-file-manager-tile .button-panel .uu5-bricks-button:not(:last-child){margin-right:4px}.plus4u5-files-file-manager-tile .button-panel .uu5-bricks-dropdown{vertical-align:bottom}.plus4u5-files-file-manager-tile .uu5-bricks-link{color:#000!important}.plus4u5-files-file-manager-tile.small-tile .preview-field{display:inline-block;width:64px;height:64px;min-height:64px;max-height:64px;text-align:center;vertical-align:top;border:none}.plus4u5-files-file-manager-tile.small-tile .preview-field .uu5-bricks-icon{font-size:36px;margin-top:4px}.plus4u5-files-file-manager-tile.small-tile .info-field{display:inline-block;width:100%;max-width:calc(100% - 80px);height:64px}.plus4u5-files-file-manager-tile.small-tile .info-field-row:first-child{margin-top:2px}.plus4u5-files-file-manager-tile.small-tile .info-field-row{line-height:16px}.plus4u5-files-file-manager-tile.small-tile .info-field-col{display:inline-block;max-width:65%;color:rgba(0,0,0,.54);font-size:12px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.plus4u5-files-file-manager-tile.small-tile .info-field-row:first-child .info-field-col:first-child{font-size:16px;min-height:24px;color:rgba(0,0,0,.7)}.plus4u5-files-file-manager-tile.small-tile .info-field-col:nth-child(2){float:right;max-width:35%}@media (max-width:768px){.plus4u5-files-file-manager-tile .button-panel{position:static;opacity:1;-webkit-transition:none;transition:none;padding:8px;height:48px}.plus4u5-files-file-manager-tile .select-button{position:absolute;left:8px;top:8px;width:32px;height:32px;border-radius:2px;opacity:1;-webkit-transition:none;transition:none}.plus4u5-files-file-manager-tile-selected .select-button{left:7px;top:7px}.plus4u5-files-file-manager-tile .preview-field{min-height:144px;height:144px;border-top:1px solid rgba(0,0,0,.12)}.plus4u5-files-file-manager-tile .preview-field .uu5-bricks-icon{font-size:104px;line-height:104px}.plus4u5-files-file-manager-tile .preview-content-wrapper{display:table-cell;vertical-align:middle}.plus4u5-files-file-manager-tile .preview-content-wrapper,.plus4u5-files-file-manager-tile .preview-content-wrapper .uu5-bricks-image{max-height:142px}.plus4u5-files-file-manager-tile .info-field .primary-attribute{font-size:16px;min-height:24px}.plus4u5-files-file-manager-tile .info-field .secondary-attribute{font-size:14px;min-height:20px}.plus4u5-files-file-manager-tile .button-panel .uu5-bricks-button{line-height:16px;font-size:16px}.plus4u5-files-file-manager-tile .button-panel .uu5-bricks-button:not(:last-child){margin-right:8px}.plus4u5-files-file-manager-tile:hover .select-button{opacity:1}.plus4u5-files-file-manager-tile.small-tile .preview-field .uu5-bricks-icon{line-height:1.5}.plus4u5-files-file-manager-tile.small-tile .preview-field{width:64px;padding:0}.plus4u5-files-file-manager-tile.small-tile .info-box{border-top:1px solid rgba(0,0,0,.12)}.plus4u5-files-file-manager-tile.small-tile .info-field{max-width:calc(100% - 71px)}.plus4u5-files-file-manager-tile.small-tile .button-panel{vertical-align:top;padding-left:16px;height:48px}}",""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var s=t.protocol+"//"+t.host,r=s+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,n=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(n)?e:(i=0===n.indexOf("//")?n:0===n.indexOf("/")?s+n:r+n.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t){e.exports=l},function(e,t,i){var n=i(15);"string"==typeof n&&(n=[[e.i,n,""]]);var s={insertInto:"head",insertAt:{before:"[data-uu-app-styles-insert-before]"},hmr:!1,attrs:{"data-owner":"uu_plus4u5filesg01@4.3.1"},transform:void 0,insertInto:"head"};i(2)(n,s);n.locals&&(e.exports=n.locals)},function(e,t,i){(e.exports=i(1)(!1)).push([e.i,".plus4u5-files-file-manager-type-filter{width:100%;padding:8px 0 0;border-bottom:1px solid #d6d6d6;display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.plus4u5-files-file-manager-type-filter .left-col .label{margin-right:16px}.plus4u5-files-file-manager-type-filter .left-col .uu5-bricks-button-switch.uu5-bricks-button>*,.plus4u5-files-file-manager-type-filter .right-col .uu5-bricks-button>*{vertical-align:top}.plus4u5-files-file-manager-type-filter .right-col .uu5-bricks-button{background-color:transparent;margin-bottom:8px;padding:0}@media (max-width:480px){.plus4u5-files-file-manager-type-filter{display:block}.plus4u5-files-file-manager-type-filter .left-col,.plus4u5-files-file-manager-type-filter .right-col{min-width:100%;text-align:left}}",""])},function(e,t,i){var n=i(17);"string"==typeof n&&(n=[[e.i,n,""]]);var s={insertInto:"head",insertAt:{before:"[data-uu-app-styles-insert-before]"},hmr:!1,attrs:{"data-owner":"uu_plus4u5filesg01@4.3.1"},transform:void 0,insertInto:"head"};i(2)(n,s);n.locals&&(e.exports=n.locals)},function(e,t,i){(e.exports=i(1)(!1)).push([e.i,".plus4u5-files-update-file-form{min-height:84px}",""])},function(e,t,i){var n=i(19);"string"==typeof n&&(n=[[e.i,n,""]]);var s={insertInto:"head",insertAt:{before:"[data-uu-app-styles-insert-before]"},hmr:!1,attrs:{"data-owner":"uu_plus4u5filesg01@4.3.1"},transform:void 0,insertInto:"head"};i(2)(n,s);n.locals&&(e.exports=n.locals)},function(e,t,i){(e.exports=i(1)(!1)).push([e.i,".plus4u5-files-add-file-form{min-height:84px}.plus4u5-files-add-file-form .uu5-forms-file{margin-bottom:24px}.plus4u5-files-add-file-form .uu5-bricks-panel{padding-bottom:20px}.plus4u5-files-add-file-form .uu5-bricks-panel .uu5-forms-input:first-child{margin-top:0}.plus4u5-files-add-file-form .uu5-bricks-panel .uu5-forms-input:last-child{margin-bottom:0}.plus4u5-files-add-file-form .uu5-bricks-panel .uu5-bricks-panel-body-body{padding-left:0;padding-right:0}.plus4u5-files-add-file-form .uu5-bricks-panel .uu5-bricks-panel-header{background-color:transparent;border-bottom:1px solid #bdbdbd;-webkit-box-pack:start;justify-content:start;padding-bottom:4px}.plus4u5-files-add-file-form .uu5-bricks-panel .uu5-bricks-panel-header:focus,.plus4u5-files-add-file-form .uu5-bricks-panel .uu5-bricks-panel-header:hover{background-color:transparent!important}",""])},function(e,t,i){var n=i(21);"string"==typeof n&&(n=[[e.i,n,""]]);var s={insertInto:"head",insertAt:{before:"[data-uu-app-styles-insert-before]"},hmr:!1,attrs:{"data-owner":"uu_plus4u5filesg01@4.3.1"},transform:void 0,insertInto:"head"};i(2)(n,s);n.locals&&(e.exports=n.locals)},function(e,t,i){(e.exports=i(1)(!1)).push([e.i,".plus4u5-files-delete-file-form .uu5-bricks-p{text-align:center;margin:40px}",""])},function(e,t,i){var n=i(23);"string"==typeof n&&(n=[[e.i,n,""]]);var s={insertInto:"head",insertAt:{before:"[data-uu-app-styles-insert-before]"},hmr:!1,attrs:{"data-owner":"uu_plus4u5filesg01@4.3.1"},transform:void 0,insertInto:"head"};i(2)(n,s);n.locals&&(e.exports=n.locals)},function(e,t,i){(e.exports=i(1)(!1)).push([e.i,".plus4u5-files-preview-file-form{min-height:64px}.plus4u5-files-preview-file-form .uu5-bricks-image{margin:0 auto 8px;max-height:calc(100vh - 112px)}",""])},function(e,t,i){var n=i(25);"string"==typeof n&&(n=[[e.i,n,""]]);var s={insertInto:"head",insertAt:{before:"[data-uu-app-styles-insert-before]"},hmr:!1,attrs:{"data-owner":"uu_plus4u5filesg01@4.3.1"},transform:void 0,insertInto:"head"};i(2)(n,s);n.locals&&(e.exports=n.locals)},function(e,t,i){(e.exports=i(1)(!1)).push([e.i,".plus4u5-files-share-file-form{min-height:64px}.plus4u5-files-share-file-form .uu-uuapp-designkit-embedded-text .uu5-bricks-header{font-size:14px;color:rgba(0,0,0,.54);margin-top:24px;margin-bottom:16px}.plus4u5-files-share-file-form .plus4u5-files-share-file-form-radio-label{font-size:14px;color:rgba(0,0,0,.54);margin-top:16px;margin-bottom:8px}.plus4u5-files-share-file-form .uu5-forms-radios{margin-top:0}.plus4u5-files-share-file-form .uu5-forms-message{border:none}.plus4u5-files-share-file-form .uu5-forms-radios:not(.uu5-common-disabled) .uu5-forms-checkbox-checked:not(.uu5-forms-checkbox-type-switch) .uu5-forms-right-wrapper{background-color:transparent}",""])},function(e,t,i){var n=i(27);"string"==typeof n&&(n=[[e.i,n,""]]);var s={insertInto:"head",insertAt:{before:"[data-uu-app-styles-insert-before]"},hmr:!1,attrs:{"data-owner":"uu_plus4u5filesg01@4.3.1"},transform:void 0,insertInto:"head"};i(2)(n,s);n.locals&&(e.exports=n.locals)},function(e,t,i){(e.exports=i(1)(!1)).push([e.i,'.plus4u5-files-dnd-form{min-height:84px}.plus4u5-files-dnd-form .row .uu5-bricks-column:first-child .plus4u5-files-dnd-form-row-label,.plus4u5-files-dnd-form .row .uu5-bricks-column:first-child .uu5-forms-text{width:100%;max-width:240px;float:right}.plus4u5-files-dnd-form .plus4u5-files-dnd-form-row .uu5-bricks-column .plus4u5-files-dnd-form-row-label{color:rgba(0,0,0,.54);font-size:14px}.plus4u5-files-dnd-form .plus4u5-files-dnd-form-row .uu5-bricks-column .plus4u5-files-dnd-form-row-label-required:after{content:"*";display:inline-block;width:0;color:#d0021b}@media (max-width:480px){.plus4u5-files-dnd-form .plus4u5-files-dnd-form-row:not(:nth-child(2)){margin-top:48px}.plus4u5-files-dnd-form .plus4u5-files-dnd-form-row .uu5-bricks-column:first-child .plus4u5-files-dnd-form-row-label,.plus4u5-files-dnd-form .plus4u5-files-dnd-form-row .uu5-bricks-column:first-child .uu5-forms-text,.plus4u5-files-dnd-form .plus4u5-files-dnd-form-row .uu5-bricks-column:last-child .plus4u5-files-dnd-form-row-label{max-width:none;float:none}.plus4u5-files-dnd-form .uu5-forms-input{margin:0}}',""])},function(e,t,i){var n=i(29);"string"==typeof n&&(n=[[e.i,n,""]]);var s={insertInto:"head",insertAt:{before:"[data-uu-app-styles-insert-before]"},hmr:!1,attrs:{"data-owner":"uu_plus4u5filesg01@4.3.1"},transform:void 0,insertInto:"head"};i(2)(n,s);n.locals&&(e.exports=n.locals)},function(e,t,i){(e.exports=i(1)(!1)).push([e.i,".plus4u5-files-controls{text-align:center;padding:0;font-family:ClearSans-Medium}.plus4u5-files-controls .uu5-bricks-button{margin:0 4px;min-width:96px}.plus4u5-files-controls .plus4u5-files-controls-code-buttons{margin-bottom:4px}@media (min-width:992px){.plus4u5-files-controls .plus4u5-files-controls-code-buttons{display:inline-block;position:absolute;left:12px;margin-bottom:0}}@media (max-width:768px){.plus4u5-files-controls .uu5-bricks-button{margin:2px 4px}}",""])},function(e,t,i){var n=i(31);"string"==typeof n&&(n=[[e.i,n,""]]);var s={insertInto:"head",insertAt:{before:"[data-uu-app-styles-insert-before]"},hmr:!1,attrs:{"data-owner":"uu_plus4u5filesg01@4.3.1"},transform:void 0,insertInto:"head"};i(2)(n,s);n.locals&&(e.exports=n.locals)},function(e,t,i){(e.exports=i(1)(!1)).push([e.i,".plus4u5-files-form-controller-modal-header{width:100%}",""])},function(e,t,i){var n=i(33);"string"==typeof n&&(n=[[e.i,n,""]]);var s={insertInto:"head",insertAt:{before:"[data-uu-app-styles-insert-before]"},hmr:!1,attrs:{"data-owner":"uu_plus4u5filesg01@4.3.1"},transform:void 0,insertInto:"head"};i(2)(n,s);n.locals&&(e.exports=n.locals)},function(e,t,i){(e.exports=i(1)(!1)).push([e.i,".plus4u5-files-file-uploader{position:relative;border-radius:2px;margin:8px 0}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-initial-content,.plus4u5-files-file-uploader .plus4u5-files-file-uploader-progress-content{font-size:16px;color:rgba(0,0,0,.3);padding:8px 16px;max-height:320px;overflow:auto}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-dnd-content{text-align:center;border:3px dashed rgba(0,0,0,.17);font-size:18px;padding:24px 64px}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-dnd-content .plus4u5-files-file-uploader-stats-wrapper{text-align:left;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-progress-stat-message{margin-top:-2px}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-hover-area{position:absolute;top:8px;bottom:8px;left:8px;right:8px;background-color:#e3f2fd;z-index:-1}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-progress-content{position:relative}.plus4u5-files-file-uploader.plus4u5-files-file-uploader-success-state{background-color:#f1f8e9}.plus4u5-files-file-uploader.plus4u5-files-file-uploader-success-state .plus4u5-files-file-uploader-dnd-content{border-color:#388e3c}.plus4u5-files-file-uploader.plus4u5-files-file-uploader-success-state .plus4u5-files-file-uploader-progress-stat-message{color:#4caf50}.plus4u5-files-file-uploader.plus4u5-files-file-uploader-failure-state{background-color:#ffebee}.plus4u5-files-file-uploader.plus4u5-files-file-uploader-failure-state .plus4u5-files-file-uploader-dnd-content{border-color:#dd3d3d}.plus4u5-files-file-uploader.plus4u5-files-file-uploader-failure-state .plus4u5-files-file-uploader-progress-stat-message{color:#f44336}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-stats-wrapper{color:#000;margin-top:8px}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-progress-stat{display:-webkit-box;display:flex;-webkit-box-align:baseline;align-items:baseline}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-progress-stat .plus4u5-files-file-uploader-progress-stat-content{margin-left:12px}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-progress-stat .uu5-bricks-icon{font-size:20px}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-progress-stat+.plus4u5-files-file-uploader-progress-stat{margin-top:2px}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-result-failed,.plus4u5-files-file-uploader .plus4u5-files-file-uploader-result-success{font-family:ClearSans-Medium}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-reset-button{position:absolute;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;top:0;right:0;width:32px;height:32px;font-size:20px}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-reset-button.uu5-bricks-link,.plus4u5-files-file-uploader .plus4u5-files-file-uploader-reset-button.uu5-bricks-link:focus,.plus4u5-files-file-uploader .plus4u5-files-file-uploader-reset-button.uu5-bricks-link:hover,.plus4u5-files-file-uploader .plus4u5-files-file-uploader-reset-button.uu5-bricks-link:visited{text-decoration:none;color:rgba(0,0,0,.54)}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-progress-stat .mdi-checkbox-marked-circle,.plus4u5-files-file-uploader .plus4u5-files-file-uploader-result-success{color:#4caf50}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-progress-stat .mdi-alert,.plus4u5-files-file-uploader .plus4u5-files-file-uploader-result-failed{color:#f44336}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-progress-stat .mdi-loading{-webkit-animation:spin 1.2s linear infinite;animation:spin 1.2s linear infinite}@-webkit-keyframes plus4u5-files-file-uploader-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes plus4u5-files-file-uploader-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}",""])},function(e,t){e.exports=u},function(e,t,i){var n=i(36);"string"==typeof n&&(n=[[e.i,n,""]]);var s={insertInto:"head",insertAt:{before:"[data-uu-app-styles-insert-before]"},hmr:!1,attrs:{"data-owner":"uu_plus4u5filesg01@4.3.1"},transform:void 0,insertInto:"head"};i(2)(n,s);n.locals&&(e.exports=n.locals)},function(e,t,i){(e.exports=i(1)(!1)).push([e.i,".plus4u5-files-file-manager .ReactVirtualized__Grid__innerScrollContainer{overflow:visible!important}.plus4u5-files-file-manager .plus4u5-files-file-manager-empty-list-warning{margin-top:64px;text-align:center;color:rgba(0,0,0,.54)}.plus4u5-files-file-manager .plus4u5-files-file-manager-empty-list-warning .uu5-bricks-icon{font-size:64px}.plus4u5-files-file-manager .plus4u5-files-file-manager-empty-list-warning .uu5-common-div{margin:8px 16px;font-size:24px}.plus4u5-files-file-manager .plus4u5-files-file-manager-dnd-wrapper{border-bottom:1px solid #d6d6d6}.plus4u5-files-file-manager .uu5-tiles-list-controller-toolbar-container{z-index:auto}.plus4u5-files-file-manager .uu5-bricks-card,.plus4u5-files-file-manager .uu5-tiles-list-virtualized{overflow:visible!important}",""])},function(e,t,i){"use strict";i.r(t);var h=i(0),g=i.n(h),p=(i(3),i(5),{LSI_LABEL_ADD_BINARY:{cs:"Nahrát soubor",en:"Upload File"},LSI_LABEL_ADD_BINARIES:{cs:"Nahrát soubory",en:"Upload Files"},LSI_LABEL_UPDATE_BINARY:{cs:"Upravit soubor",en:"Update File"},LSI_UPDATE_BINARY_META_DATA_FORM_HEADER:{cs:"Upravit tagy souboru",en:"Update File Tags"},LSI_LABEL_DELETE_BINARY:{cs:"Smazat soubor",en:"Delete File"},LSI_LABEL_FILE_MANAGER:{cs:"Správce souborů",en:"File Manager"},LSI_LABEL_FILE_MANAGER_HEADER:{cs:"Soubory",en:"Files"},LSI_LABEL_FILE_MANAGER_SEARCH_PLACEHOLDER:{cs:"Hledat soubor...",en:"Search file..."},LSI_LABEL_FILE_MANAGER_DROP_BAR_CONTENT:{cs:"Sem přetáhněte soubory k nahrání",en:"Drop files to upload here"},LSI_LABEL_FILE_MANAGER_DROP_ZONE:{cs:"Přetáhněte soubory k nahrání",en:"Drop files to upload"},LSI_LABEL_FILE_MANAGER_EMPTY_WARNING:{cs:"Úložiště neobsahuje žádné soubory.",en:"The storage does not contain any files."},LSI_LABEL_FILE_MANAGER_COPY_INFO:{cs:"Kód byl zkopírován do schránky.",en:"Code has been copied to clipboard."},LSI_LABEL_FILE_MANAGER_ACTION_FULL_TILE:{cs:"Zobraz velké dlaždice",en:"Show Full Tile"},LSI_LABEL_FILE_MANAGER_ACTION_SMALL_TILE:{cs:"Zobraz kompaktní dlaždice",en:"Show Compact Tile"},LSI_LABEL_FILE_MANAGER_FILTER_HEADER:{cs:"Filtry",en:"Filters"},LSI_LABEL_FILE_MANAGER_FILTER_RESET:{cs:"Zrušit filtry",en:"Reset filters"},LSI_LABEL_FILE_MANAGER_FILTER_IMAGE:{cs:"Obrázky",en:"Images"},LSI_LABEL_FILE_MANAGER_FILTER_TEXT:{cs:"Dokumenty",en:"Documents"},LSI_LABEL_FILE_MANAGER_FILTER_ARCHIVE:{cs:"Archivy",en:"Archives"},LSI_LABEL_FILE_MANAGER_FILTER_OTHER:{cs:"Ostatní",en:"Other"},LSI_LABEL_FILE_MANAGER_SHARE_HEADER:{cs:"Sdílet soubor",en:"Share File"},LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_PREVIEW:{cs:"Náhled",en:"Preview"},LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_SHARE:{cs:"Sdílet",en:"Share"},LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_DOWNLOAD:{cs:"Stáhnout",en:"Download"},LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_UPDATE:{cs:"Nahradit",en:"Update"},LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_UPDATE_TAGS:{cs:"Upravit tagy",en:"Update Tags"},LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_DELETE:{cs:"Smazat",en:"Delete"},LSI_LABEL_FILE_MANAGER_SHARE_RADIO_LABEL:{cs:"Sdílet",en:"Share"},LSI_LABEL_FILE_MANAGER_SHARE_TYPE_CODE:{cs:"Kód",en:"Code"},LSI_LABEL_FILE_MANAGER_SHARE_TYPE_IMAGE:{cs:"Komponentu obrázku",en:"Image Component"},LSI_LABEL_FILE_MANAGER_SHARE_TYPE_FILE_LINK:{cs:"Komponentu odkazu",en:"Link Component"},LSI_LABEL_FILE_MANAGER_SHARE_TYPE_URI:{cs:"URI",en:"URI"},LSI_LABEL_DELETE_BINARY_SUCCESS_CONFIRM_MSG:{cs:"Soubor byl úspěšně smazán.",en:"The file has been successfully deleted."},LSI_LABEL_SHARE_BINARY_SUCCESS_CONFIRM_MSG:{cs:"Zkopírováno do schránky",en:"Copied to clipboard"},LSI_LABEL_FILE_MANAGER_SHARE_TEXT:{cs:"Text ke zkopírování",en:"Text to copy"},LSI_LABEL_FILE_MANAGER_PREVIEW_ERROR:{en:"File does not exist. It was probably deleted.",cs:"Soubor neexistuje. Nejspíš byl smazán."},LSI_LABEL_FILE_MANAGER_UPLOAD_RESULT_SUCCESS:{en:"All files were successfuly uploaded.",cs:"Všechny soubory byly úspěšně nahrány."},LSI_LABEL_FILE_MANAGER_UPLOAD_RESULT_FAILED:{en:"Some files could not be uploaded.",cs:"Některé soubory se nepodařilo nahrát."},LSI_LABEL_ADD_BINARY_CODE:{cs:"Kód",en:"Code"},LSI_LABEL_ADD_BINARY_CODE_REQUIRED:{cs:"Kód je povinný",en:"Code is required"},LSI_LABEL_ADD_TAGS:{cs:"Tagy",en:"Tags"},LSI_LABEL_ADD_BINARY_FILE_SIZE_EXCEEDED:{cs:"Soubor je příliš velký. Maximální velikost souboru je ${maxSize}kB.",en:"The file is too large. Maximal file size is ${maxSize}kB."},LSI_LABEL_ADD_BINARY_FILE:{cs:"Soubor",en:"File"},LSI_LABEL_ADD_BINARY_FILE_REQUIRED:{cs:"Soubor je povinný.",en:"File is required."},LSI_LABEL_ADD_BINARY_ADVANCED:{cs:"Rozšířené",en:"Advanced"},LSI_LABEL_DELETE_BINARY_MSG:{cs:"Opravdu chcete trvale odstranit soubor ${filename}?",en:"Do you really want to delete the file ${filename}?"},LSI_LABEL_COPY_FILE_MANAGER_LIST_FAILED:{en:"An error occurred while receiving data from server.",cs:"Nepodařilo se načíst data ze serveru."},LSI_LABEL_BUTTON_CANCEL:{cs:"Zrušit",en:"Cancel"},LSI_LABEL_BUTTON_SAVE:{cs:"Uložit",en:"Save"},LSI_LABEL_BUTTON_DELETE:{cs:"Smazat",en:"Delete"},LSI_LABEL_BUTTON_COPY:{cs:"Kopírovat",en:"Copy"},LSI_INVALID_CODE:{cs:"Kód je nevalidní.",en:"Code is invalid."},LSI_INVALID_TAGS:{cs:"Tagy $1 nejsou povolené.",en:"Set tags $1 are not allowed."},LSI_DUPLICATE_CODE:{en:"Given code is not unique.",cs:"Zadaný kód je již obsazen."},LSI_DEFAULT_ERROR_MESSAGE:{en:"Sending failed!",cs:"Odeslání selhalo."},commandErrors:{"uu-app-binarystore/uuBinaryCreateBinary/duplicateCode":{en:"Given code is not unique.",cs:"Zadaný kód je již obsazen."},"uu-app-binarystore/uuBinaryCreateBinary/invalidDtoIn":{en:"Input data is not valid.",cs:"Zadaná vstupní data nejsou validní."},"uu-app-binarystore/uuBinaryDeleteBinary/invalidDtoIn":{en:"Input data is not valid.",cs:"Zadaná vstupní data nejsou validní."},resizeFailed:{en:"Resizing failed!",cs:"Změna velikosti selhala."},default:{en:"Sending failed!",cs:"Odeslání selhalo."}}}),c=function(e,t){var i;if("string"==typeof e)i=e;else if(t){var n={};for(var s in e)for(var r in t)n[s]=e[s].replace("${".concat(r,"}"),t[r]);i=g.a.Common.Element.create(g.a.Bricks.Lsi,{lsi:n})}else i=g.a.Common.Element.create(g.a.Bricks.Lsi,{lsi:e});return i},n="Plus4U5.Files.",s="plus4u5-files-",u=(i(6),i(4));function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var d={APP_BASE_URI:location.protocol+"//"+location.host+h.Environment.getAppBasePath(),call:function(e,t,i,n){this._detectIe()&&"get"===e&&(i.data=i.data||{},i.data.Msiets=(new Date).getTime()),u.Client[e](t,i.data||null,n).then(function(e){return i.done(e.data)},function(e){return i.fail(e)})},callWithHeader:function(e,t,i,n,s){u.Client[e](t,i.data||null,n).then(function(e){return i.done(e.data,e.headers(s))},function(e){return i.fail(e)})},getCommandUri:function(e,t,i){var n=2<arguments.length&&void 0!==i?i:{};e&&!e.match(/\/$/)&&(e+="/");var s=(e||d.APP_BASE_URI)+t.replace(/^\/+/,""),r=h.Environment;if(r.tid||r.awid||r.vendor||r.app){var a=u.Uri.UriBuilder.parse(s);(r.tid||r.awid)&&(r.gatewayUri&&(a.setGateway=r.gatewayUri),r.tid&&(a.setTid=r.tid),r.awid&&(a.setAwid=r.awid)),(r.vendor||r.app)&&(r.vendor&&(a.setVendor=r.vendor),r.app&&(a.setApp=r.app),r.subApp&&(a.setSubApp=r.subApp)),s=a.toUri().toString()}var o=!0;for(var l in n)o?(s+="?",o=!1):s+="&",s+="".concat(l,"=").concat(n[l]);return s},_detectIe:function(){var e=window.navigator.userAgent;if(0<e.indexOf("MSIE "))return!0;if(0<e.indexOf("Trident/")){e.indexOf("rv:");return!0}return 0<e.indexOf("Edge/")},customPostMultipartCmd:function(e,t,i){var n=d.getCommandUri(e,t),s=new FormData;i.data.sys&&s.append("sys.rev",i.data.sys.rev),i.data.code&&s.append("code",i.data.code),Array.isArray(i.data.tagList)&&i.data.tagList.forEach(function(e,t){s.append("tagList["+t+"]",e)}),i.data.data&&s.append("data",i.data.data,i.data.data.name);var r=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?Object(arguments[e]):{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(e){a(t,e,i[e])})}return t}({},i,{data:s});d.call("post",n.toString(),r,{requestTimeout:0,headers:{"content-type":"multipart/form-data"}})},customPostCmd:function(e,t,i){var n=d.getCommandUri(e,t);d.call("post",n.toString(),i)},customGetCmd:function(e,t,i){var n=d.getCommandUri(e,t);d.call("get",n.toString(),i)},customGetNotTransformedCmd:function(e,t,i){var n=d.getCommandUri(e,t);d.callWithHeader("get",n.toString(),i,{transformResponse:!1},"content-type")}},b=d,r=g.a.Common.Css.createCssModule("plusu-files"),o=g.a.Common.VisualComponent.create({mixins:[g.a.Common.BaseMixin],statics:{tagName:n+"TagList",classNames:{main:function(e,t){return r.css("\n          line-height: 22px;\n          position: relative;\n          ".concat(t.showAllTags?"max-height: auto;":"max-height: 44px;","\n          ").concat(t.showAllTags?"flex-basis: auto;":"flex-basis: 44px;","\n          overflow: hidden;\n        "))},resize:function(){return r.css("\n          display: flex;\n          flex-direction: column;\n          align-items: stretch;\n        ")},tag:function(){return r.css("\n          cursor: default;\n          background-color: rgba(0, 0, 0, 0.1);\n          color: rgba(0, 0, 0, .87);\n          margin-right: 4px;\n          margin-bottom: 2px;\n          vertical-align: top;\n\n          .uu5-bricks-icon {\n            display: none;\n          }\n        ")},tagInvisible:function(){return r.css("\n          visibility: hidden;\n        ")},expander:function(){return r.css("\n          cursor: pointer;\n        ")}}},propTypes:{items:g.a.PropTypes.arrayOf(g.a.PropTypes.string),onTagExpand:g.a.PropTypes.func,height:g.a.PropTypes.number,width:g.a.PropTypes.number},getDefaultProps:function(){return{items:void 0,onTagExpand:null,height:0,width:0}},getInitialState:function(){return this._node=g.a.Common.Reference.create(),this._updateState="initial",{width:this.props.width,height:this.props.height,hiddenCount:0,showAllTags:!1}},componentWillReceiveProps:function(e){var t={};e.height&&2<Math.abs(e.height-this.props.height)&&(t.height=e.height),e.width&&(t.width=e.width),0!==Object.keys(t)&&this.setState(t,function(){"function"==typeof e.onTagExpand&&e.onTagExpand()}),this._updateState="initial"},componentDidMount:function(){this._updateHiddenTags()},componentDidUpdate:function(){this._updateHiddenTags()},_updateHiddenTags:function(){var t=this;if(this._node.current&&!this.state.showAllTags){var i,n=0,e=this._node.current.scrollHeight,s=this._node.current.getBoundingClientRect();if(e>s.height){for(var r=this.getClassName("tag"),a=this.getClassName("expander"),o=[],l=0;l<this._node.current.childNodes.length;l++){var u=this._node.current.childNodes[l];-1!==u.className.indexOf(r)&&(-1===u.className.indexOf(a)?o.push(u):i=u)}for(var p=0;p<o.length;p++){if(o[p].getBoundingClientRect().bottom-4>=s.bottom){n=o.length-p;break}}}this.setState(function(e){if(e.hiddenCount===n)return i&&i.getBoundingClientRect().bottom-4>=s.bottom?("initial"===t._updateState?t._updateState="shrinked":"shrinked,expanded"===t._updateState&&(t._updateState="shrinked,expanded,shrinked"),{hiddenCount:e.hiddenCount+1}):null;if("shrinked"===t._updateState&&n<e.hiddenCount)t._updateState="shrinked,expanded";else if("shrinked,expanded,shrinked"===t._updateState)return null;return{hiddenCount:n}}),Promise.resolve().then(function(){return t._updateState="initial"})}},_showAllTags:function(){var e=this;this.setState({showAllTags:!0},function(){"function"==typeof e.props.onTagExpand&&e.props.onTagExpand()})},render:function(){var t=this;if(!Array.isArray(this.props.items)||!this.props.items.length)return null;var e=this.state.showAllTags?0:this.state.hiddenCount,i=this.props.items.length-e,n=this.props.items.slice(0,i),s=e?this.props.items.slice(i):null;return g.a.Common.Element.create("div",{className:this.getClassName("main")+(this.props.className?" "+this.props.className:""),ref:this._node,style:{maxHeight:this.state.height&&!this.state.showAllTags?this.state.height+"px":void 0}},n.map(function(e){return g.a.Common.Element.create(g.a.Bricks.Label,{key:e,colorSchema:"custom",className:t.getClassName("tag")},e)}),e?g.a.Common.Element.create(g.a.Bricks.Label,{key:"show-all",colorSchema:"custom",className:this.getClassName("tag")+" "+this.getClassName("expander"),onClick:this._showAllTags},"+",this.state.hiddenCount):null,s&&s.map(function(e){return g.a.Common.Element.create(g.a.Bricks.Label,{key:e,colorSchema:"custom",className:t.getClassName("tag")+" "+t.getClassName("tagInvisible")},e)}))}});function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function m(e,t){if(null==e)return{};var i,n,s=function(e,t){if(null==e)return{};var i,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],0<=t.indexOf(i)||(s[i]=e[i]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],0<=t.indexOf(i)||Object.prototype.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var y={displayName:n+"ImageFromCall"},_=Object(h.createComponent)(function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(e){f(t,e,i[e])})}return t}({},y,{propTypes:{srcMeta:g.a.PropTypes.shape({data:g.a.PropTypes.any,uuCmd:g.a.PropTypes.oneOfType([g.a.PropTypes.func,g.a.PropTypes.string]),stringSrc:g.a.PropTypes.string,callback:g.a.PropTypes.func}).isRequired,srcReadyKey:g.a.PropTypes.string,onSrcReady:g.a.PropTypes.func},defaultProps:{srcMeta:void 0},getInitialState:function(){return{src:this._updateSrc("src",this.props.srcMeta),thumbSrc:this._updateSrc("thumbSrc",this.props.thumbSrcMeta)}},componentWillReceiveProps:function(e){var t={};g.a.Common.Tools.deepEqual(this.props.srcMeta,e.srcMeta)||(t.src=this._updateSrc("src",e.srcMeta)),g.a.Common.Tools.deepEqual(this.props.thumbSrcMeta,e.thumbSrcMeta)||(t.thumbSrc=this._updateSrc("thumbSrc",e.thumbSrcMeta)),0<Object.keys(t).length&&this.setState(t)},componentDidMount:function(){this._checkSrcReady()},componentDidUpdate:function(e,t){this._checkSrcReady()},componentWillUnmount:function(){this._unmounted=!0},_checkSrcReady:function(){this._id_src===this._id_srcFinished&&this._id_thumbSrc===this._id_thumbSrcFinished&&this._lastReportedId!==this._id_src+" "+this._id_thumbSrc+" "+this.props.srcReadyKey&&(this._lastReportedId=this._id_src+" "+this._id_thumbSrc+" "+this.props.srcReadyKey,"function"==typeof this.props.onSrcReady&&this.props.onSrcReady({src:this.state.src,thumbSrc:this.state.thumbSrc}))},_updateSrc:function(t,e){var i=this;if(!e)return null;var n=this["_id_"+t]=g.a.Common.Tools.generateUUID(),s=e.data,r=e.uuCmd,a=e.stringSrc,o=e.callback;return a||"function"!=typeof r?(this._updateSrcDone(n,a,t,o),a):void r(s).then(function(e){return i._updateSrcDone(n,e,t,o)},function(e){return i._updateSrcFail(n,e,t,o)})},_updateSrcDone:function(e,i,n,t){var s=this;this._unmounted||this["_id_"+n]===e&&(this["_id_"+n+"Finished"]=e,this.state&&this.setState(function(e){e[n]&&e[n].match(/^blob:/)&&window.URL.revokeObjectURL(e[n]);var t={};return t[n]="string"==typeof i?i:window.URL.createObjectURL(i),t},function(){"function"==typeof callack&&t(s.state)}))},_updateSrcFail:function(e,t,i,n){var s=this;if(!this._unmounted&&this["_id_"+i]===e&&(this["_id_"+i+"Finished"]=e,this.state)){var r={};r[i]=null,console.log(t),this.setState(r,function(){"function"==typeof callack&&n(s.state)})}},render:function(){var e=this.props,t=e.imageComponent,i=(e.srcMeta,e.thumbSrcMeta),n=(e.onSrcReady,m(e,["imageComponent","srcMeta","thumbSrcMeta","onSrcReady"])),s=this.state,r=s.src,a=s.thumbSrc,o=t||g.a.Bricks.Image;return void 0!==r&&(!i||void 0!==a)&&r?g.a.Common.Element.create(o,l({},n,{src:r||void 0,thumbSrc:a||void 0})):null}}));i(10);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function C(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(e){T(t,e,i[e])})}return t}function T(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function E(e){return x[e]||(x[e]=r.css(D[e])),x[e]}function S(i){if(!i.shown||!Array.isArray(i.items)||!i.items.length)return null;var e=i.items;return i.filterValue&&(e=e.filter(function(e){return-1!==e.indexOf(i.filterValue)})),Array.isArray(i.filterItems)&&(e=e.filter(function(e){return-1===i.filterItems.indexOf(e)})),0===e.length?null:h.Common.Element.create(h.Bricks.Popover,{shown:!0,fitHeightToViewport:!0,forceRender:!0,className:E("popover")},e.map(function(t){return h.Common.Element.create(h.Bricks.Link,{className:E("link"),colorSchema:"default",key:t,mainAttrs:{onMouseDown:function(e){e.preventDefault(),i.onClick(t)}}},t)}))}var L=[{id:"image",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",authenticate:!0}],B=h.Common.Component.memo(function(e){return h.Common.Element.create(h.Imaging.Lightbox,e)}),A=h.Common.VisualComponent.create({mixins:[h.Common.BaseMixin,h.Common.PureRenderMixin],statics:{tagName:n+"FileManagerTile",classNames:{main:s+"file-manager-tile",mainSelected:s+"file-manager-tile-selected",selectableOnly:s+"file-manager-selectable-only",innerTile:s+"file-manager-inner-tile",smallTile:"small-tile",previewField:"preview-field",image:"image",previewContentWrapper:"preview-content-wrapper",infoField:"info-field",tileCard:"tile-card",infoBox:"info-box",infoFieldRow:"info-field-row",infoFieldCol:"info-field-col",primaryAttribute:"primary-attribute",secondaryAttribute:"secondary-attribute",buttonPanel:"button-panel",selectButton:"select-button",flex:function(e){return"small"===e.tileType?"":r.css("\n              display: flex;\n              align-items: stretch;\n\n              & > .plus4u5-files-file-manager-tile {\n                display: flex;\n                flex-direction: column;\n                align-items: stretch;\n\n                & > .tile-card {\n                  flex: 1 0 auto;\n                  display: flex;\n                  flex-direction: column;\n                  align-items: stretch;\n\n                  & > .info-box {\n                    flex: 1 0 auto;\n                    display: flex;\n                    flex-direction: column;\n                    align-items: stretch;\n\n                    & > .info-field {\n                      flex: 1 0 auto;\n                      display: flex;\n                      flex-direction: column;\n                      align-items: stretch;\n                    }\n                  }\n                }\n              }\n            ")}},defaults:{maxButtons:3},opt:{nestingLevelWrapper:!0,pureRender:!0}},propTypes:{fileManager:h.PropTypes.object,tileType:h.PropTypes.string,getThumbnail:h.PropTypes.func,isS:h.PropTypes.bool,uuCmdGetBinaryData:h.PropTypes.oneOfType([h.PropTypes.func,h.PropTypes.string]),uuCmdGetBinaryDataUri:h.PropTypes.func,uuCmdGetThumbnailData:h.PropTypes.oneOfType([h.PropTypes.func,h.PropTypes.string]),uuCmdGetThumbnailDataUri:h.PropTypes.func,onFileClick:h.PropTypes.func,shouldShowThumbnail:h.PropTypes.bool,fileButtons:h.PropTypes.object,customSelectable:h.PropTypes.string,selectableOnly:h.PropTypes.bool,onFilenameSet:h.PropTypes.func},getDefaultProps:function(){return{selectableOnly:!1}},getInitialState:function(){return C({loadError:!1,renderButtons:this.props.isS,src:void 0,srcMeta:this._updateSrc(this.props.uuCmdGetBinaryData,this.props.uuCmdGetBinaryDataUri),thumbSrc:void 0,thumbThumbSrc:void 0},this._updateThumbnails(),{icon:this.props.data.icon||"mdi-file",thumbnailType:this.props.data.thumbnailType||"icon",binaryType:this.props.data.type||"other"})},componentDidMount:function(){this._updateLightbox()},componentDidUpdate:function(e,t){var i=this;this.setState(function(e){if(!e.renderButtons&&i.props.isS)return{renderButtons:!0}}),this._updateLightbox(t.src)},componentWillReceiveProps:function(e){var t={};e.baseUri===this.props.baseUri&&e.uuCmdGetBinaryData===this.props.uuCmdGetBinaryData&&e.code===this.props.code||(t.srcMeta=this._updateSrc(e.uuCmdGetBinaryData,e.uuCmdGetBinaryDataUri,{baseUri:e.baseUri,binary:e.data.binary,data:{code:e.code}}));var i=this._updateThumbnails(e);h.Common.Tools.deepEqual(i.thumbSrcMeta,this.state.thumbSrcMeta)||(t.thumbSrcMeta=i.thumbSrcMeta),h.Common.Tools.deepEqual(i.thumbThumbSrcMeta,this.state.thumbThumbSrcMeta)||(t.thumbThumbSrcMeta=i.thumbThumbSrcMeta),e.data.icon===this.props.data.icon&&e.data.thumbnailType===this.props.data.thumbnailType&&e.data.binaryType===this.props.data.binaryType||(t=C({},t,{icon:e.data.icon||"mdi-file",thumbnailType:e.data.thumbnailType||"icon",binaryType:e.data.type||"other"})),Object.keys(t).length&&this.setState(t)},_updateLightbox:function(e){this._lightbox&&e!==this.state.src&&void 0!==this.state.src&&this._lightbox.replaceImage(this.state.src||L[0].src,"image"),this._lightbox&&this._lastOpenId!==this.state.lightboxOpenId&&void 0!==this.state.src&&(this._lastOpenId=this.state.lightboxOpenId,this._lightbox.open())},_updateSrc:function(e,t,i,n){var s,r=2<arguments.length&&void 0!==i?i:{},a=r.baseUri,o=r.binary,l=r.stringParams,u=r.data,p=r.download,c=void 0!==p&&p,d=3<arguments.length?n:void 0;if(u=u||{code:this.props.data.binary.code},a=a||this.props.baseUri,"function"==typeof t?s=t(o||this.props.data.binary,c):"function"!=typeof e&&(s=b.getCommandUri(a,e,u),l&&(s+="&"+l),c&&(s+="&contentDisposition=attachment")),c&&s&&h.Environment.isTrustedDomain(s)){var m=h.Environment.getSession();s+="&access_token="+(m?(m.getCallToken()||{}).token:"")}return{data:u,uuCmd:e,stringSrc:s,callback:d}},_updateThumbnails:function(e){var t=0<arguments.length&&void 0!==e?e:this.props,i=t.data.binary.code,n=61<i.length?i.substr(0,61):i;n+="_th";var s,r,a=t.getThumbnail(n);if(a){var o=a.sys.mts;o=o.replace(/[:.-]/g,""),s=this._updateSrc(t.uuCmdGetThumbnailData,t.uuCmdGetThumbnailDataUri,{data:{code:i},binary:t.data.binary,stringParams:o}),r=this._updateSrc(t.uuCmdGetThumbnailData,t.uuCmdGetThumbnailDataUri,{data:{code:n},binary:a,stringParams:o})}return{thumbSrcMeta:s,thumbThumbSrcMeta:r}},_buildPreview:function(e){var t,n=this;if("original"===this.state.thumbnailType)if(e){var i=this.getMainPropsToPass();t="none"!==this.props.customSelectable&&this.props.selectableOnly?h.Common.Element.create(_,{srcMeta:this.state.srcMeta,onSrcReady:function(e){var t=e.src;return n.setState({src:t})},style:{maxWidth:i.style&&i.style.width?i.style.width-4:200},authenticate:!0}):h.Common.Element.create(_,{srcMeta:this.state.srcMeta,onSrcReady:function(e){var t=e.src;return n.setState({src:t})},imageComponent:h.Imaging.Image,fit:"coverNoScaleUp",authenticate:!0,onClick:this.props.onFileClick?function(){return n.props.onFileClick(n.props.data.binary)}:void 0})}else t=h.Common.Element.create(h.Bricks.Icon,{icon:this.state.icon});else if("thumbnail"===this.state.thumbnailType)if(this.state.thumbSrcMeta&&e&&!this.state.loadError){var s=this.getMainPropsToPass();t="none"!==this.props.customSelectable&&this.props.selectableOnly?h.Common.Element.create(_,{srcMeta:this.state.thumbThumbSrcMeta,onSrcReady:function(e){var t=e.src;return n.setState({thumbThumbSrc:t})},style:{maxWidth:s.style&&s.style.width?s.style.width-4:200},authenticate:!0}):h.Common.Element.create(_,{srcMeta:this.state.thumbSrcMeta,thumbSrcMeta:this.state.thumbThumbSrcMeta,imageComponent:h.Imaging.Image,onSrcReady:function(e){var t=e.src,i=e.thumbSrc;return n.setState({thumbSrc:t,thumbThumbSrc:i})},lightbox:this.props.data.id,fit:"coverNoScaleUp",authenticate:!0,onClick:this.props.onFileClick?function(){return n.props.onFileClick(n.props.data.binary)}:void 0})}else t=h.Common.Element.create(h.Bricks.Icon,{icon:this.state.icon});else t=h.Common.Element.create(h.Bricks.Icon,{icon:this.state.icon});return this.state.lightboxSrcMeta&&(t=h.Common.Element.create(h.Common.Fragment,null,t,h.Common.Element.create(_,{style:{display:"none"},srcMeta:this.state.lightboxSrcMeta,onSrcReady:function(e){var t=e.src;return n.setState({src:t})},srcReadyKey:this.state.lightboxOpenId+"",authenticate:!0}))),t},_openPreviewForm:function(e,t,i){i.preventDefault(),i.stopPropagation(),this.props.onFileClick(e,t)},_getMainAttrValue:function(){return this.props.onFilenameSet?c(this.props.onFilenameSet(this.props.data.binary)):this.props.data.binary.filename},_toggleSelected:function(){this.props.selected?this.props.fileManager.customRemoveSelectedItem(this.props.id):this.props.fileManager.customAddSelectedItem(this.props.id)},_onDownloadLinkClick:function(){var e=this._updateSrc(this.props.uuCmdGetBinaryData,this.props.uuCmdGetBinaryDataUri,{download:!0}),t=e.data,i=e.stringSrc,n=e.uuCmd;if(i||"function"!=typeof this.props.uuCmdGetBinaryData)window.open(i,"_self");else{var s=this.props.binary.filename;n(t).then(function(e){var t=new Blob([e],{type:"octet/stream"});if("function"!=typeof navigator.msSaveBlob){var i=window.URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.download=s,n.style="display: none;",document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout(function(){window.URL.revokeObjectURL(i)},6e4)}else navigator.msSaveBlob(t,s)})}},_getDownloadLink:function(e,t){return h.Common.Element.create(h.Bricks.Link,{key:"dropdownItem"+t,className:"uu5-bricks-dropdown-item-link",content:c(e.label),onClick:this._onDownloadLinkClick,download:!0})},_renderButtonPanel:function(){var n=this,s=[],r=[],e=this.props.fileButtons,a=e.itemList,o=e.hideDropdown;"none"!==this.props.customSelectable&&this.props.selectableOnly&&this.props.data.clickable&&s.push(h.Common.Element.create(h.Bricks.Button,{key:"magnifyButton",onClick:function(e,t){t.preventDefault(),t.stopPropagation(),n.props.onFileClick?n.props.onFileClick(n.props.data.binary):n._lightbox&&n.setState(function(e){return{lightboxSrcMeta:e.srcMeta,lightboxOpenId:(e.lightboxOpenId||0)+1}})},colorSchema:"primary"},h.Common.Element.create(h.Bricks.Icon,{icon:"mdi-magnify-plus"}))),a=a.filter(Boolean);for(var l=!0,t=function(e){var i=a[e],t=!1;!i.active||"none"!==n.props.customSelectable&&n.props.selectableOnly||"small"===n.props.tileType&&n.props.isS||(t=!0),t&&s.push(h.Common.Element.create(h.Bricks.Button,{key:"button"+e,onClick:function(e,t){t.preventDefault(),t.stopPropagation(),"function"==typeof i.onClick&&i.onClick(n.props.data.binary,n.state.binaryType)},colorSchema:"primary",tooltip:i.label?n.getLsiItem(i.label):void 0},h.Common.Element.create(h.Bricks.Icon,{icon:i.icon}))),o&&("small"!==n.props.tileType||!n.props.isS)||"none"!==n.props.customSelectable&&n.props.selectableOnly||(i.isDownload?(l=l&&t,r.push(n._getDownloadLink(i,e))):("mdi-magnify-plus"!==i.icon||"mdi-magnify-plus"===i.icon&&n.props.data.clickable)&&(l=l&&t,r.push(h.Common.Element.create(h.Bricks.Dropdown.Item,{label:c(i.label),onClick:function(){return i.onClick(n.props.data.binary,n.state.binaryType)},key:"dropdownItem"+e}))))},i=0;i<a.length;i++)t(i);l&&(r=[]);var u=this.getDefault("maxButtons")-(0<r.length?1:0);return s.length>u&&s.splice(u),this.state.renderButtons&&h.Common.Element.create(h.Bricks.Div,{className:this.getClassName("buttonPanel")},s,0<r.length&&h.Common.Element.create(h.Bricks.Dropdown,{label:"",ref_:function(e){return n._dropdown=e},iconOpen:"mdi-dots-vertical",iconClosed:"mdi-dots-vertical",pullRight:!0,colorSchema:"primary",allowTags:["UU5.Bricks.Link"]},r))},_renderSelectButton:function(){var i=this;return"none"!==this.props.customSelectable&&h.Common.Element.create(h.Bricks.Button,{key:"selectButton",className:this.getClassName("selectButton")+" "+(this.props.selected?this.getClassName("selectButtonSelected"):""),tooltip:this.getLsiItem({cs:"Vybrat soubor",en:"Select File"}),onClick:function(e,t){return i._toggleSelected(t)},colorSchema:this.props.isS?this.props.selected?"orange":"blue":"orange"},h.Common.Element.create(h.Bricks.Icon,{icon:"mdi-checkbox-marked-circle",style:{color:"#ffffff",fontSize:this.props.isS?null:"32px"}}))},_getFullInfoBox:function(){var t=this;return h.Common.Element.create("div",{className:this.getClassName("infoBox")},h.Common.Element.create("div",{className:this.getClassName("previewField")+(this.props.data.clickable?" "+this.getClassName("image"):"")},h.Common.Element.create("div",{className:this.getClassName("previewContentWrapper")},this._buildPreview(this.props.shouldShowThumbnail))),h.Common.Element.create("div",{className:this.getClassName("infoField")},h.Common.Element.create("div",{className:this.getClassName("primaryAttribute"),title:this.props.data.binary.filename},this._getMainAttrValue()),h.Common.Element.create("div",{className:this.getClassName("secondaryAttribute"),title:this.props.data.binary.code},this.props.data.binary.code),h.Common.Element.create(h.Bricks.Resize,null,function(e){return h.Common.Element.create(o,{key:"tagList",items:t.props.data.binary.tagList,onTagExpand:t.props.handleMeasure,className:"tag-list",width:e.width,height:e.height})}),h.Common.Element.create("div",{className:this.getClassName("secondaryAttribute")},new Date(this.props.data.binary.sys.mts).toLocaleString().slice(0,-3).replace(/:$/,""))),this._renderSelectButton(),!this.props.isS&&this._renderButtonPanel())},_getSmallInfoBox:function(){return h.Common.Element.create("div",null,h.Common.Element.create("div",{className:this.getClassName("previewField")+(this.props.data.clickable?" "+this.getClassName("image"):"")},this._buildPreview(!1)),h.Common.Element.create("div",{className:this.getClassName("infoField")},h.Common.Element.create("div",{className:this.getClassName("infoFieldRow")},h.Common.Element.create("div",{className:this.getClassName("infoFieldCol"),title:this.props.data.binary.filename},this._getMainAttrValue()),h.Common.Element.create("div",{className:this.getClassName("infoFieldCol")},new Date(this.props.data.binary.sys.mts).toLocaleString().slice(0,-3))),h.Common.Element.create("div",{className:this.getClassName("infoFieldRow")},h.Common.Element.create("div",{className:this.getClassName("infoFieldCol"),title:this.props.data.binary.code},this.props.data.binary.code))),this._renderSelectButton(),!this.props.isS&&this._renderButtonPanel())},_setLightboxRef:function(e){this._lightbox=e},render:function(){var t=this,e=this.getMainPropsToPass();return this.props.selected&&(e.className+=" "+this.getClassName("mainSelected")),"none"!==this.props.customSelectable&&this.props.selectableOnly&&(e.className+=" "+this.getClassName("selectableOnly")),"small"===this.props.tileType&&(e.className+=" "+this.getClassName("smallTile")),h.Common.Element.create(h.Bricks.Div,{style:this.props.wrapperStyle,className:this.getClassName("flex")},h.Common.Element.create(h.Bricks.Div,v({},e,{mainAttrs:{onMouseOver:function(){return t.setState({renderButtons:!0})},onClick:function(e){e.preventDefault(),e.stopPropagation(),"none"!==t.props.customSelectable&&t.props.selectableOnly&&t._toggleSelected()}}}),h.Common.Element.create(h.Bricks.Card,{className:this.getClassName("tileCard"),elevation:1,elevationHover:2,colorSchema:this.props.selected?"orange":null,bgStyle:"outline",style:{borderWidth:this.props.selected?"2px":"1px",margin:"0"}},this.props.isS&&this._renderButtonPanel(),"small"===this.props.tileType?this._getSmallInfoBox():this._getFullInfoBox()),h.Common.Element.create("div",{onClick:function(e){return e.stopPropagation()}},this.props.selectableOnly?h.Common.Element.create(B,{name:this.props.data.id,ref_:this._setLightboxRef,data:L}):null)))}}),x=(i(13),{}),D={popover:"\n    width: 100%;\n    max-height: 350px;\n    overflow-y: auto;\n  ",link:"\n    && {\n      color: rgba(0,0,0, .87);\n      display: block;\n      padding: 8px 16px;\n      width: 100%;\n  \n      &:hover {\n        text-decoration: none;\n        background-color: #E0E0E0;\n      }\n    }\n  "};S.displayName=n+"AutocompleteItems",S.tagName=n+"AutocompleteItems",S.defaultProps={filterValue:"",shown:!1};var P=S;function I(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var F=g.a.Common.VisualComponent.create({displayName:n+"TagsSelect",mixins:[g.a.Common.BaseMixin,g.a.Common.ElementaryMixin,g.a.Forms.TextInputMixin],statics:{tagName:n+"TagsSelect",classNames:{main:function(){return s+"TagsSelect "+r.css("align-items: baseline; .uu5-bricks-button.uu5-forms-input-button { width: auto; padding: 0 16px; }")},tag:function(){return r.css("\n          && {\n            margin-right: 4px;\n            background-color: rgba(0, 0, 0, 0.1);\n            color: rgba(0, 0, 0, .87);\n\n            .uu5-bricks-icon {\n              font-size: inherit;\n              position: static;\n              padding: 0;\n            }\n          }\n        ")},textButton:function(e,t){return r.css("\n          input:-ms-input-placeholder { color: #bdbdbd; }\n          ".concat("top"===e.tagListPosition?"&&& { margin-bottom: 0px; }":"margin-bottom: 8px;","\n          ").concat(t.value&&t.value.length?"&&& { margin-top: 8px; }":"","\n        "))}},lsi:{addButtonLabel:{cs:"Přidat",en:"Add"},tagIsAlreadyAdded:{cs:'Tag "$1" je již přidaný.',en:'The tag "$1" is already added.'},customTagIsNotAllowed:{cs:"Není povolené přidávat vlastní tagy.",en:"It is not allowed to create custom tags."},tagIsNotAllowed:{cs:'Tag "$1" není povolený.',en:'The tag "$1" is not allowed.'},placeholder:{cs:"Název tagu",en:"Tag Name"},noTagInfoText:{cs:"Vložte tag pomocí vstupního pole níže",en:"Insert a tag via input field lower"}}},propTypes:{availableTags:g.a.PropTypes.arrayOf(g.a.PropTypes.string),ignoreTags:g.a.PropTypes.arrayOf(g.a.PropTypes.string),allowCustomTgas:g.a.PropTypes.bool,colorSchema:g.a.PropTypes.string,buttonColorSchema:g.a.PropTypes.string,onTagSelect:g.a.PropTypes.func,tagListPosition:g.a.PropTypes.oneOf(["top","bottom"]),displayHint:g.a.PropTypes.bool},getDefaultProps:function(){return{availableTags:null,ignoreTags:null,allowCustomTags:!1,onTagSelect:null,tagListPosition:"top",buttonColorSchema:"default",displayHint:!0}},getInitialState:function(){var e=this;return this._removeFnCache={},{textValue:"",focused:!(this._buttons=[{icon:"mdi-plus",colorSchema:this.props.buttonColorSchema,onClick:function(){return e._addTagValue()},content:g.a.Common.Element.create(g.a.Bricks.ScreenSize,null,g.a.Common.Element.create(g.a.Bricks.ScreenSize.Item,{screenSize:"xs"},g.a.Common.Element.create(g.a.Bricks.Icon,{icon:"mdi-plus"})),g.a.Common.Element.create(g.a.Bricks.ScreenSize.Item,{screenSize:"*"},this.getLsiComponent("addButtonLabel")))}])}},componentWillMount:function(){this.setState({value:this.props.value||[]})},_buttons:void 0,_removeFnCache:void 0,_registerTextButton:function(e){this._textButton=e},_getRemoveFn:function(i){var n=this;return this._removeFnCache[i]||(this._removeFnCache[i]=function(){n.setState(function(e){var t=e.value.filter(function(e){return e!==i});if(t.length!==e.value.length)return delete n._removeFnCache[i],{value:t}})}),this._removeFnCache[i]},_addTagValue:function(t){var i=this;this.setState(function(e){if(t=void 0===t?e.textValue:t)if(i.props.ignoreTags&&-1!==i.props.ignoreTags.indexOf(t))i._textButton.setError(i.getLsiValue("tagIsNotAllowed").replace("$1",t));else if(e.value&&-1!==e.value.indexOf(t))i._textButton.setWarning(i.getLsiValue("tagIsAlreadyAdded").replace("$1",t));else{if(i.props.allowCustomTags||i.props.availableTags&&-1!==i.props.availableTags.indexOf(t))return"function"==typeof i.props.onTagSelect?(i.props.onTagSelect({component:i,value:e.value,tag:t}),{textValue:""}):(i._textButton.setInitial(""),{value:[].concat(I(e.value),[t]),textValue:""});i._textButton.setError(i.getLsiValue("customTagIsNotAllowed"))}})},_updateTextValue:function(e){var t=e.value;this.setState({textValue:t})},_onTextInputBlur:function(){this.setState({focused:!1})},_onTextInputFocus:function(){this.setState({focused:!0})},_renderTagList:function(){var i=this;return this.state.value&&this.state.value.length?this.state.value.map(function(e,t){return g.a.Common.Element.create(g.a.Bricks.Label,{key:e,colorSchema:"custom",onClick:i._getRemoveFn(e),icon:"mdi-close",className:i.getClassName("tag")},e)}):this.props.displayHint?g.a.Common.Element.create("span",{className:r.css("color: rgba(0, 0, 0, .24)")},this.getLsiValue("noTagInfoText")):null},render:function(){var e=this.getId()+"-input";return g.a.Common.Element.create(g.a.Bricks.Div,this._getInputAttrs(),this.getLabel(e),this.getInputWrapper(g.a.Common.Element.create(g.a.Common.Fragment,null,"top"===this.props.tagListPosition&&this._renderTagList(),g.a.Common.Element.create(g.a.Forms.TextButton,{colorSchema:this.props.colorSchema,key:"textButton",ref_:this._registerTextButton,buttons:this._buttons,actionOnEnter:!0,inputAttrs:{onFocus:this._onTextInputFocus,onBlur:this._onTextInputBlur},onChange:this._updateTextValue,inline:!0,spacing:0,className:this.getClassName("textButton"),placeholder:this.getLsiValue("placeholder"),mainAttrs:{onKeyPress:function(e){13!==(e.keyCode||e.which)||e.shiftKey||e.ctrlKey||e.preventDefault()}},value:this.state.textValue}),g.a.Common.Element.create(P,{key:"autocomplete-items",items:this.props.availableTags,filterValue:this.state.textValue,filterItems:this.state.value,shown:this.state.focused,onClick:this._addTagValue}),"top"!==this.props.tagListPosition&&this._renderTagList())))}});i(14);function w(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var i=[],n=!0,s=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(e){s=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(s)throw r}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function O(e,t){var i=1<arguments.length&&void 0!==t?t:{},n=i.outputQuality,s=i.outputMaxWidth,r=i.outputMaxHeight;return new Promise(function(t,i){if(!(e.type&&e.type.match(/image\//))||!n&&!r&&!s)return t(e);new Promise(function(t){n?h.Imaging.Adjustment.changeType(e,"jpg",n).then(function(e){return t(e.imageFile)}):t(e)}).then(function(e){s||r?h.Imaging.Adjustment.resizeMax(e,s,r).then(function(e){t(e.imageFile)},function(e){i({error:Object.assign(e,{code:"resizeFailed"})})}):t(e)})})}function N(e){return e?Math.min(131072,e):131072}var R=h.Common.VisualComponent.create({mixins:[h.Common.BaseMixin,h.Common.ElementaryMixin],statics:{tagName:n+"FileManagerTypeFilter",classNames:{main:s+"file-manager-type-filter",leftCol:"left-col",rightCol:"right-col",label:"label",addTagFilterPanel:function(){return r.css("\n          .uu5-bricks-panel-header {\n            display: none;\n          }\n\n          .uu5-bricks-panel-body-body {\n            padding: 0;\n          }\n        ")},filterButton:function(){return r.css("\n          && {\n            border-radius: 16px;\n          }\n\n          margin: 0 0 8px 8px;\n          \n          &:last-child{\n            margin-right: 0px;\n          }\n        ")},addTagFilterSelect:function(){return r.css("\n          &&& {\n            margin: 0;\n          }\n\n          .uu5-forms-input-wrapper > span:first-child {\n            display: none;\n          }\n\n          .uu5-forms-input-wrapper > .uu5-forms-text-button.uu5-forms-text-button {\n            margin-top: 0;\n          }\n        ")},rightTagFilterPanelColumn:function(){return r.css("text-align: right; && { padding: 0; }")}},lsi:{addFilterButtonLabel:{cs:"Filtrovat podle tagu",en:"Filter by tag"},tagFilterButtonPrefix:{cs:"Tag: ",en:"Tag: "}},opt:{nestingLevelWrapper:!0}},propTypes:{controller:h.PropTypes.object,fileTypeFilters:h.PropTypes.object,tags:h.PropTypes.arrayOf(h.PropTypes.string),displayFilterByTags:h.PropTypes.bool},getDefaultProps:function(){return{fileTypeFilters:{image:{label:p.LSI_LABEL_FILE_MANAGER_FILTER_IMAGE,active:!1,types:["image","svg"]},text:{label:p.LSI_LABEL_FILE_MANAGER_FILTER_TEXT,active:!1,types:["text","xml","pdf"]},other:{label:p.LSI_LABEL_FILE_MANAGER_FILTER_OTHER,active:!1,types:["other","archive","json"]}},tags:null,displayFilterByTags:!0}},getInitialState:function(){var i=this;return this._bs={},this._filters={},this.props.fileTypeFilters&&Object.keys(this.props.fileTypeFilters).forEach(function(e){if(i.props.fileTypeFilters.hasOwnProperty(e)&&i.props.fileTypeFilters[e].active)for(var t=0;t<i.props.fileTypeFilters[e].types.length;t++)i._filters[i.props.fileTypeFilters[e].types[t]]={visible:!0}}),{buttons:this.props.fileTypeFilters,tagFilters:[]}},componentWillMount:function(){this.props.controller.registerBar("typeFilter",this)},componentDidMount:function(){this._buildFilter()},componentWillUnmount:function(){this.props.controller.unregisterBar("typeFilter")},_filterFn:function(e){return this._filters[c(e.type).toLowerCase()]},_buildFilter:function(){var n=[];if(Object.entries(this._filters).forEach(function(e){var t=k(e,2),i=t[0];t[1].visible&&n.push(i)}),0<n.length){var e=h.Common.Element.create(h.Bricks.Span,null,h.Common.Element.create(h.Bricks.Icon,{icon:"mdi-paw"})," ",n.join(", "));this.props.controller.addFilterExt("type",e,null,this._filterFn,null)}else this.props.controller.removeFilterExt("type")},_handleClick:function(s){var r=this;return function(e){var t=r.state.buttons;if(t[s].active=!t[s].active,r.setState({buttons:t}),t[s].active)for(var i=0;i<t[s].types.length;i++)r._filters[t[s].types[i]]={visible:!0};else for(var n=0;n<t[s].types.length;n++)delete r._filters[t[s].types[n]];r._buildFilter()}},_registerBS:function(e,t){this._bs[e]=t},_registerAddTagFilterPanel:function(e){this._addTagFilterPanel=e},_shouldRenderCancel:function(){var e=!1;if(this.state.tagFilters&&this.state.tagFilters.length)return!0;for(var t in this.state.buttons)if(this.state.buttons[t].active){e=!0;break}return e},_clearFilter:function(){var t=this,i=this.state.buttons;for(var e in i)i[e].active=!1;this._filters={},this._buildFilter(),this.setState(function(e){return e.tagFilters.forEach(function(e){return t.props.controller.removeFilterExt("tag-"+e)}),{buttons:i,tagFilters:[]}})},_toggleAddFilterPanel:function(){this._addTagFilterPanel&&this._addTagFilterPanel.toggle()},_closeTagFilterPanel:function(){this._addTagFilterPanel&&this._addTagFilterPanel.collapse()},_addTagFilter:function(e){var t=this,i=e.tag;this.setState(function(e){if(-1===e.tagFilters.indexOf(i))return t.props.controller.addFilterExt("tag-"+i,i,null,function(e){return e.binary.tagList&&-1!==e.binary.tagList.indexOf(i)}),{tagFilters:[].concat(w(e.tagFilters),[i])}})},_removeTagFilter:function(e){var t=this,i=e.props._tag;this.setState(function(e){return t.props.controller.removeFilterExt("tag-"+i),{tagFilters:e.tagFilters.filter(function(e){return e!==i})}})},_filterIgnoreTags:function(e){var t=this;return!e.binary.tagList||!Array.isArray(this.props.ignoreTags)||e.binary.tagList.every(function(e){return-1===t.props.ignoreTags.indexOf(e)})},_renderButtonSwitches:function(){function e(t){n.push(h.Common.Element.create(h.Bricks.ButtonSwitch,{key:"switch_button_"+t,className:i.getClassName("filterButton"),props:{onClick:i._handleClick(t)},ref_:function(e){return i._registerBS(t,e)},switchedOn:i.state.buttons[t].active,content:c(i.state.buttons[t].label),onProps:{colorSchema:"primary"},offProps:{bgStyle:"outline",colorSchema:"primary"}}))}var i=this,n=[];for(var t in this.state.buttons)e(t);return n},_renderTagFilters:function(){var t=this;return this.props.tags&&this.props.displayFilterByTags?h.Common.Element.create(h.Common.Fragment,null,this.state.tagFilters.map(function(e){return h.Common.Element.create(h.Bricks.Button,{_tag:e,key:e,className:t.getClassName("filterButton"),colorSchema:"primary",toggled:!0,onClick:t._removeTagFilter},t.getLsiComponent("tagFilterButtonPrefix"),h.Common.Element.create(h.Bricks.Span,null,e),h.Common.Element.create(h.Bricks.Icon,{icon:"mdi-close"}))}),h.Common.Element.create(h.Bricks.Button,{key:"addTagFilter",className:this.getClassName("filterButton"),onClick:this._toggleAddFilterPanel,colorSchema:"primary",bgStyle:"outline"},h.Common.Element.create(h.Bricks.Icon,{icon:"mdi-plus"}),this.getLsiComponent("addFilterButtonLabel"))):null},_getAvailableTags:function(){var t=this;return this.props.tags.filter(function(e){return-1===t.state.tagFilters.indexOf(e)})},_getChild:function(){return h.Common.Element.create(h.Common.Fragment,null,h.Common.Element.create(h.Bricks.Div,this.getMainPropsToPass(),h.Common.Element.create(h.Bricks.Div,{className:this.getClassName("leftCol")},h.Common.Element.create(h.Bricks.Span,{content:c(p.LSI_LABEL_FILE_MANAGER_FILTER_HEADER),className:this.getClassName("label")}),this._renderButtonSwitches(),this._renderTagFilters()),this._shouldRenderCancel()&&h.Common.Element.create(h.Bricks.Div,{className:this.getClassName("rightCol")},h.Common.Element.create(h.Bricks.Button,{bgStyle:"transparent",onClick:this._clearFilter,content:c(p.LSI_LABEL_FILE_MANAGER_FILTER_RESET)}))),h.Common.Element.create(h.Bricks.Panel,{className:this.getClassName("addTagFilterPanel"),ref_:this._registerAddTagFilterPanel},h.Common.Element.create(h.Bricks.Well,{colorSchema:"blue"},h.Common.Element.create(h.Bricks.Row,null,h.Common.Element.create(h.Bricks.Column,{colWidth:"xs-10 s-8 m-6 l-4"},h.Common.Element.create(F,{availableTags:this._getAvailableTags(),allowCustomTags:!0,buttonColorSchema:"blue",onTagSelect:this._addTagFilter,className:this.getClassName("addTagFilterSelect")})),h.Common.Element.create(h.Bricks.Column,{colWidth:"xs-2 s-4 m-6 l-8",className:this.getClassName("rightTagFilterPanelColumn")},h.Common.Element.create(h.Bricks.Button,{onClick:this._closeTagFilterPanel},h.Common.Element.create(h.Bricks.Icon,{icon:"mdi-chevron-up"})))))))},render:function(){return this._getChild()}});i(16);function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var U=h.Common.VisualComponent.create({mixins:[h.Common.BaseMixin,h.Common.ElementaryMixin],statics:{tagName:n+"UpdateFileForm",classNames:{main:s+"update-file-form"},opt:{nestingLevelWrapper:!0}},propTypes:{done:h.PropTypes.func,onSuccess:h.PropTypes.func,onCancel:h.PropTypes.func,addThumbnail:h.PropTypes.func,removeThumbnail:h.PropTypes.func,thumbnail:h.PropTypes.object,binary:h.PropTypes.object,file:h.PropTypes.object,baseUri:h.PropTypes.string,cmdUpdateBinaryData:h.PropTypes.oneOfType([h.PropTypes.func,h.PropTypes.string]),cmdCreateThumbnail:h.PropTypes.oneOfType([h.PropTypes.func,h.PropTypes.string]),cmdUpdateThumbnailData:h.PropTypes.oneOfType([h.PropTypes.func,h.PropTypes.string]),cmdDeleteThumbnail:h.PropTypes.oneOfType([h.PropTypes.func,h.PropTypes.string]),shouldSaveThumbnail:h.PropTypes.bool,lsiLabels:h.PropTypes.object,currentControls:h.PropTypes.func,outputMaxHeight:h.PropTypes.number,outputMaxWidth:h.PropTypes.number,outputQuality:h.PropTypes.number},getDefaultProps:function(){return{}},getInitialState:function(){},getForm:function(){return this._form},_callUpdateBinary:function(e,t){var i,n=e.data.type&&e.data.type.match(/image\//);i=this.props.shouldSaveThumbnail&&(n||this.props.thumbnail)?!n&&this.props.thumbnail?this._deleteThumbnail:this._saveThumbnail:this._saveDone;var s=this._sendFail,r={code:this.props.binary.code,data:t};if(r.sys={rev:this.props.binary.sys.rev},"function"==typeof this.props.cmdUpdateBinaryData)this.props.cmdUpdateBinaryData(r).then(i,s);else{var a={data:r,done:i,fail:s};b.customPostMultipartCmd(this.props.baseUri,this.props.cmdUpdateBinaryData,a)}},_onSave:function(){var t=this,i=this._form.getValues();O(i.data,this.props).then(function(e){t._callUpdateBinary(i,e)},function(e){t._sendFail(e)})},_saveThumbnail:function(i){var n=this,e=this._form.getValues();O(e.data,{outputMaxHeight:512,outputMaxWidth:512,outputQuality:.85}).then(function(e){var t={done:function(e){n.props.addThumbnail(e),n._saveDone(i)},fail:function(){h.Common.Tools.warning("Saving image thumbnail failed."),n._saveDone(i)},data:{code:(61<i.code.length?i.code.substr(0,61):i.code)+"_th",data:e}};n.props.thumbnail?(t.data.sys={rev:n.props.thumbnail.sys.rev},"function"==typeof n.props.cmdUpdateThumbnailData?n.props.cmdUpdateThumbnailData(t.data).then(t.done,t.fail):b.customPostMultipartCmd(n.props.baseUri,n.props.cmdUpdateThumbnailData,t)):"function"==typeof n.props.cmdCreateThumbnail?n.props.cmdCreateThumbnail(t.data).then(t.done,t.fail):"function"==typeof n.props.cmdCreateThumbnail?n.props.cmdCreateThumbnail(t.data).then(t.done,t.fail):b.customPostMultipartCmd(n.props.baseUri,n.props.cmdCreateThumbnail,t)})},_deleteThumbnail:function(e){var t=this,i={done:function(){t.props.removeThumbnail(t._getSafeThumbnailCode(t.props.binary.code)),t._saveDone(e)},fail:function(){h.Common.Tools.warning("Delete image thumbnail failed."),t._saveDone(e)},data:{code:this._getSafeThumbnailCode(this.props.binary.code)}};"function"==typeof this.props.cmdDeleteThumbnail?this.props.cmdDeleteThumbnail(i.data).then(i.done,i.fail):b.customPostCmd(this.props.baseUri,this.props.cmdDeleteThumbnail,i)},_getSafeThumbnailCode:function(e){return(61<e.length?e.substr(0,61):e)+"_th"},_sendFail:function(e){this.props.currentControls()&&this.props.currentControls().setDisabledButton(!1);var t=null;if(e.error)if(e.error&&e.error.cause&&e.error.cause.uuAppErrorMap["uu-app-objectstore/invalidRevision"]){var i=e.error.code+"/invalidRevision";t=c(p.commandErrors[i]||p.commandErrors.default)}else t=c(p.commandErrors[e.error.code]||p.commandErrors.default);else t=e.toString();this._form.getAlertBus().setAlert({content:t,colorSchema:"danger"})},_saveDone:function(e,t){this.props.onSuccess&&this.props.onSuccess(e),this.props.done&&this.props.done(e,t),this._fileForm.disable()},_registerFileInput:function(e){this._fileForm=e,this._validateFileSize({value:this.props.file})},_validateFileSize:function(e,t){var i=this,n=e.value,s=1<arguments.length&&void 0!==t?t:this.props;n?O(n,s).then(function(e){e&&e.size>1024*N(s.sizeLimit)?i._fileForm.setError(c(s.lsiLabels.fileSizeExceededError,{maxSize:N(s.sizeLimit)+"KB"}),n):i._fileForm.setInitial(null,n)}):this._fileForm.setInitial(null,n)},_getChild:function(){var n=this;return h.Common.Element.create(h.Forms.Form,M({},this.getMainPropsToPass(),{onSave:function(e){var t=e.component,i=e.values;return n._onSave(t,i)},onCancel:this.props.onCancel,ref_:function(e){return n._form=e}}),h.Common.Element.create(h.Forms.File,{label:c(this.props.lsiLabels.addBinaryFormFile),controlled:!1,required:!0,name:"data",requiredMessage:c(this.props.lsiLabels.addBinaryFormFileRequired),ref_:this._registerFileInput,onChange:this._validateFileSize}))},render:function(){return this._getChild()}});i(18);function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function G(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var H=h.Common.VisualComponent.create({mixins:[h.Common.BaseMixin,h.Common.ElementaryMixin],statics:{tagName:n+"UpdateBinaryForm",classNames:{main:s+"update-binary-form"},opt:{nestingLevelWrapper:!0}},propTypes:{done:h.PropTypes.func,onSuccess:h.PropTypes.func,onCancel:h.PropTypes.func,binary:h.PropTypes.object.isRequired,baseUri:h.PropTypes.string,cmdUpdateBinary:h.PropTypes.oneOfType([h.PropTypes.func,h.PropTypes.string]).isRequired,currentControls:h.PropTypes.func.isRequired,ignoreTags:h.PropTypes.arrayOf(h.PropTypes.string),availableTags:h.PropTypes.arrayOf(h.PropTypes.string),allowCustomTags:h.PropTypes.bool,onTagCreate:h.PropTypes.func},getDefaultProps:function(){return{}},getForm:function(){return this._form},_callUpdateBinary:function(e){var t={code:this.props.binary.code,tagList:e.tagList||[],sys:this.props.binary.sys},i=this._saveDone,n=this._sendFail;if("function"==typeof this.props.cmdUpdateBinary)this.props.cmdUpdateBinary(t).then(i,n);else{var s={data:t,done:i,fail:n};b.customPostCmd(this.props.baseUri,this.props.cmdUpdateBinary,s)}},_onSave:function(e){e.component;var t=e.values;this.props.currentControls()&&this.props.currentControls().setDisabledButton(!0),this._callUpdateBinary(t)},_sendFail:function(e){this.props.currentControls()&&this.props.currentControls().setDisabledButton(!1);var t=null;if(e.error)if(e.error&&e.error.cause&&e.error.cause.uuAppErrorMap["uu-app-objectstore/invalidRevision"]){var i=e.error.code+"/invalidRevision";t=c(p.commandErrors[i]||p.commandErrors.default)}else t=c(p.commandErrors[e.error.code]||p.commandErrors.default);else t=e.toString();this._form.getAlertBus().setAlert({content:t,colorSchema:"danger"})},_saveDone:function(e,t){if(this.props.onTagCreate&&e.tagList){var i=[],n=this.props.binary.tagList||[],s=this.props.availableTags||[];n||s.length?e.tagList.forEach(function(e){-1===n.indexOf(e)&&-1===s.indexOf(e)&&i.push(e)}):i=G(e.tagList),i.length&&this.props.onTagCreate(i)}this.props.onSuccess&&this.props.onSuccess(e),this.props.done&&this.props.done(e,t)},render:function(){var t=this;return h.Common.Element.create(h.Forms.Form,j({},this.getMainPropsToPass(),{onSave:this._onSave,onCancel:this.props.onCancel,ref_:function(e){return t._form=e},spacing:8}),h.Common.Element.create(F,{label:h.Common.Element.create(h.Bricks.Lsi,{lsi:p.LSI_LABEL_ADD_TAGS}),labelAlignment:"left",availableTags:this.props.availableTags,ignoreTags:this.props.ignoreTags,allowCustomTags:this.props.allowCustomTags,name:"tagList",value:this.props.binary.tagList,labelColWidth:"xs-12",inputColWidth:"xs-12",tagListPosition:"bottom"}))}});i(20);function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var V=h.Common.VisualComponent.create({mixins:[h.Common.BaseMixin,h.Common.ElementaryMixin,h.Common.CcrReaderMixin],statics:{tagName:n+"DeleteFileForm",classNames:{main:s+"delete-file-form"},opt:{nestingLevelWrapper:!0}},propTypes:{done:h.PropTypes.func,onSuccess:h.PropTypes.func,onCancel:h.PropTypes.func,binary:h.PropTypes.object,thumbnail:h.PropTypes.object,removeThumbnail:h.PropTypes.func,baseUri:h.PropTypes.string,cmdDeleteBinary:h.PropTypes.oneOfType([h.PropTypes.func,h.PropTypes.string]),cmdDeleteThumbnail:h.PropTypes.oneOfType([h.PropTypes.func,h.PropTypes.string]),shouldSaveThumbnail:h.PropTypes.bool,lsiLabels:h.PropTypes.object,currentControls:h.PropTypes.func},getDefaultProps:function(){return{}},getForm:function(){return this._form},_onSave:function(){this.props.currentControls()&&this.props.currentControls().setDisabledButton(!0);var e=this.props.shouldSaveThumbnail&&this.props.thumbnail?this._deleteThumbnail:this._saveDone,t=this._sendFail,i={code:this.props.binary.code};if("function"==typeof this.props.cmdDeleteBinary)this.props.cmdDeleteBinary(i).then(e,t);else{var n={data:i,done:e,fail:t};b.customPostCmd(this.props.baseUri,this.props.cmdDeleteBinary,n)}},_deleteThumbnail:function(e){var t=this,i={done:function(){t.props.removeThumbnail(t.props.thumbnail.code),t._saveDone(e)},fail:function(){h.Common.Tools.warning("Delete image thumbnail failed."),t._saveDone(e)},data:{code:this.props.thumbnail.code}};"function"==typeof this.props.cmdDeleteThumbnail?this.props.cmdDeleteThumbnail(i.data).then(i.done,i.fail):b.customPostCmd(this.props.baseUri,this.props.cmdDeleteThumbnail,i)},_sendFail:function(e){this.props.currentControls()&&this.props.currentControls().setDisabledButton(!1);var t=null;if(e.error&&e.error.cause&&e.error.cause.uuAppErrorMap["uu-app-objectstore/invalidRevision"]){var i=e.error.code+"/invalidRevision";t=c(p.commandErrors[i]||p.commandErrors.default)}else t=c(p.commandErrors[e.error.code]||p.commandErrors.default);this._form.getAlertBus().setAlert({content:t,colorSchema:"danger"})},_saveDone:function(e,t){var i=this;this.props.onSuccess&&this.props.onSuccess(this.props.binary.code),this.props.done&&this.props.done(e,t),this.getCcrComponentByKey(h.Environment.CCRKEY_PAGE)&&this.getCcrComponentByKey(h.Environment.CCRKEY_PAGE).getAlertBus().clearAlerts(function(){i.getCcrComponentByKey(h.Environment.CCRKEY_PAGE)&&i.getCcrComponentByKey(h.Environment.CCRKEY_PAGE).getAlertBus&&i.getCcrComponentByKey(h.Environment.CCRKEY_PAGE).getAlertBus()&&i.getCcrComponentByKey(h.Environment.CCRKEY_PAGE).getAlertBus().setAlert({content:c(p.LSI_LABEL_DELETE_BINARY_SUCCESS_CONFIRM_MSG),colorSchema:"success",closeTimer:3e3})})},_onValidate:function(e){},_getChild:function(){var e,n=this;if("string"==typeof(e="string"==typeof this.props.lsiLabels.deleteBinaryFormContent?this.props.lsiLabels.deleteBinaryFormContent:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?Object(arguments[e]):{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(e){q(t,e,i[e])})}return t}({},this.props.lsiLabels.deleteBinaryFormContent)))e=e.replace("${filename}",this.props.binary.filename);else if("object"===W(e))for(var t in e)e.hasOwnProperty(t)&&(e[t]=e[t].replace("${filename}",this.props.binary.filename));var i=c(e);return h.Common.Element.create(h.Forms.Form,z({},this.getMainPropsToPass(),{onSave:function(e){var t=e.component,i=e.values;return n._onSave(t,i)},onCancel:this.props.onCancel,ref_:function(e){return n._form=e}}),h.Common.Element.create(h.Bricks.P,z({},this.getMainPropsToPass(),{content:i})))},render:function(){return this._getChild()}}),Y=(i(22),h.Common.VisualComponent.create({mixins:[h.Common.BaseMixin,h.Common.ElementaryMixin],statics:{tagName:n+"PreviewFileForm",classNames:{main:s+"preview-file-form"},opt:{nestingLevelWrapper:!0}},propTypes:{code:h.PropTypes.string,done:h.PropTypes.func,onCancel:h.PropTypes.func,rev:h.PropTypes.oneOfType([h.PropTypes.string,h.PropTypes.number]),baseUri:h.PropTypes.string,cmdGetBinaryData:h.PropTypes.string},getDefaultProps:function(){return{}},getInitialState:function(){return this.props.cmdGetBinaryData&&this.props.code&&this._updateImageSrc(),{error:!1,src:null}},componentWillReceiveProps:function(e){e.cmdGetBinaryData===this.props.cmdGetBinaryData&&e.code===this.props.code||this._updateImageSrc(e)},getForm:function(){return this._form},hasUnsavedChanges:function(){return!1},_updateImageSrcDone:function(t){this.setState(function(e){return e.src&&e.src.match(/^blob:/)&&window.URL.revokeObjectURL(e.src),{src:t.match(/^blob:/)?window.Url.createObjectURL(t):t}})},_updateImageSrc:function(e){var t,i=0<arguments.length&&void 0!==e?e:this.props,n={code:i.code};"function"==typeof i.cmdGetBinaryData?i.cmdGetBinaryData(n).then(this._updateImageSrcDone,this._updateImageSrcDone):(t=(t=b.getCommandUri(i.baseUri,i.cmdGetBinaryData,n))+"&"+i.rev,this._updateImageSrcDone(t))},_onSave:function(){this.props.done&&this.props.done()},_renderImage:function(){var e=this;return h.Common.Element.create(h.Bricks.Image,{mainAttrs:{onError:function(){return e.setState({error:!0})}},responsive:!0,src:this.state.src,authenticate:!0})},_renderError:function(){return h.Common.Element.create(h.Bricks.Div,{content:c(p.LSI_LABEL_FILE_MANAGER_PREVIEW_ERROR)})},_getChild:function(){return h.Common.Element.create(h.Bricks.Div,this.getMainPropsToPass(),this.state.error?this._renderError():this._renderImage())},render:function(){return this._getChild()}}));i(24);function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var $=h.Common.VisualComponent.create({mixins:[h.Common.BaseMixin,h.Common.ElementaryMixin,h.Common.CcrReaderMixin],statics:{tagName:n+"ShareFileForm",classNames:{main:s+"share-file-form",radioLabel:s+"share-file-form-radio-label"},opt:{nestingLevelWrapper:!0}},propTypes:{binary:h.PropTypes.object,done:h.PropTypes.func,onCancel:h.PropTypes.func,settings:h.PropTypes.array},getDefaultProps:function(){return{}},getInitialState:function(){return{option:"1"}},getForm:function(){return this._form},hasUnsavedChanges:function(){return!1},_copyToClipboard:function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(e){h.Common.Tools.warning("Oops, unable to copy",e)}document.body.removeChild(t)},_onSave:function(){var e=this;this._embeddedText&&this._copyToClipboard(this._embeddedText.getValue()),this.props.done&&this.props.done(),this.getCcrComponentByKey(h.Environment.CCRKEY_PAGE).getAlertBus().clearAlerts(function(){e.getCcrComponentByKey(h.Environment.CCRKEY_PAGE)&&e.getCcrComponentByKey(h.Environment.CCRKEY_PAGE).getAlertBus&&e.getCcrComponentByKey(h.Environment.CCRKEY_PAGE).getAlertBus()&&e.getCcrComponentByKey(h.Environment.CCRKEY_PAGE).getAlertBus().setAlert({content:c(p.LSI_LABEL_SHARE_BINARY_SUCCESS_CONFIRM_MSG),colorSchema:"success",closeTimer:3e3})})},_getOutput:function(){var e=this.props.settings[parseInt(this.state.option)-1].value,t=e.match(/\${[^(})]*}/g);if(t)for(var i=0;i<t.length;i++){var n=t[i].substr(2,t[i].length-3).split(".").reduce(this._getVarOnKey,this.props.binary);e=e.replace(t[i],null!=n?n:"")}return e},_getVarOnKey:function(e,t){return e[t]},_getChild:function(){for(var n=this,e=h.Common.Tools.findComponent("UuApp.DesignKit.EmbeddedText",{ref_:function(e){n._embeddedText=e},header:c(p.LSI_LABEL_FILE_MANAGER_SHARE_TEXT),level:6,showCopyButton:!1,codeStyle:this.props.settings[parseInt(this.state.option)-1].codeStyle||"text",content:this._getOutput()}),t=[],i=0;i<this.props.settings.length;i++)t.push({label:c(this.props.settings[i].label),name:(i+1).toString(),value:this.state.option===(i+1).toString()});return h.Common.Element.create(h.Forms.Form,K({},this.getMainPropsToPass(),{onSave:function(e){var t=e.component,i=e.values;return n._onSave(t,i)},onCancel:this.props.onCancel,ref_:function(e){return n._form=e}}),h.Common.Element.create(h.Bricks.Div,null,h.Common.Element.create(h.Bricks.Div,{content:c(p.LSI_LABEL_FILE_MANAGER_SHARE_RADIO_LABEL),className:this.getClassName("radioLabel")}),h.Common.Element.create(h.Forms.Radios,{value:t,onChange:function(e){n.setState({option:e.value})}}),e))},render:function(){return this._getChild()}});i(26);function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function Z(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function J(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?Object(arguments[e]):{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(e){X(t,e,i[e])})}return t}function X(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ee(){var e=ie(["\n        &&& {\n          margin: 8px 0 0;\n        }\n      "]);return ee=function(){return e},e}function te(){var e=ie(["\n        padding: 24px 0;\n      "]);return te=function(){return e},e}function ie(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ne=h.Common.VisualComponent.create({mixins:[h.Common.BaseMixin,h.Common.ElementaryMixin],statics:{tagName:n+"DnDBinaryForm",classNames:{main:s+"dnd-form",row:s+"dnd-form-row "+r.css(te()),rowLabel:s+"dnd-form-row-label",rowLabelRequired:s+"dnd-form-row-label-required",formItem:r.css(ee())},opt:{nestingLevelWrapper:!0}},propTypes:{done:h.PropTypes.func,onSuccess:h.PropTypes.func,onCancel:h.PropTypes.func,fileList:h.PropTypes.oneOfType([h.PropTypes.object,h.PropTypes.array]),lsiLabels:h.PropTypes.object,customCodesEnabled:h.PropTypes.bool,customCodesRequired:h.PropTypes.bool,ignoreTags:h.PropTypes.arrayOf(h.PropTypes.string),availableTags:h.PropTypes.arrayOf(h.PropTypes.string),allowCustomTags:h.PropTypes.bool,onTagCreate:h.PropTypes.func},getDefaultProps:function(){return{}},getInitialState:function(){return{feedbacks:{},messages:{},files:this.props.fileList.map(function(e){return{file:e,feedback:"initial",message:void 0}})}},componentDidMount:function(){var e=this;setTimeout(function(){return e._first&&e._first.focus()},200)},componentWillReceiveProps:function(e){this.props.fileList!==e.fileList&&this.setState({files:e.fileList.map(function(e){return{file:e,feedback:"initial",message:void 0}})})},getForm:function(){return this._form},_registerFileInput:function(e,t){this._validateFileSize(e,t)},_validateFileSize:function(n,e){var s=this;if(e)O(e,this.props).then(function(e){var t=J({},s.state.files[n]),i=Z(s.state.files);e&&e.size>1024*N(s.props.sizeLimit)?(t.feedback="error",t.message=c(s.props.lsiLabels.fileSizeExceededError,{maxSize:N(s.props.sizeLimit)+"KB"})):(t.feedback="initial",t.message=void 0),t.file=e,i[n]=t,s.setState({files:i})});else{var t=J({},this.state.files[n]),i=Z(this.state.files);t.feedback="initial",t.message=void 0,t.file=e,i[n]=t,this.setState({files:i})}},_onSave:function(){for(var e=this._form.getValues(),t=[],i=[],n=0;n<this.props.fileList.length;n++)t.push(e["code"+n]),i.push(e["tag"+n]);this.props.done(t,i),this.props.onCancel()},_validateCode:function(e){if(e.value&&!e.value.match(/^([a-zA-Z0-9_]){3,64}$/g))return{feedback:"error",message:c(p.LSI_INVALID_CODE),value:e.value}},_getRow:function(e,i){var n=this,t=this.props.availableTags||this.props.allowCustomTags;return h.Common.Element.create(h.Bricks.Row,{key:"row"+i,className:this.getClassName("row")},this.props.customCodesEnabled?h.Common.Element.create(h.Forms.Text,{label:c(p.LSI_LABEL_ADD_BINARY_CODE),inputColWidth:"s-12 m-7",labelColWidth:"s-12 m-5",className:this.getClassName("formItem"),name:"code"+i,ref_:function(e){0===i&&(n._first=e)},inputAttrs:{autoComplete:"off"},onValidate:this._validateCode,required:this.props.customCodesRequired,requiredMessage:this.props.customCodesRequired&&c(p.LSI_LABEL_ADD_BINARY_CODE_REQUIRED),controlled:!1}):null,t?h.Common.Element.create(F,{label:c(p.LSI_LABEL_ADD_TAGS),inputColWidth:"s-12 m-7",labelColWidth:"s-12 m-5",className:this.getClassName("formItem"),availableTags:this.props.availableTags,ignoreTags:this.props.ignoreTags,allowCustomTags:this.props.allowCustomTags,name:"tag"+i,displayHint:!1,controlled:!1}):null,h.Common.Element.create(h.Forms.File,{ref_:function(){return n._registerFileInput(i,e.file)},label:c(this.props.lsiLabels.addBinaryFormFile),inputColWidth:"s-12 m-7",labelColWidth:"s-12 m-5",className:this.getClassName("formItem"),name:"file"+i,value:e.file,feedback:e.feedback,message:e.message,onChange:function(e){var t=e.value;return n._validateFileSize(i,t)},required:!0}))},_getRows:function(){for(var e=[],t=0;t<this.state.files.length;t++)e.push(this._getRow(this.state.files[t],t));return e},_getChild:function(){var n=this;return h.Common.Element.create(h.Forms.Form,Q({},this.getMainPropsToPass(),{onSave:function(e){var t=e.component,i=e.values;return n._onSave(t,i)},onCancel:this.props.onCancel,ref_:function(e){return n._form=e}}),this._getRows())},render:function(){return this._getChild()}}),se=(i(28),h.Common.VisualComponent.create({mixins:[h.Common.BaseMixin,h.Common.ElementaryMixin],statics:{tagName:n+"Controls",classNames:{main:s+"controls",codeButtons:s+"controls-code-buttons"},opt:{nestingLevelWrapper:!0}},propTypes:{formComponent:h.PropTypes.func,hasDelete:h.PropTypes.bool,label:h.PropTypes.oneOfType([h.PropTypes.string,h.PropTypes.object])},getDefaultProps:function(){return{hasDelete:!1}},getInitialState:function(){return{disabledButton:!1}},setDisabledButton:function(e){this.setState({disabledButton:e})},_save:function(e){return this.props.formComponent()&&this.props.formComponent().getForm()&&this.props.formComponent().getForm().isValid()&&this.props.formComponent()&&this.props.formComponent().getForm()&&this.props.formComponent().getForm().save(),this},_getMainPropsToPass:function(){var e=this.getMainPropsToPass();return e.disabled=!1,e},_getButtons:function(){var e=this;return[h.Common.Element.create(h.Bricks.Button,{onClick:function(){return e.props.formComponent().getForm()&&e.props.formComponent().getForm().cancel()},content:c(p.LSI_LABEL_BUTTON_CANCEL),disabled:this.isDisabled(),key:"Cancel"}),h.Common.Element.create(h.Bricks.Button,{colorSchema:this.props.hasDelete?"danger":"primary",onClick:this._save,content:c(this.props.label?this.props.label:this.props.hasDelete?p.LSI_LABEL_BUTTON_DELETE:p.LSI_LABEL_BUTTON_SAVE),disabled:this.isDisabled()||this.state.disabledButton,key:"Submit"})]},render:function(){return h.Common.Element.create(h.Common.Div,this._getMainPropsToPass(),this._getButtons())}}));i(30);function re(){return(re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var ae=h.Common.VisualComponent.create({mixins:[h.Common.BaseMixin,h.Common.CcrReaderMixin],statics:{tagName:n+"FormController",classNames:{main:s+"form-controller",modalHeader:s+"form-controller-modal-header",alignRight:function(){return r.css("text-align: right;")}},opt:{nestingLevelWrapper:!0}},propTypes:{settings:h.PropTypes.object,lsiLabels:h.PropTypes.object,allowCustomTags:h.PropTypes.bool,ignoreTags:h.PropTypes.arrayOf(h.PropTypes.string),availableTags:h.PropTypes.arrayOf(h.PropTypes.string),onTagCreate:h.PropTypes.func,sizeLimit:h.PropTypes.number,outputMaxHeight:h.PropTypes.number,outputMaxWidth:h.PropTypes.number,outputQuality:h.PropTypes.number},getDefaultProps:function(){return{settings:{},allowCustomTags:!1,ignoreTags:void 0,onTagCreate:void 0,availableTags:void 0,sizeLimit:void 0,outputMaxHeight:void 0,outputMaxWidth:void 0,outputQuality:void 0}},getInitialState:function(){return this._initialDomNode=null,{forceRender:void 0}},componentDidMount:function(){for(var e=this._initialDomNode;e&&e.tagName&&!e.classList.contains("uu5-bricks-modal");)e=e.parentNode;this.setState({forceRender:!(!e||!e.tagName)})},openDnDForm:function(e,t,i){var n=this,s={header:h.Common.Element.create(h.Bricks.Div,{className:this.getClassName("modalHeader"),content:c(this.props.lsiLabels.addBinariesFormHeader||p.LSI_LABEL_ADD_BINARIES)}),content:h.Common.Element.create(ne,re({ref_:function(e){n._currentForm=e},id:h.Common.Tools.generateUUID(),done:t,fileList:e,onCancel:this._closeModal,lsiLabels:this.props.lsiLabels,ignoreTags:this.props.ignoreTags,availableTags:this.props.availableTags,allowCustomTags:this.props.allowCustomTags,onTagCreate:this.props.onTagCreate,sizeLimit:this.props.sizeLimit,outputMaxHeight:this.props.outputMaxHeight,outputMaxWidth:this.props.outputMaxWidth,outputQuality:this.props.outputQuality},i)),onClose:function(){return n._closeModal()},footer:h.Common.Element.create(se,{formComponent:this._getCurrentForm,className:this.getClassName("alignRight")}),sticky:!1,size:"l"};this._openModal(s)},openUpdateBinaryForm:function(e,t,i,n,s,r){var a=this,o={header:h.Common.Element.create(h.Bricks.Div,{className:this.getClassName("modalHeader"),content:c(this.props.lsiLabels.updateBinaryFormHeader)}),content:h.Common.Element.create(U,{ref_:function(e){a._currentForm=e},id:h.Common.Tools.generateUUID(),file:e,done:this._closeModal,thumbnail:i,addThumbnail:n,removeThumbnail:s,binary:t,onCancel:this._closeModal,onSuccess:r,baseUri:this.props.settings.baseUri,cmdUpdateBinaryData:this.props.settings.uuCmdUpdateBinaryData,cmdCreateThumbnail:this.props.settings.uuCmdCreateThumbnail,cmdUpdateThumbnailData:this.props.settings.uuCmdUpdateThumbnailData,cmdDeleteThumbnail:this.props.settings.uuCmdDeleteThumbnail,shouldSaveThumbnail:"none"!==this.props.settings.thumbnailStrategy,lsiLabels:this.props.lsiLabels,currentControls:this._getCurrentControls,outputMaxHeight:this.props.settings.outputMaxHeight,outputMaxWidth:this.props.settings.outputMaxWidth,outputQuality:this.props.settings.outputQuality,sizeLimit:this.props.sizeLimit}),onClose:this._closeModal,footer:h.Common.Element.create(se,{ref_:function(e){return a._currentControls=e},formComponent:this._getCurrentForm,className:this.getClassName("alignRight")}),sticky:!1,size:"l"};this._openModal(o)},openUpdateBinaryMetaDataForm:function(e,t){var i=this,n={header:h.Common.Element.create(h.Bricks.Div,{className:this.getClassName("modalHeader"),content:c(this.props.lsiLabels.updateBinaryMetaDataFormHeader)}),content:h.Common.Element.create(H,{ref_:function(e){i._currentForm=e},id:h.Common.Tools.generateUUID(),done:this._closeModal,binary:e,onCancel:this._closeModal,onSuccess:t,baseUri:this.props.settings.baseUri,cmdUpdateBinary:this.props.settings.uuCmdUpdateBinary,currentControls:this._getCurrentControls,ignoreTags:this.props.ignoreTags,availableTags:this.props.availableTags,allowCustomTags:this.props.allowCustomTags,onTagCreate:this.props.onTagCreate}),onClose:function(){return i._closeModal()},footer:h.Common.Element.create(se,{ref_:function(e){return i._currentControls=e},id:h.Common.Tools.generateUUID(),formComponent:this._getCurrentForm,className:this.getClassName("alignRight")}),sticky:!1,size:"m",overflow:!0};this._openModal(n)},openDeleteBinaryForm:function(e,t,i,n){var s=this,r={header:h.Common.Element.create(h.Bricks.Div,{className:this.getClassName("modalHeader"),content:c(this.props.lsiLabels.deleteBinaryFormHeader)}),content:h.Common.Element.create(V,{ref_:function(e){s._currentForm=e},id:h.Common.Tools.generateUUID(),binary:e,filename:e.filename,thumbnail:t,removeThumbnail:i,onSuccess:n,done:this._closeModal,onCancel:this._closeModal,baseUri:this.props.settings.baseUri,cmdDeleteBinary:this.props.settings.uuCmdDeleteBinary,cmdDeleteThumbnail:this.props.settings.uuCmdDeleteThumbnail,shouldSaveThumbnail:"none"!==this.props.settings.thumbnailStrategy,lsiLabels:this.props.lsiLabels,currentControls:this._getCurrentControls}),footer:h.Common.Element.create(se,{ref_:function(e){return s._currentControls=e},formComponent:this._getCurrentForm,hasDelete:!0,className:this.getClassName("alignRight")}),onClose:function(){return s._closeModal(!0)},sticky:!1,size:"m"};this._openModal(r)},openPreviewBinaryForm:function(e){var t=this,i={header:h.Common.Element.create(h.Bricks.Div,{className:this.getClassName("modalHeader"),content:e.filename}),content:h.Common.Element.create(Y,{ref_:function(e){return t._currentForm=e},id:h.Common.Tools.generateUUID(),code:e.code,done:this._closeModal,onCancel:this._closeModal,rev:e.sys.rev,baseUri:this.props.settings.baseUri,cmdGetBinaryData:this.props.settings.uuCmdGetBinaryData}),onClose:function(){return t._closeModal()},sticky:!1,size:"auto"};this._openModal(i)},openShareBinaryForm:function(e,t){var i=this,n={header:h.Common.Element.create(h.Bricks.Div,{className:this.getClassName("modalHeader"),content:c(this.props.lsiLabels.shareBinaryFormHeader)}),content:h.Common.Element.create($,{ref_:function(e){i._currentForm=e},id:h.Common.Tools.generateUUID(),binary:e,settings:this.props.settings.sharingOptions[t]?this.props.settings.sharingOptions[t]:this.props.settings.sharingOptions.default,done:this._closeModal,onCancel:this._closeModal}),footer:h.Common.Element.create(se,{formComponent:this._getCurrentForm,label:p.LSI_LABEL_BUTTON_COPY,className:this.getClassName("alignRight")}),onClose:function(){return i._closeModal()},sticky:!1,size:"l"};this._openModal(n)},_openModal:function(e){this._modal.open(e)},_closeModal:function(){var e=this;this._modal.close(!1),setTimeout(function(){return e._currentControls&&e._currentControls.setDisabledButton(!1)},500),this._currentForm=null},_getCurrentForm:function(){return this._currentForm},_getCurrentControls:function(){return this._currentControls},_setInitialDomNodeRef:function(e){this._initialDomNode=e},render:function(){var t=this,e=this.state.forceRender;return void 0===e?h.Common.Element.create("div",{ref:this._setInitialDomNodeRef}):h.Common.Element.create(h.Bricks.Modal,{ref:function(e){return t._modal=e},forceRender:e,controlled:!1})}});i(32);function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function le(){var e=ce(["\n        visibility: hidden;\n      "]);return le=function(){return e},e}function ue(){var e=ce(["\n        overflow: hidden;\n        transition: height 500ms;\n        ","\n      "]);return ue=function(){return e},e}function pe(){var e=ce(["\n        overflow: hidden;\n      "]);return pe=function(){return e},e}function ce(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function de(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4)))&&(t=!0),t}var me=h.Common.VisualComponent.create({mixins:[h.Common.BaseMixin,h.Common.ElementaryMixin],statics:{tagName:n+"FileUploader",classNames:{main:s+"file-uploader",successState:s+"file-uploader-success-state",failureState:s+"file-uploader-failure-state",heightMeasurer:r.css(pe()),wrapper:function(e,t){return r.css(ue(),e.dndEnabled?"":"height: ".concat(t.height,"px;"))},initialContent:s+"file-uploader-initial-content",hiddenInitialContent:r.css(le()),progressContent:s+"file-uploader-progress-content",dndContent:s+"file-uploader-dnd-content",statsWrapper:s+"file-uploader-stats-wrapper",progressStat:s+"file-uploader-progress-stat",progressStatContent:s+"file-uploader-progress-stat-content",progressStatMessage:s+"file-uploader-progress-stat-message",resultSuccess:s+"file-uploader-result-success",resultFailed:s+"file-uploader-result-failed",hoverArea:s+"file-uploader-hover-area",resetButton:s+"file-uploader-reset-button"},opt:{nestingLevelWrapper:!0}},propTypes:{baseUri:h.PropTypes.string,lsiLabels:h.PropTypes.object,uuCmdCreateBinary:h.PropTypes.oneOfType([h.PropTypes.func,h.PropTypes.string]),onSetFiles:h.PropTypes.func,customCodesEnabled:h.PropTypes.bool,customCodesRequired:h.PropTypes.bool,sizeLimit:h.PropTypes.number,dndEnabled:h.PropTypes.bool},getDefaultProps:function(){return{uuCmdCreateBinary:"uu-app-binarystore/createBinary",customCodesEnabled:!1,sizeLimit:void 0,dndEnabled:!0}},getInitialState:function(){if(this._index=0,this._files=[],this._onDragEnterCounter=0,this._codes=[],this._lsiLabels={placeholder:p.LSI_LABEL_FILE_MANAGER_DROP_BAR_CONTENT,uploadSuccessMsg:p.LSI_LABEL_FILE_MANAGER_UPLOAD_RESULT_SUCCESS,uploadFailedMsg:p.LSI_LABEL_FILE_MANAGER_UPLOAD_RESULT_FAILED},this.props.lsiLabels)for(var e in this.props.lsiLabels)this._lsiLabels[e]=this.props.lsiLabels[e];return{state:"initial",hover:!1,progressStats:[],height:0}},componentDidUpdate:function(e,t){if(!this.props.dndEnabled&&!de()&&this._heightMeasurer&&(t.progressStats.length!==this.state.progressStats.length||t.state!==this.state.state)){var i;if("initial"!==this.state.state&&this.state.progressStats.length)i=h.Common.DOM.findNode(this._heightMeasurer).getBoundingClientRect().height;else i=0;this.setState({height:i})}},update:function(){return!0},getProgress:function(){return this.state.progressStats},setProgress:function(e){var t="initial",i=!0;if(0<e.length){for(var n=!0,s=0;s<e.length;s++)if("failed"===e[s].state&&(i=!1),"success"!==e[s].state&&"failed"!==e[s].state){n=!1;break}t=n?"done":"inProgress"}this.setState({progressStats:e,state:t,success:i})},setFiles:function(e,t){var i=this;return this._files="inProgress"===this.state.state?this._files:[],0<e.length&&(e.forEach(function(e){i._files.push(e)}),this.props.onSetFiles&&"function"==typeof this.props.onSetFiles?this.props.onSetFiles(e,t):this.props.customCodesEnabled?this._openDnDForm(e):this._uploadFiles(e)),this},_registerHeightMeasurer:function(e){this._heightMeasurer=e},_saveImageDone:function(e){var t=this.state.progressStats;t[this._index].state="success",this._index+1<this._files.length?(t[this._index+1].state="started",this.setState({progressStats:t}),this._index++,this._saveImage()):(this.setState({progressStats:t}),this._uploadDone())},_saveImageFail:function(e){var t=this.state.progressStats;t[this._index].state="failed",this._index+1<this._files.length?(t[this._index+1].state="started",this.setState({progressStats:t}),this._index++,this._saveImage()):(this.setState({progressStats:t}),this._uploadDone())},_saveImage:function(){if(this._files[this._index]&&this._files[this._index].size>1024*N(this.props.sizeLimit)){var e=this.state.progressStats;e[this._index].state="failed",this._index+1<this._files.length?(e[this._index+1].state="started",this.setState({progressStats:e}),this._index++,this._saveImage()):(this.setState({progressStats:e}),this._uploadDone())}else{var t=this._files[this._index],i=this._saveImageDone,n=this._saveImageFail;if(this._codes[this._index]&&(t.code=this._codes[this._index]),"function"==typeof this.props.uuCmdCreateBinary)this.props.uuCmdCreateBinary(t).then(i,n);else{var s={data:t,done:i,fail:n};b.customPostMultipartCmd(this.props.baseUri,this.props.uuCmdCreateBinary,s)}}},_uploadFiles:function(e){for(var t=this,i="inProgress"===this.state.state,n=i?this.state.progressStats:[],s=0;s<e.length;s++)n.push({name:e[s].name,state:i||0!==s?"waiting":"started"});this.setState({progressStats:n,state:"inProgress"},function(){i||(t._index=0,t._saveImage())})},_uploadDone:function(){for(var e=!0,t=0;t<this.state.progressStats.length;t++)if("failed"===this.state.progressStats[t].state){e=!1;break}this.setState({state:"done",success:e})},_openDnDForm:function(t){var i=this;this._formController.openDnDForm(t,function(e){i._codes=e,i._uploadFiles(t)},{customCodesEnabled:this.props.customCodesEnabled,customCodesRequired:this.props.customCodesRequired},this.props.customCodesRequired)},_onDropHandler:function(e){this._onDragEnterCounter=0,this.setState({hover:!1}),e.preventDefault(),e.stopPropagation();var t=[];if("inProgress"!==this.state.state){if(e.dataTransfer.items)for(var i=0;i<e.dataTransfer.files.length;i++)if(e.dataTransfer.files[i].type||e.dataTransfer.files[i].size%4096!=0){var n=e.dataTransfer.files[i];t.push(n)}this.setFiles(t)}},_onDragOverHandler:function(e){e.preventDefault(),e.stopPropagation()},_onDragEnterHandler:function(e){this._onDragEnterCounter++,this.state.hover||this.setState({hover:!0}),e.preventDefault(),e.stopPropagation()},_onDragEndHandler:function(e){this._onDragEnterCounter=0,this.setState({hover:!1}),e.preventDefault(),e.stopPropagation()},_onDragLeaveHandler:function(e){this._onDragEnterCounter--,this._onDragEnterCounter<=0&&this.setState({hover:!1}),e.preventDefault(),e.stopPropagation()},_getInitialContent:function(e){var t=this,i=this.getClassName("initialContent");return e||(i+=" "+this.getClassName("hiddenInitialContent")),e&&(i+=" "+this.getClassName("dndContent")),h.Common.Element.create(h.Bricks.Div,{className:i,content:c(this._lsiLabels.placeholder),ref_:function(e){t._dropZone=e},mainAttrs:e?{onDragOver:this._onDragOverHandler,onDragEnter:this._onDragEnterHandler,onDrop:this._onDropHandler,onDragEnd:this._onDragEndHandler,onDragLeave:this._onDragLeaveHandler}:null})},_getResultContent:function(){return this.state.success?h.Common.Element.create(h.Bricks.Div,{content:c(this._lsiLabels.uploadSuccessMsg),className:this.getClassName("resultSuccess")}):h.Common.Element.create(h.Bricks.Div,{content:c(this._lsiLabels.uploadFailedMsg),className:this.getClassName("resultFailed")})},_getClearButton:function(){var e=this;return h.Common.Element.create(h.Bricks.Link,{onClick:function(){return e.setState({state:"initial"})},className:this.getClassName("resetButton"),colorSchema:"custom"},h.Common.Element.create(h.Bricks.Icon,{icon:"mdi-close"}))},_getProgressContent:function(e){for(var t=[],i=0;i<this.state.progressStats.length;i++){var n=this.state.progressStats[i],s=void 0;switch(n.state){case"waiting":s="mdi-timer";break;case"started":s="mdi-loading";break;case"success":s="mdi-checkbox-marked-circle";break;case"failed":s="mdi-alert"}t.push(h.Common.Element.create(h.Bricks.Div,{key:"stat_"+i,className:this.getClassName("progressStat")},h.Common.Element.create(h.Bricks.Icon,{icon:s}),h.Common.Element.create("div",{className:this.getClassName("progressStatContent")},h.Common.Element.create(h.Bricks.Span,{content:this.state.progressStats[i].name}),n.message?h.Common.Element.create("div",{className:this.getClassName("progressStatMessage")},n.message):null)))}var r=this.getClassName("progressContent");return e&&(r+=" "+this.getClassName("dndContent")),h.Common.Element.create(h.Bricks.Div,{className:r,mainAttrs:e?{onDragOver:this._onDragOverHandler,onDragEnter:this._onDragEnterHandler,onDrop:this._onDropHandler,onDragEnd:this._onDragEndHandler,onDragLeave:this._onDragLeaveHandler}:null},"inProgress"===this.state.state&&h.Common.Element.create(h.Bricks.Loading,null),"done"===this.state.state&&this._getResultContent(),"done"===this.state.state&&this._getClearButton(),h.Common.Element.create(h.Bricks.Div,{className:this.getClassName("statsWrapper")},t))},_getMainPropsToPass:function(){var e=this.getMainPropsToPass();return"done"===this.state.state&&(this.state.success?e.className+=" "+this.getClassName("successState"):e.className+=" "+this.getClassName("failureState")),e},_getChild:function(){var e,t=this,i=this.props.dndEnabled&&!de();switch(this.state.state){case"initial":e=this._getInitialContent(i);break;case"inProgress":case"done":e=this._getProgressContent(i)}return h.Common.Element.create(h.Common.Fragment,null,h.Common.Element.create(ae,{lsiLabels:this._lsiLabels,key:"formController",ref_:function(e){return t._formController=e}}),h.Common.Element.create(h.Bricks.Div,oe({},this._getMainPropsToPass(),{key:"uploader"}),e,h.Common.Element.create(h.Bricks.Div,{className:this.getClassName("hoverArea"),style:this.state.hover?null:{display:"none"}})))},render:function(){return h.Common.Element.create(h.Bricks.Div,{className:this.getClassName("wrapper")},h.Common.Element.create("div",{className:this.getClassName("heightMeasurer"),ref:this._registerHeightMeasurer},this._getChild()))}}),he={},fe={getInstances:function(e){return he[e]||[]},Mixin:{componentDidMount:function(){var e=he[this.getTagName()];(e=e||(he[this.getTagName()]=[])).push(this)},componentWillUnmount:function(){var e=he[this.getTagName()];if(e){var t=e.indexOf(this);-1!=t&&e.splice(t,1)}}}};function ge(e){if(!0!==e.repeat){var t=fe.getInstances("Plus4U5.Files.FileManager").filter(function(e){var t=!1;if(!e.props.ignorePaste){var i=e.findDOMNode();if(i){var n=getComputedStyle(i);"hidden"!==n.visibility&&"none"!==n.display&&(t=!0)}}return t});if(1===t.length){var i=(e.clipboardData||e.originalEvent.clipboardData||{}).items,n=[];for(var s in i){var r=i[s];if("file"===r.kind){var a=r.getAsFile();n.push(a)}}if(0<n.length)t[0].pasteFiles_(n)}}}var be={mixins:[fe.Mixin],componentDidMount:function(){if(!this.pasteFiles_)throw new Error("FilePasteHandler requires method pasteFiles_(blobs) to be defined.");1===fe.getInstances("Plus4U5.Files.FileManager").length&&document.addEventListener("paste",ge)},componentWillUnmount:function(){0===fe.getInstances("Plus4U5.Files.FileManager").length&&document.removeEventListener("paste",ge)}};i(34);function ye(e,t){if(null==e)return{};var i,n,s=function(e,t){if(null==e)return{};var i,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],0<=t.indexOf(i)||(s[i]=e[i]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],0<=t.indexOf(i)||Object.prototype.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}function _e(){var e=Le(["\n        position: absolute;\n        left: 0;\n        right: 0;\n        top: ",";\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n      "]);return _e=function(){return e},e}function ve(){var e=Le(["\n        font-size: 24px;\n      "]);return ve=function(){return e},e}function Ce(){var e=Le(["\n        font-size: 80px;\n        color: #616161;\n        width: 80px;\n        height: 80px;\n        display: flex;\n        align-items: center;\n      "]);return Ce=function(){return e},e}function Te(){var e=Le(["\n        position: absolute;\n        left: 0;\n        right: 0;\n        top: ",";\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n      "]);return Te=function(){return e},e}function Ee(){var e=Le(["\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        background: rgba(250, 250, 250, 0.95);\n        border: 4px dashed rgba(0, 0, 0, 0.17);\n      "]);return Ee=function(){return e},e}function Se(){var e=Le(["\n        position: relative;\n      "]);return Se=function(){return e},e}function Le(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Be(){return(Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var Ae=g.a.Common.Reference.forward(function(e,t){return g.a.Common.Element.create(xe,Be({},e,{listRef:t}))});Ae.displayName=n+"ListWrapper",Ae.hocFor=g.a.Tiles.List.hocFor;var xe=g.a.Common.VisualComponent.create({displayName:"ListWrapperBody",mixins:[g.a.Common.BaseMixin],statics:{classNames:{main:function(){return r.css(Se())},emptyListWarning:s+"file-manager-empty-list-warning",dndHoverArea:function(){return r.css(Ee())},hintWrapper:function(){return r.css(Te(),"number"==typeof state.positionY?state.positionY+"px":"0")},hintIcon:function(){return r.css(Ce())},hintText:function(){return r.css(ve())}}},propTypes:{wrapperAttrs:g.a.PropTypes.object,isEmpty:g.a.PropTypes.bool,isEmptyMessage:g.a.PropTypes.node},getDefaultProps:function(){return{}},getInitialState:function(){return this._hasRendered=!1,{positionY:null,height:null,hintHeight:null}},componentWillReceiveProps:function(e){this.props.isHovered!==e.isHovered&&(this._hasRendered=!1)},componentDidUpdate:function(){this._hoverArea&&this._hintWrapper&&!this._hasRendered&&(this._hasRendered=!0,this.forceUpdate())},_registerHoverArea:function(e){this._hoverArea=e},_registerHintWrapper:function(e){this._hintWrapper=e},_getHintWrapperClassName:function(){if(this._hasRendered){var e,t=this._hoverArea.getBoundingClientRect(),i=this._hintWrapper.getBoundingClientRect(),n={top:0,height:t.height};return t.top<0&&(n.top-=t.top,n.height-=n.top),t.bottom>window.innerHeight&&(n.height-=t.bottom-window.innerHeight),e=n.top+(n.height-i.height)/2,r.css(_e(),"number"==typeof e?e+"px":"0")}},render:function(){var e=this.props,t=e.wrapperAttrs,i=e.isHovered,n=e.listRef,s=e.isEmpty,r=e.isEmptyMessage,a=ye(e,["wrapperAttrs","isHovered","listRef","isEmpty","isEmptyMessage"]);return g.a.Common.Element.create(g.a.Common.Fragment,null,this.props.children,g.a.Common.Element.create(g.a.Bricks.Div,{mainAttrs:t,className:this.getClassName("main")},g.a.Common.Element.create(g.a.Tiles.List,Be({},a,{ref:n})),s&&g.a.Common.Element.create(g.a.Bricks.Div,{className:this.getClassName("emptyListWarning")},g.a.Common.Element.create(g.a.Bricks.Icon,{icon:"mdi-package-variant"}),g.a.Common.Element.create(g.a.Bricks.Div,{content:r})),i?g.a.Common.Element.create("div",{className:this.getClassName("dndHoverArea"),ref:this._registerHoverArea},g.a.Common.Element.create("div",{className:this._getHintWrapperClassName(),ref:this._registerHintWrapper},g.a.Common.Element.create("span",{className:this.getClassName("hintIcon")},g.a.Common.Element.create(g.a.Bricks.Icon,{icon:"mdi-upload"})),g.a.Common.Element.create(g.a.Bricks.Lsi,{className:this.getClassName("hintText"),lsi:p.LSI_LABEL_FILE_MANAGER_DROP_ZONE}))):null))}}),De=Ae;function Pe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ie(e,t,i){var n={};"string"==typeof e?e.split(" ").forEach(function(e){var t=e.split("-");n[t[0]]=t[1]}):n=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(e){Pe(t,e,i[e])})}return t}({},e);var s=t;return["xs","s","m","l","xl"].forEach(function(e){s=n[e]||s,n[e]="function"==typeof i?i(s):s}),n}i(35);function Fe(){return(Fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function we(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ke(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(e){Oe(t,e,i[e])})}return t}function Oe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ne(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4)))&&(t=!0),t}var Re=g.a.Common.VisualComponent.create({mixins:[g.a.Common.BaseMixin,g.a.Common.ScreenSizeMixin,be],statics:{tagName:n+"FileManager",classNames:{main:s+"file-manager",dndWrapper:s+"file-manager-dnd-wrapper"}},propTypes:{baseUri:g.a.PropTypes.string,uuCmdListBinaries:g.a.PropTypes.oneOfType([g.a.PropTypes.func,g.a.PropTypes.string]),uuCmdCreateBinary:g.a.PropTypes.oneOfType([g.a.PropTypes.func,g.a.PropTypes.string]),uuCmdUpdateBinary:g.a.PropTypes.oneOfType([g.a.PropTypes.func,g.a.PropTypes.string]),uuCmdUpdateBinaryData:g.a.PropTypes.oneOfType([g.a.PropTypes.func,g.a.PropTypes.string]),uuCmdDeleteBinary:g.a.PropTypes.oneOfType([g.a.PropTypes.func,g.a.PropTypes.string]),uuCmdGetBinaryData:g.a.PropTypes.oneOfType([g.a.PropTypes.func,g.a.PropTypes.string]),uuCmdGetBinaryDataUri:g.a.PropTypes.func,uuCmdListThumbnails:g.a.PropTypes.oneOfType([g.a.PropTypes.func,g.a.PropTypes.string]),uuCmdCreateThumbnail:g.a.PropTypes.oneOfType([g.a.PropTypes.func,g.a.PropTypes.string]),uuCmdUpdateThumbnailData:g.a.PropTypes.oneOfType([g.a.PropTypes.func,g.a.PropTypes.string]),uuCmdDeleteThumbnail:g.a.PropTypes.oneOfType([g.a.PropTypes.func,g.a.PropTypes.string]),uuCmdGetThumbnailData:g.a.PropTypes.oneOfType([g.a.PropTypes.func,g.a.PropTypes.string]),uuCmdGetThumbnailDataUri:g.a.PropTypes.func,fileList:g.a.PropTypes.array,thumbnailList:g.a.PropTypes.array,onFileCreate:g.a.PropTypes.func,onFileUpdate:g.a.PropTypes.func,onFileDelete:g.a.PropTypes.func,onFileShare:g.a.PropTypes.func,onFileClick:g.a.PropTypes.func,onSelect:g.a.PropTypes.func,thumbnailStrategy:g.a.PropTypes.string,sortItems:g.a.PropTypes.array,sortValues:g.a.PropTypes.array,onSetFileType:g.a.PropTypes.func,fileTypeFilters:g.a.PropTypes.object,dndEnabled:g.a.PropTypes.bool,sharingOptions:g.a.PropTypes.object,fileButtons:g.a.PropTypes.shape({hideDropdown:g.a.PropTypes.bool,itemList:g.a.PropTypes.arrayOf(g.a.PropTypes.oneOfType([g.a.PropTypes.string,g.a.PropTypes.shape({active:g.a.PropTypes.bool,onClick:g.a.PropTypes.func,icon:g.a.PropTypes.string,label:g.a.PropTypes.oneOfType([g.a.PropTypes.string,g.a.PropTypes.object])})]))}),lsiLabels:g.a.PropTypes.object,onFilenameSet:g.a.PropTypes.string,searchKeyList:g.a.PropTypes.array,selectable:g.a.PropTypes.oneOf(["none","single","multi"]),selectableOnly:g.a.PropTypes.bool,displayCreateButton:g.a.PropTypes.oneOfType([g.a.PropTypes.bool,g.a.PropTypes.string,g.a.PropTypes.object]),outputMaxHeight:g.a.PropTypes.number,outputMaxWidth:g.a.PropTypes.number,outputQuality:g.a.PropTypes.number,headerHidden:g.a.PropTypes.bool,allowCustomTags:g.a.PropTypes.bool,ignoreTags:g.a.PropTypes.arrayOf(g.a.PropTypes.string),availableTags:g.a.PropTypes.arrayOf(g.a.PropTypes.string),onTagCreate:g.a.PropTypes.func,readOnly:g.a.PropTypes.bool,sizeLimit:g.a.PropTypes.number,createButtonFileCodeRule:g.a.PropTypes.oneOf(["none","required","notRequired"]),dndFileCodeRule:g.a.PropTypes.oneOf(["none","required","notRequired"]),bulkActions:g.a.PropTypes.arrayOf(g.a.PropTypes.shape({content:g.a.PropTypes.any,onClick:g.a.PropTypes.func,active:g.a.PropTypes.bool})),displayInfoBar:g.a.PropTypes.bool,displayFilterBar:g.a.PropTypes.bool,displayFilterByTags:g.a.PropTypes.bool,initialCollapseBars:g.a.PropTypes.bool},getDefaultProps:function(){return{uuCmdListBinaries:"uu-app-binarystore/listBinaries",uuCmdCreateBinary:"uu-app-binarystore/createBinary",uuCmdUpdateBinary:"uu-app-binarystore/updateBinary",uuCmdUpdateBinaryData:"uu-app-binarystore/updateBinaryData",uuCmdDeleteBinary:"uu-app-binarystore/deleteBinary",uuCmdGetBinaryData:"uu-app-binarystore/getBinaryData",uuCmdGetBinaryDataUri:void 0,thumbnailStrategy:"createAll",sortItems:[{key:"code",name:{cs:"Kód",en:"Code"}},{key:"filename",name:{cs:"Název souboru",en:"Filename"}},{key:"sys.mts",name:{cs:"Datum změny",en:"Modification Time"}}],sortValues:[{key:"sys.mts",descending:!0}],dndEnabled:!0,searchKeyList:["code","filename","sys.mts","tagList"],selectable:"none",selectableOnly:!1,displayCreateButton:!0,outputMaxHeight:void 0,outputMaxWidth:void 0,outputQuality:void 0,headerHidden:!1,allowCustomTags:!1,ignoreTags:void 0,onTagCreate:void 0,availableTags:void 0,readOnly:!1,sizeLimit:void 0,createButtonFileCodeRule:void 0,dndFileCodeRule:void 0,bulkActions:void 0,displayInfoBar:!0,displayFilterBar:!0,displayFilterByTags:!0,initialCollapseBars:void 0}},getInitialState:function(){this._sharingOptions={default:[{label:p.LSI_LABEL_FILE_MANAGER_SHARE_TYPE_CODE,value:"${code}",codeStyle:"text"},{label:p.LSI_LABEL_FILE_MANAGER_SHARE_TYPE_URI,value:b.getCommandUri(this.props.baseUri,"uu-app-binarystore/getBinaryData")+"?code=${code}",codeStyle:"text"}]};var e=this._getCodeStrategies(this.props);if(this._settings=ke({baseUri:this.props.baseUri,uuCmdCreateBinary:this.props.uuCmdCreateBinary,uuCmdUpdateBinary:this.props.uuCmdUpdateBinary,uuCmdUpdateBinaryData:this.props.uuCmdUpdateBinaryData,uuCmdDeleteBinary:this.props.uuCmdDeleteBinary,uuCmdGetBinaryData:this.props.uuCmdGetBinaryData,uuCmdGetBinaryDataUri:this.props.uuCmdGetBinaryDataUri,uuCmdListThumbnails:this.props.uuCmdListThumbnails,uuCmdCreateThumbnail:this.props.uuCmdCreateThumbnail||this.props.uuCmdCreateBinary,uuCmdUpdateThumbnailData:this.props.uuCmdUpdateThumbnailData||this.props.uuCmdUpdateBinaryData,uuCmdDeleteThumbnail:this.props.uuCmdDeleteThumbnail||this.props.uuCmdDeleteBinary,uuCmdGetThumbnailData:this.props.uuCmdGetThumbnailData||this.props.uuCmdGetBinaryData,uuCmdGetThumbnailDataUri:this.props.uuCmdGetThumbnailDataUri||this.props.uuCmdGetBinaryDataUri,thumbnailStrategy:this.props.thumbnailStrategy},e,{outputMaxHeight:this.props.outputMaxHeight,outputMaxWidth:this.props.outputMaxWidth,outputQuality:this.props.outputQuality,sharingOptions:this.props.sharingOptions?this.props.sharingOptions:this._sharingOptions}),this._lsiLabels={header:p.LSI_LABEL_FILE_MANAGER,barHeader:p.LSI_LABEL_FILE_MANAGER_HEADER,searchPlaceholder:p.LSI_LABEL_FILE_MANAGER_SEARCH_PLACEHOLDER,noBinariesWarning:p.LSI_LABEL_FILE_MANAGER_EMPTY_WARNING,addBinaryFormHeader:p.LSI_LABEL_ADD_BINARY,addBinariesFormHeader:p.LSI_LABEL_ADD_BINARIES,updateBinaryFormHeader:p.LSI_LABEL_UPDATE_BINARY,deleteBinaryFormHeader:p.LSI_LABEL_DELETE_BINARY,shareBinaryFormHeader:p.LSI_LABEL_FILE_MANAGER_SHARE_HEADER,dndAreaPlaceholder:p.LSI_LABEL_FILE_MANAGER_DROP_BAR_CONTENT,dndAreaUploadSuccessMsg:p.LSI_LABEL_FILE_MANAGER_UPLOAD_RESULT_SUCCESS,dndAreaUploadFailedMsg:p.LSI_LABEL_FILE_MANAGER_UPLOAD_RESULT_FAILED,deleteBinaryConfirmMsg:p.LSI_LABEL_DELETE_BINARY_SUCCESS_CONFIRM_MSG,previewFormError:p.LSI_LABEL_FILE_MANAGER_PREVIEW_ERROR,fileSizeExceededError:p.LSI_LABEL_ADD_BINARY_FILE_SIZE_EXCEEDED,addBinaryFormFile:p.LSI_LABEL_ADD_BINARY_FILE,addBinaryFormFileRequired:p.LSI_LABEL_ADD_BINARY_FILE_REQUIRED,deleteBinaryFormContent:p.LSI_LABEL_DELETE_BINARY_MSG,updateBinaryMetaDataFormHeader:p.LSI_UPDATE_BINARY_META_DATA_FORM_HEADER},this.props.lsiLabels)for(var t in this.props.lsiLabels)this._lsiLabels[t]=this.props.lsiLabels[t];this._fileButtons=this._computeFileButtons(),this._thumbnailMap={},this._noThumbnailImageList=[],this._isDndAllowed=this.props.dndEnabled&&!this.props.readOnly&&!Ne(),this._onDragEnterCounter=0;var i=[],n={},s="loading";if(this.props.fileList){if(this.props.thumbnailList){for(var r=0;r<this.props.fileList.length;r++)this.props.fileList[r].code.match(/_th$/)||i.push(this._buildBinaryJson(this.props.fileList[r]));for(var a=0;a<this.props.thumbnailList.length;a++)this.props.thumbnailList[a].code.match(/_th$/)&&(n[this.props.thumbnailList[a].code]=this.props.thumbnailList[a])}else for(var o=0;o<this.props.fileList.length;o++)this.props.fileList[o].code.match(/_th$/)?n[this.props.fileList[o].code]=this.props.fileList[o]:i.push(this._buildBinaryJson(this.props.fileList[o]));s="ready"}return{state:s,type:"full",binaries:i,thumbnailMap:n,displayCreateButton:this._processDisplayCreateButton(),dndHover:!1,collapseBars:this.props.initialCollapseBars}},componentWillMount:function(){this.props.customCodeStrategy&&g.a.Common.Tools.warning('Property "customCodeStrategy" is deprecated! Use properties "createButtonFileCodeRule" and "dndFileCodeRule" instead.')},componentDidMount:function(){this.props.fileList||this._listBinaries(0),this.props.fileList&&"createAll"===this.props.thumbnailStrategy&&this._migrateImagesWithoutThumbnail()},componentWillReceiveProps:function(e){var t=this._getCodeStrategies(e);this._settings=ke({baseUri:e.baseUri,uuCmdCreateBinary:e.uuCmdCreateBinary,uuCmdUpdateBinary:e.uuCmdUpdateBinary,uuCmdUpdateBinaryData:e.uuCmdUpdateBinaryData,uuCmdDeleteBinary:e.uuCmdDeleteBinary,uuCmdGetBinaryData:e.uuCmdGetBinaryData,uuCmdGetBinaryDataUri:e.uuCmdGetBinaryDataUri,uuCmdListThumbnails:e.uuCmdListThumbnails,uuCmdCreateThumbnail:e.uuCmdCreateThumbnail||e.uuCmdCreateBinary,uuCmdUpdateThumbnailData:e.uuCmdUpdateThumbnailData||e.uuCmdUpdateBinaryData,uuCmdDeleteThumbnail:e.uuCmdDeleteThumbnail||e.uuCmdDeleteBinary,uuCmdGetThumbnailData:e.uuCmdGetThumbnailData||e.uuCmdGetBinaryData,uuCmdGetThumbnailDataUri:e.uuCmdGetThumbnailDataUri||e.uuCmdGetBinaryDataUri,thumbnailStrategy:e.thumbnailStrategy},t,{outputMaxHeight:e.outputMaxHeight,outputMaxWidth:e.outputMaxWidth,outputQuality:e.outputQuality,sharingOptions:e.sharingOptions?e.sharingOptions:this._sharingOptions}),this._isDndAllowed=e.dndEnabled&&!Ne(),this.props.fileButtons===e.fileButtons&&this.props.customFileButtons===e.customFileButtons&&this.props.readOnly===e.readOnly||(this._fileButtons=this._computeFileButtons(e)),this.props.displayCreateButton!==e.displayCreateButton&&this.setState({displayCreateButton:this._processDisplayCreateButton(e)})},addFile:function(e){var i=this._buildBinaryJson(e);this.setState(function(e){var t=we(e.binaries);return t.push(i),{binaries:t}})},getFile:function(e){for(var t=null,i=0;i<this.state.binaries.length;i++)if(e===this.state.binaries[i].binary.code){t=this.state.binaries[i].binary;break}return t},updateFile:function(n){function t(){return s.setState(function(e){for(var t=e.binaries,i=0;i<t.length;i++)if(t[i].code===n.code){(t=we(t))[i]=s._buildBinaryJson(ke({},n));break}return{binaries:t}})}var s=this,e=this._listController.getSelectedItemList(),i=!1;e.forEach(function(e){e.code===n.code&&(i=!0,e=s._buildBinaryJson(ke({},n)),s._listController.addSelectedItem(e,t()))}),i||t()},deleteFile:function(n){var e=this;this._listController.removeSelectedItem(n,function(){return e.setState(function(e){for(var t=e.binaries,i=0;i<t.length;i++)if(t[i].binary.code===n){(t=we(t)).splice(i,1);break}return{binaries:t}})})},setThumbnail:function(i){this.setState(function(e){var t=ke({},e.thumbnailMap);return t[i.code]=i,{thumbnailMap:t}})},unsetThumbnail:function(i){this.setState(function(e){var t=ke({},e.thumbnailMap);return delete t[i],{thumbnailMap:t}})},getThumbnail:function(e){return this.state.thumbnailMap[e]},customAddSelectedItem:function(e){"single"===this.props.selectable&&this._listController.clearSelected(),this._listController.addSelectedItem(e)},customRemoveSelectedItem:function(e){this._listController.removeSelectedItem(e)},getSelectedFiles:function(){return this._listController.getSelectedItemList()},pasteFiles_:function(e){this.props.readOnly||0<(e=e.slice(-1)).length&&this._addFiles(e[0])},_processDisplayCreateButton:function(e){var t=(0<arguments.length&&void 0!==e?e:this.props).displayCreateButton;return!0===t&&(t={xs:"texticon"}),t=t&&Ie(t,"texticon",function(e){return{displayText:!!e.match("text"),displayIcon:!!e.match("icon")}})},_getCodeStrategies:function(e){var t=0<arguments.length&&void 0!==e?e:this.props,i=t.createButtonFileCodeRule,n=t.dndFileCodeRule;return t.customCodeStrategy&&(i||("none"===t.customCodeStrategy?i="none":"single"===t.customCodeStrategy||"multi"===t.customCodeStrategy?i="notRequired":"singleRequired"!==t.customCodeStrategy&&"multiRequired"!==t.customCodeStrategy||(i="required")),n||("none"===t.customCodeStrategy||"single"===t.customCodeStrategy||"singleRequired"===t.customCodeStrategy?n="none":"multi"===t.customCodeStrategy?n="notRequired":"multiRequired"===t.customCodeStrategy&&(n="required"))),{createButtonFileCodeRule:i||"notRequired",dndFileCodeRule:n||"none"}},_getType:function(e){var t,i,n="icon",s=!1;return e.contentType.match(/\/svg/)?(t="svg",i="mdi-file-image",n="original",s=!0):e.contentType.match(/image\//)?(t="image",i="mdi-file-image",n="thumbnail",s=!0):e.contentType.match(/\/pdf/)?(t="pdf",i="mdi-file-pdf",s=!0):i=e.contentType.match(/(\/html)|(\/xml)/)?(t="xml","mdi-file-xml"):e.contentType.match(/(\/text$)|(^text\/)/)?(t="text","mdi-file-document"):e.contentType.match(/\/json/)?(t="json","mdi-json"):e.filename&&e.filename.match(/(\.rar$)|(\.zip$)|(\.7z$)|(\.tgz$)|(\.tar$)|(\.tar\.gz$)/)?(t="archive","mdi-package"):(t="other","mdi-file"),{type:t,icon:i,thumbnail:n,clickable:s}},_buildBinaryJson:function(e){for(var t=this.props.onSetFileType?this.props.onSetFileType(e):this._getType(e),i={},n=0;n<this.props.sortItems.length;n++)i[this.props.sortItems[n].key]=this.props.sortItems[n].key.split(".").reduce(this._getVarOnKey,e);return i.id=e.code,i.binary=e,i.type=t.type,i.icon=t.icon,i.thumbnailType=t.thumbnail,i.clickable=t.clickable,i},_filterBinariesByTags:function(e,t){return t&&0!==t.length?e.filter(function(e){return!e.binary.tagList||e.binary.tagList.every(function(e){return-1===t.indexOf(e)})}):e},_getBinaries:function(){return this._filterBinariesByTags(this.state.binaries,this.props.ignoreTags)},_computeFileButtons:function(e){var t,i=this,n=0<arguments.length&&void 0!==e?e:this.props,s=n.fileButtons,r=n.deprecatedCustomFileButtons,a=n.readOnly,o=n.availableTags,l=n.allowCustomTags,u=!1;return!(t=s?ke({},s):r?(u=!0,ke({},r)):{hideDropdown:!1,itemList:["share","download","update","updateTags","delete"]}).itemList||o||l||(t.itemList=t.itemList.filter(function(e){return"updateTags"!==e})),t.itemList&&a&&(t.itemList=t.itemList.filter(function(e){return"update"!==e&&"updateTags"!==e&&"delete"!==e})),t.itemList&&"function"==typeof this.props.uuCmdGetBinaryData&&!this.props.onFileShare&&(t.itemList=t.itemList.filter(function(e){return"share"!==e})),Array.isArray(t.itemList)&&(u&&t.itemList.forEach(function(e){e.icon&&(e.active=!0)}),t.itemList=t.itemList.map(function(e){var t=null;if("string"==typeof e)switch(e){case"share":t={label:p.LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_SHARE,isDownload:!1,onClick:i._openShareBinaryForm,icon:"mdi-content-copy",active:!0};break;case"download":t={label:p.LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_DOWNLOAD,isDownload:!0};break;case"update":t={label:p.LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_UPDATE,isDownload:!1,onClick:i._openUpdateBinaryFileDialog,icon:"mdi-pencil",active:!0};break;case"updateTags":t={label:p.LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_UPDATE_TAGS,isDownload:!1,onClick:i._openUpdateBinaryDialog,icon:"mdi-tag",active:!0};break;case"delete":t={label:p.LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_DELETE,isDownload:!1,onClick:i._deleteBinary}}else t=e;return t})),t},_shouldListNext:function(e){return(e.pageIndex+1)*e.pageSize<e.total},_listBinariesDone:function(s,e){var r=this;this.setState(function(e){for(var t=[],i=ke({},e.thumbnailMap),n=0;n<s.itemList.length;n++)s.itemList[n].code.match(/_th$/)?i[s.itemList[n].code]=s.itemList[n]:t.push(r._buildBinaryJson(s.itemList[n]));return{binaries:e.binaries.concat(t),thumbnailMap:i}}),this._shouldListNext(s.pageInfo)?this._listBinaries(e+1):this.props.uuCmdListThumbnails?this._listThumbnails(0):this._finishListBinaries()},_listBinariesFail:function(e){this.setState({state:"error"})},_listBinaries:function(t){function e(e){return i._listBinariesDone(e,t)}var i=this,n={pageInfo:JSON.stringify({pageSize:1e3,pageIndex:t})},s=this._listBinariesFail;if("function"==typeof this.props.uuCmdListBinaries)this.props.uuCmdListBinaries(n).then(e,s);else{var r={data:n,done:e,fail:s};b.customGetCmd(this.props.baseUri,this.props.uuCmdListBinaries,r)}},_listThumbnailsDone:function(n,e){var t=this;this.setState(function(e){for(var t=ke({},e.thumbnailMap),i=0;i<n.itemList.length;i++)n.itemList[i].code.match(/_th$/)&&(t[n.itemList[i].code]=n.itemList[i]);return{thumbnailMap:t}},function(){return t._shouldListNext(n.pageInfo)?t._listThumbnails(e+1):t._finishListBinaries()})},_listThumbnailsFail:function(e){this.setState({state:"error"})},_listThumbnails:function(t){var i=this;if("none"!==this.props.thumbnailStrategy){var e={pageInfo:JSON.stringify({pageSize:1e3,pageIndex:t})},n=function(e){return i._listThumbnailsDone(e,t)},s=this._listThumbnailsFail,r=this.props.uuCmdListThumbnails||this.props.uuCmdListBinaries;if("function"==typeof r)r(e).then(n,s);else{var a={data:e,done:n,fail:s};b.customGetCmd(this.props.baseUri,r,a)}}else this._finishListBinaries()},_finishListBinaries:function(){this.setState({state:"ready"}),"createAll"===this.props.thumbnailStrategy&&this._migrateImagesWithoutThumbnail()},_migrateImagesWithoutThumbnail:function(){for(var e=this.state.binaries,t=0;t<e.length;t++){var i=61<e[t].binary.code.length?e[t].binary.code.substr(0,61):e[t].binary.code;"thumbnail"!==e[t].thumbnailType||this.state.thumbnailMap[i+"_th"]||this._noThumbnailImageList.push(e[t].code)}this._migrateImage(0)},_migrateImageDone:function(e,t,i){var n=this,s=new Blob([e],{type:t});this._saveThumbnail(this._noThumbnailImageList[i],s,i,function(){n._migrateImage(i+1),n._saveOriginalAsThumbnail(n._noThumbnailImageList[i],s)},function(e){n.setThumbnail(e),n._migrateImage(i+1)},!0)},_migrateImageFail:function(e,t){this._migrateImage(t+1)},_migrateImage:function(i){var n=this;if(this._noThumbnailImageList[i]){var e={code:this._noThumbnailImageList[i]},t=function(e,t){return n._migrateImageDone(e,t,i)},s=function(e){return n._migrateImageFail(e,i)};if("function"==typeof this._settings.uuCmdGetBinaryData)this._settings.uuCmdGetBinaryData(e).then(t,s);else{var r={data:e,done:t,fail:s};b.customGetNotTransformedCmd(this.props.baseUri,this._settings.uuCmdGetBinaryData,r)}}},_saveThumbnail:function(u,e,t,p,c,i){var d=this,n=new FileReader,m=document.createElement("canvas"),h=null,f=new Image;i&&"createAll"===this.props.thumbnailStrategy||!i&&("createAll"===this.props.thumbnailStrategy||"createNew"===this.props.thumbnailStrategy)?n.readAsDataURL(e):p(),n.onload=function(){var e=n.result;f.src=e},f.onerror=function(e){p()},f.onload=function(){if(0===f.width||0===f.height)g.a.Common.Tools.warning("Image is empty"),p();else{var e=d._calculateCanvasSize(f.width,f.height);m.id="file-manager-hidden-canvas",m.width=e.canvasWidth,m.height=e.canvasHeight,m.style.visibility="hidden",document.body.appendChild(m),(h=m.getContext("2d")).fillStyle="white",h.fillRect(0,0,e.canvasWidth,e.canvasHeight),h.drawImage(f,0,0,e.canvasWidth,e.canvasHeight);for(var t=m.toDataURL("image/jpeg",.85),i=atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],s=new ArrayBuffer(i.length),r=new Uint8Array(s),a=0;a<i.length;a++)r[a]=i.charCodeAt(a);var o=new Blob([s],{type:n});document.body.removeChild(m);var l={done:function(e){c(e)},fail:function(){p()},data:{code:(61<u.length?u.substr(0,61):u)+"_th",data:o}};"function"==typeof d._settings.uuCmdCreateThumbnail?d._settings.uuCmdCreateThumbnail(l.data).then(l.done,l.fail):b.customPostMultipartCmd(d.props.baseUri,d._settings.uuCmdCreateThumbnail,l)}}},_saveOriginalAsThumbnail:function(e,t){var i={done:function(){},fail:function(){},data:{code:(e=61<e.length?e.substr(0,61):e)+"_th",data:t}};"function"==typeof this._settings.uuCmdCreateThumbnail?this._settings.uuCmdCreateThumbnail(i.data).then(i.done,i.fail):b.customPostMultipartCmd(this.props.baseUri,this._settings.uuCmdCreateThumbnail,i)},_calculateCanvasSize:function(e,t){var i=512,n=512;return(n<t||i<e)&&(e/i<t/n?(e/=t/n,t=n):(t/=e/i,e=i)),n=Math.min(n,t),i=Math.min(i,e),{canvasWidth:Math.ceil(i),canvasHeight:Math.ceil(n)}},_openFileDialogue:function(e){var t="add"===e?this._fileFormAdd:this._fileFormUpdate,i=g.a.Common.DOM.findNode(t);(i=i&&i.querySelector("input"))&&(i.value=""),t._open()},_addFiles:function(e){e=Array.isArray(e)?e:[e],this._dropBar.setFiles(e,{customCodesEnabled:"none"!==this._settings.createButtonFileCodeRule,customCodesRequired:"required"===this._settings.createButtonFileCodeRule})},_deleteBinary:function(e,t){if(this.props.onFileDelete)this.props.onFileDelete(e,t);else{var i=(61<e.code.length?e.code.substr(0,61):e.code)+"_th";this._formController.openDeleteBinaryForm(e,this.state.thumbnailMap[i],this.unsetThumbnail,this.deleteFile)}},_openUpdateBinaryFileDialog:function(e,t){this.props.onFileUpdate?this.props.onFileUpdate(e,t):(this._binaryToUpdate=e,this._openFileDialogue("update"))},_openUpdateBinaryDialog:function(e,t){this.props.onFileInfoUpdate?this.props.onFileInfoUpdate(e,t):this._formController.openUpdateBinaryMetaDataForm(e,this.updateFile)},_updateBinary:function(e){var t=(61<this._binaryToUpdate.code.length?this._binaryToUpdate.code.substr(0,61):this._binaryToUpdate.code)+"_th";this._formController.openUpdateBinaryForm(e,this._binaryToUpdate,this.state.thumbnailMap[t],this.setThumbnail,this.unsetThumbnail,this.updateFile)},_openDnDForm:function(e,t,i){this._formController.openDnDForm(e,t,i)},_openShareBinaryForm:function(e,t){this.props.onFileShare?this.props.onFileShare(e,t):this._formController.openShareBinaryForm(e,t)},_getActions:function(e){var t=this,i=[];return this.state.displayCreateButton&&i.push({content:this.state.displayCreateButton[e].displayText?this._lsiLabels.addBinaryFormHeader:void 0,icon:this.state.displayCreateButton[e].displayIcon?"mdi-upload":null,onClick:function(){return t.props.onFileCreate?t.props.onFileCreate():t._openFileDialogue("add")},active:!0,controlledContent:!0}),"full"!==this.state.type&&i.push({content:"",onClick:function(){return t._setType("full")},icon:"mdi-view-grid",active:!0}),"small"!==this.state.type&&i.push({content:"",onClick:function(){return t._setType("small")},icon:"mdi-view-headline",active:!0}),i},_setType:function(e){this.state.type!==e&&this.setState({type:e})},_getVarOnKey:function(e,t){return e[t]},_getAttrValue:function(e,t){return t.split(".").reduce(this._getVarOnKey,e)},_attrContainsValue:function(e,t){return!(!e||!t)&&(Array.isArray(e)?e.some(function(e){return e&&-1!==e.toLowerCase().indexOf(t)}):-1!==e.toLowerCase().indexOf(t))},_matchSearch:function(i,e){for(var n=this,s=e.toLowerCase().split(/[\s]/),r=!1,t=function(e){var t=n._getAttrValue(i.binary,n.props.searchKeyList[e]);if(s.some(function(e){return n._attrContainsValue(t,e)}))return r=!0,"break"},a=0;a<this.props.searchKeyList.length;a++){if("break"===t(a))break}return r},_uploadFiles:function(e,t,i,n){if(!this._dndStats||this._dndStats.finished){for(var s=[],r=0;r<e.length;r++)s.push({name:e[r].name,state:0===r?"started":"waiting"});this._dndStats={index:0,fileStats:s,fileList:e,codeList:t,tagList:i},this._dropBar.setProgress(this._dndStats.fileStats),this._uploadFile(n)}else{for(var a=0;a<e.length;a++)this._dndStats.fileStats.push({name:e[a].name,state:"waiting"});this._dndStats.fileList=this._dndStats.fileList.concat(e),this._dndStats.codeList&&(this._dndStats.codeList=this._dndStats.codeList.concat(t)),this._dndStats.tagList&&(this._dndStats.tagList=this._dndStats.tagList.concat(i)),this._dropBar.setProgress(this._dndStats.fileStats)}},_callUploadFileDone:function(t,i,n){var s=this;this._saveThumbnail(t.code,this._dndStats.fileList[i],i,function(){s._dndStats.fileStats[i].state="success",s._dndStats.fileStats[i+1]&&(s._dndStats.fileStats[i+1].state="started"),s._dropBar.setProgress(s._dndStats.fileStats),s.addFile(t),s._dndStats.index++,s._uploadFile(n)},function(e){s._dndStats.fileStats[i].state="success",s._dndStats.fileStats[i+1]&&(s._dndStats.fileStats[i+1].state="started"),s._dropBar.setProgress(s._dndStats.fileStats),s.setThumbnail(e),s.addFile(t),s._dndStats.index++,s._uploadFile(n)},!1)},_callUploadFileFail:function(e,t){this._dndStats.fileStats[this._dndStats.index].state="failed",this._dndStats.fileStats[this._dndStats.index].message=t,this._dropBar.setProgress(this._dndStats.fileStats),this._dndStats.index++,this._uploadFile(e)},_callUploadFile:function(e,t,n){var i=this;if(e){if(e.size&&e.size>1024*N(this.props.sizeLimit))return this._callUploadFileFail(n,g.a.Common.Element.create(g.a.Bricks.Lsi,{lsi:p.LSI_LABEL_ADD_BINARY_FILE_SIZE_EXCEEDED,params:{maxSize:this.props.sizeLimit}}));var s={data:e},r=function(e){return i._callUploadFileDone(e,t,n)},a=this._callUploadFileFail;if(this._dndStats.codeList&&this._dndStats.codeList[t]&&(s.code=this._dndStats.codeList[t]),this._dndStats.tagList&&this._dndStats.tagList[t]&&(s.tagList=this._dndStats.tagList[t]),"function"==typeof this._settings.uuCmdCreateBinary)this._settings.uuCmdCreateBinary(s).then(r,function(){return a(n)});else{var o={data:s,done:r,fail:function(e){var t;if(e&&e.code){var i=e.code.split("/");"duplicateCode"===(i=i[i.length-1])&&(t=g.a.Common.Element.create(g.a.Bricks.Lsi,{lsi:p.LSI_DUPLICATE_CODE}))}t=t||g.a.Common.Element.create(g.a.Bricks.Lsi,{lsi:p.LSI_DEFAULT_ERROR_MESSAGE}),a(n,t)}};b.customPostMultipartCmd(this.props.baseUri,this._settings.uuCmdCreateBinary,o)}}else this._dndStats.finished=!0},_uploadFile:function(n){var s=this,t=this._dndStats.index;if(t>=this._dndStats.fileList.length)this._dndStats.finished=!0;else{var e=this._dndStats.fileList[t];n?O(e,this.props).then(function(e){return s._callUploadFile(e,t,n)},function(e){var t;if(e&&e.code){var i=e.code.split("/");"duplicateCode"===(i=i[i.length-1])&&(t=g.a.Common.Element.create(g.a.Bricks.Lsi,{lsi:p.LSI_DUPLICATE_CODE}))}t=t||g.a.Common.Element.create(g.a.Bricks.Lsi,{lsi:p.LSI_DEFAULT_ERROR_MESSAGE}),s._callUploadFileFail(n,t)}):this._callUploadFile(e,t,n)}},_onSetFiles:function(i,e){var n=this,t=e?e.customCodesEnabled:"none"!==this._settings.dndFileCodeRule,s=e?e.customCodesRequired:"required"===this._settings.dndFileCodeRule;t||this.props.availableTags||this.props.allowCustomTags?this._openDnDForm(i,function(e,t){n._uploadFiles(i,e,t,!1)},{customCodesEnabled:t,customCodesRequired:s}):this._uploadFiles(i,void 0,void 0,!0)},_onTagCreate:function(e){this.props.onTagCreate({component:this,value:e})},_onDropHandler:function(e){this._onDragEnterCounter=0,this.setState({dndHover:!1}),e.preventDefault(),e.stopPropagation();var t=[];if(e.dataTransfer.items)for(var i=0;i<e.dataTransfer.files.length;i++)if(e.dataTransfer.files[i].type||e.dataTransfer.files[i].size%4096!=0){var n=e.dataTransfer.files[i];t.push(n)}this._onSetFiles(t)},_onDragOverHandler:function(e){e.preventDefault(),e.stopPropagation()},_onDragEnterHandler:function(e){this._onDragEnterCounter++,this.state.dndHover||this.setState({dndHover:!0}),e.preventDefault(),e.stopPropagation()},_onDragEndHandler:function(e){this._onDragEnterCounter=0,this.setState({dndHover:!1}),e.preventDefault(),e.stopPropagation()},_onDragLeaveHandler:function(e){this._onDragEnterCounter--,this._onDragEnterCounter<=0&&this.setState({dndHover:!1}),e.preventDefault(),e.stopPropagation()},_getFilterableTags:function(){var e=this._getBinaries();if(!e)return null;var t=new Set;return e.forEach(function(e){e.binary.tagList&&e.binary.tagList.forEach(function(e){return t.add(e)})}),we(t).sort()},_getBulkActions:function(){var e=[],t=this.props.bulkActions;return Array.isArray(t)&&(e=e.concat(t)),e},_registerListController:function(e){this._listController=e},_onSelect:function(e){"function"==typeof this.props.onSelect&&this.props.onSelect(ke({},e,{component:this}))},_getChild:function(){var e,t,i=this;return t="full"===this.state.type?(e=this.isXs()||this.isS()?232:192,this.isXs()||this.isS()?540:280):(e=400,800),[g.a.Common.Element.create(ae,{ref_:function(e){return i._formController=e},id:g.a.Common.Tools.generateUUID(),settings:this._settings,lsiLabels:this._lsiLabels,key:"formController",ignoreTags:this.props.ignoreTags,availableTags:this.props.availableTags,allowCustomTags:this.props.allowCustomTags,onTagCreate:"function"==typeof this.props.onTagCreate?this._onTagCreate:void 0,sizeLimit:this.props.sizeLimit}),g.a.Common.Element.create(g.a.Forms.File,{ref_:function(e){return i._fileFormAdd=e},key:"fileFormAdd",hidden:!0,multiple:!0,onChange:function(e){i._addFiles(e.value)}}),g.a.Common.Element.create(g.a.Forms.File,{ref_:function(e){return i._fileFormUpdate=e},key:"fileFormUpdate",hidden:!0,multiple:!1,onChange:function(e){i._updateBinary(e.value)}}),g.a.Common.Element.create(g.a.Tiles.ListController,{ref_:this._registerListController,data:this._getBinaries(),selectable:"none"!==this.props.selectable,padding:"none",onSelect:this._onSelect,key:"tiles",outputMaxHeight:this.props.outputMaxHeight,outputMaxWidth:this.props.outputMaxWidth,outputQuality:this.props.outputQuality},g.a.Common.Element.create(g.a.Tiles.ActionBar,{title:this.getLsiItem(this._lsiLabels.barHeader),actions:this._getActions(this.state.screenSize),onItemSearch:this._matchSearch,searchPlaceHolder:this.getLsiItem(this._lsiLabels.searchPlaceholder),collapsed:void 0===this.state.collapseBars?"single"===this.props.selectable:this.state.collapseBars}),this.props.displayFilterBar&&g.a.Common.Element.create(R,{displayFilterByTags:this.props.displayFilterByTags,fileTypeFilters:this.props.fileTypeFilters,tags:this._getFilterableTags()}),"multi"===this.props.selectable&&!this.props.readOnly&&g.a.Common.Element.create(g.a.Tiles.BulkActionBar,{key:"bulkBar",actions:this._getBulkActions()}),this.props.displayInfoBar&&g.a.Common.Element.create(g.a.Tiles.InfoBar,{controller:this._listController,sortItems:this.props.sortItems,sortValues:this.props.sortValues,selectable:"multi"===this.props.selectable&&!this.props.readOnly}),g.a.Common.Element.create(De,{ref_:function(e){return i._list=e},tileHeight:"auto",tileMinWidth:e,tileMaxWidth:t,tileSpacing:8,rowSpacing:8,tileElevation:0,tileJustify:"space-between",skipInnerTile:!0,isEmpty:0===this.state.binaries.length,isEmptyMessage:c(this._lsiLabels.noBinariesWarning),tile:g.a.Common.Element.create(A,{isS:this.isXs()||this.isS(),fileManager:this,tileType:this.state.type,onFileClick:this.props.onFileClick?this.props.onFileClick:null,uuCmdGetBinaryData:this._settings.uuCmdGetBinaryData,uuCmdGetBinaryDataUri:this._settings.uuCmdGetBinaryDataUri,uuCmdGetThumbnailData:this._settings.uuCmdGetThumbnailData,uuCmdGetThumbnailDataUri:this._settings.uuCmdGetThumbnailDataUri,getThumbnail:this.getThumbnail,shouldShowThumbnail:"none"!==this.props.thumbnailStrategy,fileButtons:this._fileButtons,customSelectable:this.props.readOnly?"none":this.props.selectable,selectableOnly:this.props.selectableOnly,onFilenameSet:this.props.onFilenameSet,baseUri:this.props.baseUri}),wrapperAttrs:this._isDndAllowed?{onDragOver:this._onDragOverHandler,onDragEnter:this._onDragEnterHandler,onDrop:this._onDropHandler,onDragEnd:this._onDragEndHandler,onDragLeave:this._onDragLeaveHandler}:null,isHovered:this.state.dndHover},!this.props.readOnly&&g.a.Common.Element.create(g.a.Bricks.Div,{className:this.getClassName("dndWrapper")},g.a.Common.Element.create(me,{ref_:function(e){return i._dropBar=e},onSetFiles:this._onSetFiles,lsiLabels:{placeholder:this._lsiLabels.dndAreaPlaceholder,uploadSuccessMsg:this._lsiLabels.dndAreaUploadSuccessMsg,uploadFailedMsg:this._lsiLabels.dndAreaUploadFailedMsg},sizeLimit:this.props.sizeLimit,customCodesEnabled:"none"!==this._settings.dndFileCodeRule,customCodesRequired:"required"===this._settings.dndFileCodeRule,dndEnabled:!1}))))]},render:function(){var e;return"loading"===this.state.state?e=g.a.Common.Element.create(g.a.Bricks.Loading,null):"ready"===this.state.state?e=this._getChild():"error"===this.state.state&&(e=g.a.Common.Element.create(g.a.Bricks.Div,{content:c(p.LSI_LABEL_COPY_FILE_MANAGER_LIST_FAILED)})),g.a.Common.Element.create(g.a.Bricks.Section,Fe({},this.getMainPropsToPass(),{header:this.props.headerHidden?null:c(this._lsiLabels.header),level:1}),e)}});i.d(t,"FileManager",function(){return Re}),i.d(t,"FileUploader",function(){return me}),console.log("".concat("uu_plus4u5filesg01","-").concat("4.3.1"," © Unicorn\nTerms of Use: https://unicorn.com/tou/").concat("uu_plus4u5filesg01")),g.a.Environment.addRuntimeLibrary({name:"uu_plus4u5filesg01",version:"4.3.1"});var Me={FileManager:Re,FileUploader:me};window.Plus4U5=window.Plus4U5||{},window.Plus4U5.Files=Me,window.Plus4U5.Files.Lsi=p;t.default=Me}],p.c=d,p.d=function(e,t,i){p.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},p.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p.t=function(t,e){if(1&e&&(t=p(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(p.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)p.d(i,n,function(e){return t[e]}.bind(null,n));return i},p.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return p.d(t,"a",t),t},p.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},p.p="",p(p.s=7);function p(e){if(d[e])return d[e].exports;var t=d[e]={i:e,l:!1,exports:{}};return c[e].call(t.exports,t,t.exports,p),t.l=!0,t.exports}var c,d});