!function(e,t){
"object"==typeof exports&&"object"==typeof module?module.exports=t(require("uu_appg01_core-logging"),require("uu_appg01_core-utils"),require("module")):"function"==typeof define&&define.amd?define("uu_appg01_core-perflog",["uu_appg01_core-logging","uu_appg01_core-utils","module"],t):"object"==typeof exports?exports["uu_appg01_core-perflog"]=t(require("uu_appg01_core-logging"),require("uu_appg01_core-utils"),require("module")):(e.UuApp=e.UuApp||{},
e.UuApp.Perflog=t(e["UuApp.Logging"],e["UuApp.Utils"],e[void 0]))}(window,(function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}}
;return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){
"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),
8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),
2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e}
;return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e,t){
for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
var o=n(2).Config,i=n(0).LoggerFactory,a=n(0).Logger,u=n(0).LogLevel,c=n(4),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")
}(this,e)}var t,n,s;return t=e,s=[{key:"setMessageFormat",value:function(t){e._getLogger().setMessageFormat(t)}},{key:"setLevel",value:function(t){e._getLogger().setLevel(t)}},{key:"isEnabled",
value:function(){return e._getLogger().getLevel()<u.OFF}},{key:"isVerbose",value:function(){return e._getLogger().getLevel()<u.INFO}},{key:"log",value:function(t){t&&e._getLogger().log(t)}},{
key:"_getLogger",value:function(){if(!this._logger){var e=new a("UuApp.Perflog.Logger")
;o.get("".concat("UuApp.Perflog.Logger".toLowerCase(),".log_level"),!1)||o.set("".concat("UuApp.Perflog.Logger".toLowerCase(),".log_level"),"INFO"),e._formatter=new c,i.configure(e,!1),this._logger=e}
return this._logger}}],(n=null)&&r(t.prototype,n),s&&r(t,s),e}();e.exports=s},function(e,n){e.exports=t},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n]
;r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(1),i=function(){function e(t,n,r,o){!function(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=t,this._name=n||"",this._attributes=r||{},this._traceable=o,this._checkpoints={},this._start=new Date,
this._startRaw=window.performance.now()}var t,n,i;return t=e,(n=[{key:"getId",value:function(){return this._id}},{key:"getName",value:function(){return this._name}},{key:"setAttribute",
value:function(e,t){this.getAttributes()[e]=t}},{key:"getAttributes",value:function(){return this._attributes}},{key:"getAttribute",value:function(e){return this.getAttributes()[e]}},{
key:"setCheckpoint",value:function(e){this._checkpoints[e]=Math.round(1e6*(window.performance.now()-this._startRaw))}},{key:"getCheckpoints",value:function(){return this._checkpoints}},{
key:"getCheckpoint",value:function(e){return this.getCheckpoints()[e]}},{key:"getStart",value:function(){return this._start}},{key:"getFinish",value:function(){return this._finish}},{
key:"getDuration",value:function(){return this._duration}},{key:"close",value:function(){this._finish||(this._finish=new Date,this._duration=Math.round(1e6*(window.performance.now()-this._startRaw)),
this._traceable&&o.log(this))}}])&&r(t.prototype,n),i&&r(t,i),e}();e.exports=i},function(e,t,n){"use strict";function r(e){
return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){
return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,
r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){
for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function a(e,t){
return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1
;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){
var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){
return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){
return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=n(0).MessageFormatter,f=function(e){!function(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}
}),t&&a(e,t)}(l,e);var t,n,r,c=u(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),
c.call(this,'[%d] PRFLG {"id":"%i","name":"%n","attributes":%a,"checkpoints":%c,"start":"%t","duration":"%D"}',null,null)}return t=l,(n=[{key:"setMessageFormat",value:function(e){
i(s(l.prototype),"setMessageFormat",this).call(this,e)}},{key:"_processMessageFormatTag",value:function(e,t){var n;switch(e){case"a":
n=t?'message.getAttribute("'.concat(t,'")'):"JSON.stringify(message.getAttributes())";break;case"c":n=t?'message.getCheckpoint("'.concat(t,'")'):"JSON.stringify(message.getCheckpoints())";break
;case"C":n=t?'LoggerMDC.get("'.concat(t,'")'):"LoggerMDC.toJson()";break;case"d":n="datetime.toISOString()";break;case"D":n="message.getDuration()";break;case"f":
n="message.getFinish() ? message.getFinish().toISOString() : null";break;case"i":switch(t){case/trace/i:n="message.getId().getTraceId()";break;case/parent/i:n="message.getId().getParentId()";break
;case/child/i:n="message.getId().getId()";break;case/level/i:n="message.getLevel()";break;default:n="message.getId().toString()"}break;case"I":n='"-"';break;case"n":n="message.getName()";break
;case"t":n="message.getStart().toISOString()"}return n}}])&&o(t.prototype,n),r&&o(t,r),l}(l);e.exports=f},function(e,t,n){"use strict";function r(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,
"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}
var a=("0000"+Math.floor(65535*Math.random()).toString(16)).slice(-4),u=function(){function e(t,n){
var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;r(this,e),"number"==typeof o&&(i=o,o=null),
this._traceId=t||a+("0000"+Math.floor(65535*Math.random()).toString(16)).slice(-4),this._parentId=n||this._traceId,this._id=o||("00000000"+Math.floor(4294967295*Math.random()).toString(16)).slice(-8),
this._level="number"==typeof i?o?i:i+1:0,this._qualifiedId="".concat(this._traceId,"-").concat(this._parentId,"-").concat(this._id,"-").concat(("0000"+this._level.toString()).slice(-4))}
return i(e,null,[{key:"create",value:function(t){var n;if(t){if(n=/^([^-]+)-([^-]+)-([^-]+)-([^-]+)$/.exec(t.toString()))return new e(n[1],n[2],n[3],Number(n[4]||0))
;var r=t.toString().replace(/-/g,"");return new e(r,r)}return new e(null,null)}}]),i(e,[{key:"getTraceId",value:function(){return this._traceId}},{key:"getParentId",value:function(){
return this._parentId}},{key:"getId",value:function(){return this._id}},{key:"getLevel",value:function(){return this._level}},{key:"toString",value:function(){return this._qualifiedId}}]),e}()
;e.exports=u},function(e,t,n){e.exports=n(7)},function(e,t,n){
var r=n(8),o="undefined"!=typeof document,i=((r?r.uri:o&&(document.currentScript||Array.prototype.slice.call(document.getElementsByTagName("script"),-1)[0]||{}).src)||"").toString()
;"/4.0.0/"===(i=i.split(/\//).slice(0,-1).join("/")+"/").substr(-"/4.0.0/".length)&&(i=i.substr(0,i.length-"/4.0.0/".length)+"/4.7.2/"),n.p=i,e.exports=n(9)},function(e,t){e.exports=n
},function(e,t,n){"use strict";e.exports={Perflog:n(10),Section:n(3),SectionId:n(5),Logger:n(1),MessageFormatter:n(4)}},function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){try{
var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n)
;function u(e){r(a,o,i,u,c,"next",e)}function c(e){r(a,o,i,u,c,"throw",e)}u(void 0)}))}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e
}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n]
;r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=n(11),c=n(2),s=c.ContextStore,l=c.Config,f=n(3),g=n(5),p=n(1),h=Number(new u({
canvas:!0}).get()).toString(16),v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{
key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"function"==typeof e&&(t=e,e=null),
s.create("uuapp.perflog",(function(){var n=s.get("uuapp.perflog");return e=e?g.create(e):e=g.create(h,h),n.set("parentId",e),t()}))}},{key:"measureSection",value:function(){
var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;"function"==typeof t&&(r=t,
t=null,n={}),"object"===i(t)&&(r=n,n=t,t=null),"function"==typeof n&&(r=n,n={});var a=function(){var i=o(regeneratorRuntime.mark((function o(){var i,a,u,c,l,p
;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i=s.get("uuapp.perflog"),a=i.get("parentId"),u=e._isTraceable(t),c=u?new g(a.getTraceId(),a.getId(),-1):a,
l=new f(c,t,n,u),o.prev=5,o.next=8,r(l);case 8:return p=o.sent,l.close(),o.abrupt("return",p);case 13:throw o.prev=13,o.t0=o.catch(5),l.close(),o.t0;case 17:case"end":return o.stop()}
}),o,null,[[5,13]])})));return function(){return i.apply(this,arguments)}}(),u=s.get("uuapp.perflog");return u?u.fork(a):e.initialize(a)}},{key:"setSectionFilter",value:function(e){
l.set("uuapp.perflog.section_filter",e||".*")}},{key:"_isTraceable",value:function(e){if(p.isVerbose())return!0;var t=l.get("uuapp.perflog.section_filter");return!!t&&new RegExp(t).test(e)}}],
(n=null)&&a(t.prototype,n),r&&a(t,r),e}();e.exports=v},function(e,t,n){var r,o,i;i=function(){"use strict";var e=function(e){var t,n;t=Array.prototype.forEach,n=Array.prototype.map,
this.each=function(e,n,r){if(null!==e)if(t&&e.forEach===t)e.forEach(n,r);else if(e.length===+e.length){for(var o=0,i=e.length;o<i;o++)if(n.call(r,e[o],o,e)==={})return
}else for(var a in e)if(e.hasOwnProperty(a)&&n.call(r,e[a],a,e)==={})return},this.map=function(e,t,r){var o=[];return null==e?o:n&&e.map===n?e.map(t,r):(this.each(e,(function(e,n,i){
o[o.length]=t.call(r,e,n,i)})),o)},"object"==typeof e?(this.hasher=e.hasher,this.screen_resolution=e.screen_resolution,this.canvas=e.canvas,
this.ie_activex=e.ie_activex):"function"==typeof e&&(this.hasher=e)};return e.prototype={get:function(){var e=[];return e.push(navigator.userAgent),e.push(navigator.language),
e.push(screen.colorDepth),this.screen_resolution&&void 0!==this.getScreenResolution()&&e.push(this.getScreenResolution().join("x")),e.push((new Date).getTimezoneOffset()),
e.push(this.hasSessionStorage()),e.push(this.hasLocalStorage()),e.push(!!window.indexedDB),document.body?e.push(typeof document.body.addBehavior):e.push("undefined"),
e.push(typeof window.openDatabase),e.push(navigator.cpuClass),e.push(navigator.platform),e.push(navigator.doNotTrack),e.push(this.getPluginsString()),
this.canvas&&this.isCanvasSupported()&&e.push(this.getCanvasFingerprint()),this.hasher?this.hasher(e.join("###"),31):this.murmurhash3_32_gc(e.join("###"),31)},murmurhash3_32_gc:function(e,t){
var n,r,o,i,a,u,c,s;for(n=3&e.length,r=e.length-n,o=t,a=3432918353,u=461845907,s=0;s<r;)c=255&e.charCodeAt(s)|(255&e.charCodeAt(++s))<<8|(255&e.charCodeAt(++s))<<16|(255&e.charCodeAt(++s))<<24,++s,
o=27492+(65535&(i=5*(65535&(o=(o^=c=(65535&(c=(c=(65535&c)*a+(((c>>>16)*a&65535)<<16)&4294967295)<<15|c>>>17))*u+(((c>>>16)*u&65535)<<16)&4294967295)<<13|o>>>19))+((5*(o>>>16)&65535)<<16)&4294967295))+((58964+(i>>>16)&65535)<<16)
;switch(c=0,n){case 3:c^=(255&e.charCodeAt(s+2))<<16;case 2:c^=(255&e.charCodeAt(s+1))<<8;case 1:
o^=c=(65535&(c=(c=(65535&(c^=255&e.charCodeAt(s)))*a+(((c>>>16)*a&65535)<<16)&4294967295)<<15|c>>>17))*u+(((c>>>16)*u&65535)<<16)&4294967295}return o^=e.length,
o=2246822507*(65535&(o^=o>>>16))+((2246822507*(o>>>16)&65535)<<16)&4294967295,o=3266489909*(65535&(o^=o>>>13))+((3266489909*(o>>>16)&65535)<<16)&4294967295,(o^=o>>>16)>>>0},hasLocalStorage:function(){
try{return!!window.localStorage}catch(e){return!0}},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},isCanvasSupported:function(){
var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},isIE:function(){
return"Microsoft Internet Explorer"===navigator.appName||!("Netscape"!==navigator.appName||!/Trident/.test(navigator.userAgent))},getPluginsString:function(){
return this.isIE()&&this.ie_activex?this.getIEPluginsString():this.getRegularPluginsString()},getRegularPluginsString:function(){return this.map(navigator.plugins,(function(e){
var t=this.map(e,(function(e){return[e.type,e.suffixes].join("~")})).join(",");return[e.name,e.description,t].join("::")}),this).join(";")},getIEPluginsString:function(){
return window.ActiveXObject?this.map(["ShockwaveFlash.ShockwaveFlash","AcroPDF.PDF","PDF.PdfCtrl","QuickTime.QuickTime","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer","SWCtl.SWCtl","WMPlayer.OCX","AgControl.AgControl","Skype.Detection"],(function(e){
try{return new ActiveXObject(e),e}catch(e){return null}})).join(";"):""},getScreenResolution:function(){return[screen.height,screen.width]},getCanvasFingerprint:function(){
var e=document.createElement("canvas"),t=e.getContext("2d"),n="http://valve.github.io";return t.textBaseline="top",t.font="14px 'Arial'",t.textBaseline="alphabetic",t.fillStyle="#f60",
t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,4,17),e.toDataURL()}},e},
e.exports?e.exports=i():void 0===(o="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o)}])}));