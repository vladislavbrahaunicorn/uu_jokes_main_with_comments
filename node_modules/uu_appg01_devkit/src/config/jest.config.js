const path = require("path");

module.exports = function(pkg) {
  return {
    testEnvironment: "node",
    rootDir: path.resolve("."),
    setupFiles: [path.join(__dirname, "jest-node-config-profiles.js")],
    setupFilesAfterEnv: [path.join(__dirname, "jest-node-default-timeout.js")],
    transform: {},
    testPathIgnorePatterns: [
      "/node_modules/",
      "<rootDir>/dist.*",
      "<rootDir>/public/",
      "<rootDir>/target/",
      "/templates/",
      "/test\\.js$"
    ],
    coverageDirectory: path.resolve("target", "coverage"),
    coverageReporters: [],
    ...((pkg && pkg["jest"]) || {})
  };
};
