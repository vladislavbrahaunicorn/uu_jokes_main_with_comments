/*!
 * UAF Licence for the uu5 software.
 * 
 * Copyright (c) 2016-present, Unicorn a.s.
 * All rights reserved.
 * 
 * Definitions
 * -----------
 * This licence agreement is based on the original "BSD Licence" published by
 * the Regents of the University of California in 1990.
 * 
 * The term "Software" means the uu5 package, its modules, components,
 * all program files, source code, examples, media, and documentation which are part
 * of the Software package, as well as any portion of them. The term "Author" means
 * Unicorn a.s. and all its subsidiaries and/or affiliates.
 * 
 * Licence Agreement
 * -----------------
 * 
 * Redistribution and use of this Software in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 
 * 3. All derivative products containing user interface must display the following
 *    acknowledgement in the appropriate "About window" or website section accessible
 *    by all users of the product:
 * 
 *      This product includes following software developed by
 *      <a href="https://unicorn.com">Unicorn a.s.</a>:
 *      <a href="https://uuos9.plus4u.net/uu-dockitg01-main/78462435-86b4d5a4a030400784764ebdb972bbda/book">UAF</a>,
 *      <a href="https://uuos9.plus4u.net/uu-dockitg01-main/78462435-ed11ec379073476db0aa295ad6c00178/book">uu5</a>.
 * 
 * 4. All derivative products must not block the default uu5 browser console message containing
 *    Software version information and copyright notice of the Author.
 * 
 * 5. The use of any portion of this Software is not allowed in the products
 *    that fully or partially resemble the functionality of the Software
 *    or otherwise compete with the Software unless they are licenced under the same licence
 *    conditions and provided free of charge. Specific prior written permission is required otherwise.
 * 
 * 6. Neither the name of the Author nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 * 
 * Disclaimer
 * ----------
 * THIS SOFTWARE IS PROVIDED BY AUTHOR "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL AUTHOR BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
(window["__webpack_jsonp_uu5richtextg01_1_12_1_uu5richtextg01"] = window["__webpack_jsonp_uu5richtextg01_1_12_1_uu5richtextg01"] || []).push([[4],{

/***/ 298:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createInputComponent", function() { return createInputComponent; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var uu5g04_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(38);
/* harmony import */ var uu5g04_forms__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(uu5g04_forms__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(88);
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _templateObject() {
  var data = _taggedTemplateLiteral(["\n            ", "\n            position: relative;\n\n            &.uu5-common-disabled .public-DraftEditor-content {\n              border-color: rgba(189, 189, 189, .42);\n              background-color: rgba(245, 245, 245, .42);\n              color: rgba(0,0,0,.24);\n            }\n\n            &.uu5-richtext-elevation--1::after {\n              content: \"\";\n              position: absolute;\n              top: 0;\n              bottom: 0;\n              left: 0;\n              right: 0;\n              box-shadow: 0 0 0 0 transparent, inset 0 1px 5px 0 rgba(0,0,0,.14), inset 0 2px 4px 0 rgba(0,0,0,.3), inset 0 1px 5px 0 rgba(0,0,0,.15);\n              pointer-events: none;\n            }\n\n            &.uu5-forms-input .DraftEditor-root .uu5-bricks-button {\n              width: auto;\n              height: auto;\n            }\n\n            /* overwrite font-size defined by UU5.Forms.TextInputMixin - mixin defines font size for icons used for control inputs */\n            &.uu5-forms-input .DraftEditor-root .uu5-bricks-icon {\n              font-size: inherit;\n            }\n\n            .uu5-forms-input-wrapper {\n              .uu5-bricks-icon {\n                text-align: left;\n                position: static;\n                padding: 0;\n                right: auto;\n                height: auto;\n              }\n            }\n\n            .uu5-richtext-toolbar {\n              .uu5-bricks-icon {\n                position: static;\n                height: 100%;\n                font-size: 20px;\n              }\n            }\n\n            && > .uu5-bricks-button {\n              min-height: ", ";\n              width: ", ";\n              height: ", ";\n              padding: 0;\n\n              > .uu5-bricks-icon {\n                position: static;\n                width: auto;\n                padding: 0;\n                font-size: ", ";\n              }\n            }\n\n\n        "]);

  _templateObject = function _templateObject() {
    return data;
  };

  return data;
}

function _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }

//@@viewOn:imports


 //@@viewOff:imports

var ICON_FONT_SIZES = {
  s: "14px",
  m: "16px",
  l: "18px",
  xl: "20px"
};
var BUTTON_SIZES = {
  s: "20px",
  m: "24px",
  l: "26px",
  xl: "28px"
};
var createInputComponent = function createInputComponent(_ref) {
  var Component = _ref.Component,
      lsi = _ref.lsi,
      tagName = _ref.tagName,
      mainClassName = _ref.mainClassName;
  return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Forms.Context.withContext(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.VisualComponent.create({
    //@@viewOn:mixins
    mixins: [uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.BaseMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.ElementaryMixin, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Forms.TextInputMixin],
    //@@viewOff:mixins
    //@@viewOn:statics
    statics: {
      tagName: tagName,
      classNames: {
        main: function main(props, state) {
          return "".concat(mainClassName, " ").concat(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Css.css(_templateObject(), state.feedback === "loading" || state.disabled ? "pointer-events: none;" : "", BUTTON_SIZES[props.size], BUTTON_SIZES[props.size], BUTTON_SIZES[props.size], ICON_FONT_SIZES[props.size]));
        },
        negativeElevation: _config_js__WEBPACK_IMPORTED_MODULE_2__["default"].CSS + "elevation--1"
      },
      lsi: lsi
    },
    //@@viewOff:statics
    //@@viewOn:propTypes
    propTypes: {
      getToolbar: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.func,
      forceRenderModal: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.bool,
      plugins: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.oneOfType([uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.object, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.array]),
      buttons: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.any
    },
    //@@viewOff:propTypes
    //@@viewOn:getDefaultProps
    getDefaultProps: function getDefaultProps() {
      return {
        getToolbar: undefined,
        forceRenderModal: undefined,
        plugins: undefined,
        buttons: undefined
      };
    },
    //@@viewOff:getDefaultProps
    //@@viewOn:reactLifeCycle
    getInitialState: function getInitialState() {
      this._resetValue = this.props.value;
      return {};
    },
    componentWillMount: function componentWillMount() {
      // props onValidate, feedback and message
      if (this.props.onValidate && typeof this.props.onValidate === "function") {
        this._validateOnChange({
          value: this.state.value,
          event: null,
          component: this
        });
      } else {
        this.setFeedback(this.props.feedback || "initial", this.props.message, this.state.value);
      }

      return this;
    },
    componentWillReceiveProps: function componentWillReceiveProps(nextProps) {
      // props controlled, required, value, requiredMessage, feedback, message
      if (this.props.controlled) {
        if (nextProps.required && (nextProps.value === "" || nextProps.value === null)) {
          this.setError(nextProps.requiredMessage);
        } else {
          this.setFeedback(nextProps.feedback, nextProps.message, nextProps.value);
        }
      }

      return this;
    },
    //@@viewOff:reactLifeCycle
    //@@viewOn:interface
    setCursorPosition: function setCursorPosition(cursorPosition) {
      return this._editor ? this._editor.setCursorPosition(cursorPosition) : null;
    },
    //@@viewOff:interface
    //@@viewOn:overriding
    setValue_: function setValue_(value, setStateCallback) {
      // props onValidate
      if (this._checkRequired({
        value: value
      })) {
        if (typeof this.props.onValidate === "function") {
          this._validateOnChange({
            value: value,
            event: null,
            component: this
          });
        } else {
          this.props.required ? this.setSuccess(null, value) : this.setInitial(null, value);
        }
      }

      this._editor.setValue(value, undefined, setStateCallback);

      return this;
    },
    getValue_: function getValue_(editorState) {
      return this._editor.getValue(editorState);
    },
    reset_: function reset_() {
      this.setValue(this._resetValue);
    },
    //@@viewOff:overriding
    //@@viewOn:private
    _validateOnChange: function _validateOnChange(opt) {
      // props onValidate
      var result = typeof this.props.onValidate === "function" ? this.props.onValidate(opt) : null;

      if (result) {
        if (_typeof(result) === "object") {
          if (result.feedback) {
            this.setFeedback(result.feedback, result.message, result.value);
          } else {
            this.setState({
              value: opt.value
            });
          }
        } else {
          this.showError("validateError", null, {
            context: {
              event: null,
              func: this.props.onValidate,
              result: result
            }
          });
        }
      }

      return this;
    },
    _onChange: function _onChange(e, editorState) {
      var opt = {
        value: this.getValue_(editorState),
        event: e,
        component: this
      }; // props onChange, validateOnChange

      if (!this.isDisabled() && !this.isReadOnly()) {
        if (typeof this.props.onChange === "function") {
          this.props.onChange(opt);
        } else if (this.props.validateOnChange) {
          this._validateOnChange(opt);
        } else {
          var result = this.getChangeFeedback(opt);
          var newState = {
            feedback: result.feedback,
            value: result.value
          };
          if (result.message) newState.message = result.message;
          this.setState(newState);
        }
      }

      this._hasFocus = false;
    },
    _onBlur: function _onBlur(e) {
      // props onBlur, validateOnChange, required
      var opt = {
        value: this.getValue(),
        event: e,
        component: this
      };

      if (typeof this.props.onBlur === "function") {
        this.props.onBlur(opt);
      } else {
        if (this._checkRequired({
          value: opt.value
        }) && !this.props.validateOnChange) {
          opt.required = this.props.required;
          var blurResult = this.getBlurFeedback(opt);

          this._setFeedback(blurResult.feedback, blurResult.message, blurResult.value);
        }
      }
    },
    _onFocus: function _onFocus(e) {
      // props onFocus
      var opt = {
        value: this.getValue(),
        event: e,
        component: this
      };

      if (typeof this.props.onFocus === "function") {
        this.props.onFocus(opt);
      } else {
        var result = this.getFocusFeedback(opt);
        result && this._setFeedback(result.feedback, result.message, result.value);
      }
    },
    _validateUu5String: function _validateUu5String(data) {
      var result;

      if (data.value && !uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.UU5String.isValid(data.value)) {
        result = {
          feedback: "error",
          message: this.getLsiComponent("invalidUu5String"),
          value: data.value
        };
      } else {
        result = {
          feedback: "success",
          message: null,
          value: data.value
        };
      }

      return result;
    },
    _registerEditor: function _registerEditor(editor) {
      this._editor = editor;
      this._textInput = editor.getArea();
    },
    _getBgStyle: function _getBgStyle() {
      if (this.props.bgStyle === "outline" || this.props.bgStyle === "transparent") {
        return this.props.bgStyle;
      }

      return undefined;
    },
    //@@viewOff:private
    //@@viewOn:render
    render: function render() {
      var inputId = this.getId() + "-uu5richtext-editor";

      var inputAttrs = this._getInputAttrs();

      var mainProps = this.getMainPropsToPass();

      if (this.props.elevation) {
        mainProps.className += " " + (this.props.elevation === -1 ? this.getClassName("negativeElevation") : uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.ClassNames.elevation + this.props.elevation);
      }

      return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create("div", inputAttrs, this.getLabel(inputId), this.getInputWrapper([uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(Component, _extends({}, this.props, mainProps, {
        hidden: this.isHidden(),
        key: "uu5richtext-expandable-editor",
        id: inputId,
        ref_: this._registerEditor,
        value: this.state.value,
        mainAttrs: this.props.inputAttrs,
        onChange: this._onChange,
        onBlur: this._onBlur,
        onFocus: this._onFocus,
        readOnly: this.isReadOnly() || this.isDisabled(),
        controlled: true,
        plugins: this.props.plugins,
        buttons: this.props.buttons,
        placeholder: this.props.placeholder || undefined,
        getToolbar: this.props.getToolbar,
        bgStyle: this._getBgStyle()
      }))]));
    } //@@viewOff:render

  }));
};
/* harmony default export */ __webpack_exports__["default"] = (createInputComponent);

/***/ })

}]);