import uu5pluginDef from "../uu5/uu5string.js";

import EditorBlockLazy from "../../editor-block-lazy.js";

import "./html-fragment.less";

const pluginDef = uu5pluginDef
  .setIn(["buttonDefs", "name"], "htmlFragment")
  .setIn(["buttonDefs", "icon"], "mdi-language-html5")
  .setIn(["buttonDefs", "label"], "HTML fragment")
  .deleteIn(["buttonDefs", "dropdownItemLabel"])
  .deleteIn(["buttonDefs", "tooltip"])
  .deleteIn(["buttonDefs", "props"])
  .setIn(["toEditorItemDefs", "0", "component"], properties => {
    const dataProps = properties.blockProps;
    return (
      <div className="uu5-richtext-html-editor-fragment">
        <code {...dataProps}>
          <EditorBlockLazy {...properties} />
        </code>
      </div>
    );
  })
  .setIn(["toEditorItemDefs", "1", "component"], properties => {
    const dataProps = properties.contentState.getEntity(properties.entityKey).getData();
    return (
      <code {...dataProps} className="uu5-richtext-html-editor-fragment">
        {properties.children}
      </code>
    );
  });

export default pluginDef;
