import * as UU5 from "uu5g04";

import LinkForm from "./internal/link-form.js";

import uu5pluginDef from "../uu5/link.js";

const pluginDef = uu5pluginDef
  .setIn(["toEditorItemDefs", "tagName"], "a")
  .setIn(["toEditorItemDefs", "component"], properties => {
    const linkProps = properties.contentState.getEntity(properties.entityKey).getData().props || {};
    return <a {...linkProps}>{properties.children}</a>;
  })
  .setIn(["toEditorItemDefs", "getEditationForm"], (entityName, text, data, onSave, onCancel, isEdit) => {
    // plugin register only entity LINK so its not needed to check entity
    return {
      header: (
        <UU5.Bricks.Lsi
          lsi={UU5.Environment.Lsi.RichText.htmlPlugins.link[isEdit ? "editationFormHeader" : "addFormHeader"]}
        />
      ),
      content: <LinkForm data={data} text={text} onSave={onSave} onCancel={onCancel} />,
      isPopover: true
    };
  });

export default pluginDef;
