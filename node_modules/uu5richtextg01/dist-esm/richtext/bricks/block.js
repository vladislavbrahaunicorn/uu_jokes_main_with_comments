import * as UU5 from "uu5g04";

const Block = {
  createBlockRendererFn: blockRenderFnMap => {
    return block => {
      const type = block.getType();
      const data = block.getData();
      let props = data.get("props");
      if (props) {
        // props is imutable map
        props = props.toJSON();
      } else {
        props = {};
      }
      let customBlock = blockRenderFnMap[type];
      if (typeof customBlock === "function") {
        return {
          component: customBlock,
          props
        };
      } else {
        return UU5.Common.Tools.merge({ props }, customBlock);
      }
    };
  }
};

export default Block;
