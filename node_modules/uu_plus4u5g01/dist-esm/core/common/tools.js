import * as UU5 from "uu5g04";
import Environment from "../environment/environment.js";

export const Tools = {
  getLegacyUrl(uri) {
    let params = [encodeURIComponent(uri)];
    return UU5.Common.Tools.formatString(Environment.uuUrlLink, params);
  },

  base64DecodeUnicode(str) {
    // Going backwards: from bytestream, to percent-encoding, to original string.
    return JSON.parse(
      decodeURIComponent(
        atob(str)
          .split("")
          .map(function(c) {
            return "%" + ("00" + c.charCodeAt(0).toString(16)).slice(-2);
          })
          .join("")
      )
    );
  },

  canSendToken(url) {
    return UU5.Environment.isTrustedDomain(url);
  }
};

export default Tools;
