import React from "react";
import * as UU5 from "uu5g04";
import "uu5g04-bricks";
import Cfg from "./config/config.js";
import Css from "./internal/css.js";

const classNames = {
  main: props => {
    let classes = [Cfg.CSS + "history-back-button"];

    if (!props.bgStyle) {
      let colorSchema = props.colorSchema || "white";
      if (colorSchema === "default") colorSchema = "white";
      let color = UU5.Environment.colorSchemaMap[colorSchema].color;
      let shade = color === "white" || color === "black" ? 900 : 500;
      color = color.replace(/-rich$/, "");

      classes.push(Css.css`
        &&&&&& {
          color: ${UU5.Environment.colors[color][`c${shade}`]};
          background-color: transparent;
        }
      `);
    }

    return classes.join(" ");
  }
};

const getProps = props => {
  let propsToPass = { ...props };

  propsToPass.className += (propsToPass.className ? " " : "") + classNames.main(props);

  return propsToPass;
};

export const HistoryBackButton = React.forwardRef((props, ref) => {
  const onClick = (...args) => {
    if (typeof props.onClick === "function") {
      props.onClick(...args);
    }

    history.back();
  };

  return (
    // eslint-disable-next-line react/jsx-no-bind
    <UU5.Bricks.Button {...getProps(props)} ref={ref} onClick={onClick}>
      <UU5.Bricks.Icon icon="mdi-arrow-left" />
    </UU5.Bricks.Button>
  );
});

HistoryBackButton.tagname = Cfg.TAG + "HistoryBackButton";
HistoryBackButton.isStateless = true;
HistoryBackButton.propTypes = {
  onClick: UU5.PropTypes.func
};

export default HistoryBackButton;
